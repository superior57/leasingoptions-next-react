(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"9U2n":function(e,n,t){"use strict";t.d(n,"a",(function(){return F}));var a=t("nKUr"),i=t("cpVT"),c=t("dhJC"),r=t("q1tI"),l=t("MHX4"),s=t("20a2"),o=t("zM5D"),d=t("SeHH"),u=t("8ua7"),m=t("IP2g"),j=t("uB96"),b=t("l7ai"),f=t("oszm"),h=t("gt28"),p=t("btDt"),O=t("DQXc"),g=t("zjkP"),x=t("2inZ"),v=t("7Sq+"),y=t("vJKn"),N=t.n(y),w=t("rg98"),I=t("H+61"),k=t("UlJF"),P=t("uDbZ"),C=function(){function e(){Object(I.a)(this,e)}return Object(k.a)(e,null,[{key:"VerifySalesPerson",value:function(){var e=Object(w.a)(N.a.mark((function e(n,t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.i)(n,t,a));case 1:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}()},{key:"CheckInformationNoticAcceptance",value:function(){var e=Object(w.a)(N.a.mark((function e(n,t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){Object(P.a)(n,t).then((function(n){var t=!!n.isSucceed&&n.data;e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}]),e}();function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){Object(i.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F=function(e){var n,t,i,y,N=e.title,w=e.baseData,I=e.settings,k=e.onRequestClose,S=Object(c.a)(e,["title","baseData","settings","onRequestClose"]),F=Object(s.useRouter)(),T=Object(l.c)(),D=T.register,A=T.handleSubmit,E=T.errors,R=parseFloat("199"),L=Object(r.useState)(!1),M=L[0],H=L[1],_=Object(r.useState)(!1),W=_[0],B=_[1],U=Object(r.useState)(null),V=U[0],J=U[1],z=Object(r.useState)(I.salesPersons||[]),K=z[0],Q=z[1],X=Object(r.useState)(!1),Y=X[0],Z=X[1],G=Object(r.useState)(!1),$=G[0],ee=G[1],ne=Object(r.useState)([]),te=ne[0],ae=ne[1],ie=Object(r.useState)(null),ce=ie[0],re=ie[1],le=Object(r.useState)(1),se=le[0],oe=le[1],de=Object(r.useState)({fullName:null,telephone:null,email:null,companyName:null,ownerId:null,allowedCommunicationTypes:null,informationNoticeConfirmed:!1}),ue=de[0],me=de[1];Object(r.useEffect)((function(){0===K.length&&I.isInternal&&Object(P.b)().then((function(e){Q(e.data)}))}),[]);var je=function(){I.isInternal&&(Z(!0),ee(!1),ae([]),re(null))},be=function(e){if(e&&w){H(!0);var n=q(q({},w),{},{quoteEnquiryType:I.proceededToApplyForFinanceDirectly?2:1,isIDDAccepted:I.proceededToApplyForFinanceDirectly&&e.informationNoticeConfirmed,fullName:e.fullName,telephone:e.telephone,email:e.email,companyName:2!==w.leasingDealType?e.companyName:null,gaClientId:Object(p.a)()});I.isInternal?n.salesPersonId=e.ownerId:n.allowedCommunicationTypes=e.allowedCommunicationTypes||null,v.a.SubmitQuoteEnquiry(n).then((function(t){if(H(!1),t.isSucceed&&t.data){if(!I.isInternal){var a=new Date;a.setFullYear(a.getFullYear()+1),n.allowedCommunicationTypes&&x.a.SetToSeenMarketingForm(n.email,a),e.privacyConfirmed&&Object(O.b)(a)}if(I.proceededToApplyForFinanceDirectly)switch(n.leasingDealType.toString()){case"1":case"3":var i="/proposal_business?directfinance=1&fromconfirmquote=1&enquiryid="+t.data+"&email="+encodeURI(n.email)+"&fromInsuredLeasing="+(window.location.href.includes("car-leasing-with-insurance")?"1":"0");F.push(i);break;case"2":i="/proposal_personal?directfinance=1&fromconfirmquote=1&enquiryid="+t.data+"&email="+encodeURI(n.email)+"&fromInsuredLeasing="+(window.location.href.includes("car-leasing-with-insurance")?"1":"0");F.push(i)}else I.isInternal?F.push(Object(g.r)(!0)):F.push(Object(g.r)(!1,"quoteconfirm"));k()}}))}};return Object(a.jsxs)(o.a,q(q({onHide:k,centered:!0,scrollable:!1},S),{},{children:[Object(a.jsx)(o.a.Header,{className:"d-flex flex-nowrap justify-content-center align-items-center",closeButton:!0,children:Object(a.jsx)(o.a.Title,{className:"mb-0",children:function(e){var n=N;return 2===e&&(n="Information Notice"),n}(se)})}),Object(a.jsx)(o.a.Body,{children:Object(a.jsxs)(l.b,q(q({},T),{},{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-24",children:Object(a.jsx)("p",{children:"A member of our team will contact you shortly after your submission."})})}),1===se?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[I.leasingMessage?Object(a.jsx)("div",{className:"col-24",children:Object(a.jsxs)("p",{children:["I\u2019m interested in leasing of ",Object(a.jsx)("strong",{children:I.leasingMessage})]})}):null,Object(a.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(a.jsxs)("label",{children:["Full Name ",Object(a.jsx)("span",{children:"(Required)"})]}),Object(a.jsx)("input",{type:"text",className:"form-control ".concat(E.fullName?"is-invalid":""),placeholder:"First & Last Name",maxLength:50,name:"fullName",disabled:$,ref:D({required:!0})}),E.fullName?Object(a.jsx)("span",{className:"invalid-feedback d-block",children:"Full Name is required."}):null]}),w.leasingDealType!==b.a.Personal?Object(a.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(a.jsx)("label",{children:"Company Name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Company Name",maxLength:50,name:"companyName",disabled:$,ref:D()})]}):null,Object(a.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(a.jsxs)("label",{children:["Telephone ",Object(a.jsx)("span",{children:"(Required)"})]}),Object(a.jsx)("input",{type:"tel",className:"form-control ".concat(E.telephone?"is-invalid":""),placeholder:"Mobile or Home",maxLength:20,name:"telephone",onBlur:function(e){je()},disabled:$,ref:D({required:"Telephone is required.",validate:function(e){return!0===Object(h.d)(e)||"Please specify a valid UK phone number."}})}),E.telephone?Object(a.jsx)("span",{className:"invalid-feedback d-block",children:null===(n=E.telephone)||void 0===n?void 0:n.message}):null]}),Object(a.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(a.jsxs)("label",{children:["Email ",Object(a.jsx)("span",{children:"(Required)"})]}),Object(a.jsx)("input",{type:"email",className:"form-control ".concat(E.email?"is-invalid":""),placeholder:"E.g. johnsmith@website.co.uk",maxLength:50,name:"email",onBlur:function(e){I.isInternal||(e.target.value&&Object(h.a)(e.target.value)?J(e.target.value):J(null)),je()},disabled:$,ref:D({required:"Email is required.",validate:function(e){return!0===Object(h.a)(e)||"Email is invalid."}})}),E.email?Object(a.jsx)("span",{className:"invalid-feedback d-block",children:null===(t=E.email)||void 0===t?void 0:t.message}):null]}),I.isInternal?Object(a.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(a.jsx)("label",{children:"Salesperson"}),Object(a.jsxs)("select",{className:"form-control",name:"salesPersonId",onChange:function(e){je()},disabled:$,ref:D,children:[Object(a.jsx)("option",{value:"",children:"Please select"}),K.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.fullName},e.id)}))]})]}):null]}),I.isInternal&&$?Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-24",children:[ce&&ce.name?Object(a.jsxs)(a.Fragment,{children:["Account with these details already exists for Owner: ",ce.name]}):null,te.map((function(e,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"radio",className:"d-inline mr-1",name:"ownerId",id:"salesPerson_".concat(n),value:e.id,defaultChecked:ce.id===e.id,ref:D({required:"Owner is required."})}),Object(a.jsx)("label",{className:"d-inline",htmlFor:"salesPerson_".concat(n),children:e.text})]},e.id)})),E.ownerId?Object(a.jsx)("span",{className:"invalid-feedback d-block",children:null===(i=E.ownerId)||void 0===i?void 0:i.message}):null]})}):null,I.isInternal?null:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-24",children:[Object(a.jsx)(d.a,{emailAddress:V,settings:{onVerificationStart:function(){B(!0)},onVerificationComplete:function(){B(!1)}}}),Object(a.jsx)(u.a,{})]})})]}):null,2===se?Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-24",children:[Object(a.jsxs)("ul",{className:"mb-3",children:[Object(a.jsxs)("li",{children:["We are ",Object(a.jsx)("strong",{children:"Leasing Options Limited"}),", a credit intermediary for vehicle finance and insurance related products. Our registered office is ",Object(a.jsx)("strong",{children:"Options House, Atkin Street, Worsley, Manchester, M28 3DG"})]}),Object(a.jsxs)("li",{children:["We are authorised and regulated by the Financial Conduct Authority. Registered no: ",Object(a.jsx)("strong",{children:"660061"}),"."]}),Object(a.jsx)("li",{children:"We are a credit broker of vehicle finance, we are not a funder or a lender."}),Object(a.jsxs)("li",{children:["We charge a Processing Fee of ",Object(f.a)(R)," including VAT which is only payable at order stage, once acceptable finance has been obtained, as a contribution to the costs incurred in processing the vehicle finance agreement. We do not charge fees for processing insurance products. Payment of the Processing Fee can be made on-line using a credit or debit card or by BACs transfer."]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsxs)("div",{className:"form-check form-check-inline privacy-agreement",children:[Object(a.jsx)("input",{type:"checkbox",className:"form-check-input",id:"infoConfirmed",name:"informationNoticeConfirmed",ref:D({validate:function(e){return!0===e||"Information Notice confirmation required."}})}),Object(a.jsx)("label",{htmlFor:"infoConfirmed",className:E.informationNoticeConfirmed?"invalid-feedback":null,children:"Please respond to this 'Information Notice' confirming that you understand and acknowledge the above and that you are happy to proceed. Any delays in receiving confirmation may impact on the rates quoted."})]}),E.informationNoticeConfirmed&&Object(a.jsx)("span",{className:"invalid-feedback d-block",children:null===(y=E.informationNoticeConfirmed)||void 0===y?void 0:y.message})]})]})}):null,I.showPriceWarning?Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-24",children:Object(a.jsxs)("div",{className:"alert alert-warning",role:"alert",children:[Object(a.jsx)("strong",{children:"IMPORTANT:"})," This is an indicative price, please speak to your account manager for the exact rental."]})})}):null]}))}),Object(a.jsx)(o.a.Footer,{children:Object(a.jsx)("button",{type:"button",className:"btn btn-primary btn-lg",onClick:A((function(e){if(!M&&!W)if(1===se){H(!0);var n=e.email,t=e.telephone;(function(e,n,t){return new Promise((function(a){Y&&(ee(!1),re(null)),Y&&e?C.VerifySalesPerson(e,n,t).then((function(n){var t=!1;if(Z(!1),n.isSucceed&&n.data.isRequired&&n.data.salesPersons){ee(!0);var i=n.data.salesPersons,c=i.find((function(e){return e.isExisting}));c&&re({id:c.id,name:c.text}),ae(i),t=!0}else re({id:e,name:null});a(t)})):(Z(!1),a(!1))}))})(e.salesPersonId,n,t).then((function(a){if(a)H(!1);else{var i={fullName:e.fullName,telephone:e.telephone,email:e.email,companyName:e.companyName,ownerId:e.ownerId||e.salesPersonId||null,allowedCommunicationTypes:e.allowedCommunicationTypes};I.proceededToApplyForFinanceDirectly?C.CheckInformationNoticAcceptance(n,t).then((function(e){e?(me((function(e){return q(q({},e),i)})),H(!1),oe(2)):be(i)})):be(i)}}))}else if(2===se){var a=q({},ue);a.informationNoticeConfirmed=e.informationNoticeConfirmed,be(a)}})),children:M?Object(a.jsx)(m.a,{width:"16",height:"16",icon:j.x,className:"fa-spin"}):"Submit"})})]}))}}}]);