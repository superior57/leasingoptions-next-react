_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[136],{Or9R:function(e,t,n){"use strict";n.r(t);var c=n("nKUr"),r=n("q1tI"),a=n("z+X5"),s=n("vJKn"),i=n.n(s),o=n("rg98"),l=n("20a2"),d=n("9UV2"),j=n.n(d),u="https://js.stripe.com/v3",m=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,b="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",p=null,h=function(e){return null!==p?p:p=new Promise((function(t,n){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(b),window.Stripe)t(window.Stripe);else try{var c=function(){for(var e=document.querySelectorAll('script[src^="'.concat(u,'"]')),t=0;t<e.length;t++){var n=e[t];if(m.test(n.src))return n}return null}();c&&e?console.warn(b):c||(c=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(u).concat(t);var c=document.head||document.body;if(!c)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return c.appendChild(n),n}(e)),c.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),c.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(r){return void n(r)}else t(null)}))},O=function(e,t,n){if(null===e)return null;var c=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.12.1",startTime:t})}(c,n),c},x=Promise.resolve().then((function(){return h(null)})),f=!1;x.catch((function(e){f||console.warn(e)}));var y=n("x5i9"),g=n.n(y),v=n("YFqc"),w=n.n(v),N=n("IP2g"),_=n("uB96"),k=n("8tEE"),S=n("wHSu"),P=n("H+61"),I=n("UlJF"),T=n("cpVT"),E=function(){function e(){Object(P.a)(this,e)}return Object(I.a)(e,null,[{key:"CreatePaymentIntent",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+"payments/createpaymentintent",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"CreateCheckoutSession",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+"payments/createcheckoutsession",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Object(T.a)(E,"baseUrl","https://apigw.leasingoptions.co.uk/");var F=function(){var e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];f=!0;var c=Date.now();return x.then((function(e){return O(e,t,c)}))}("pk_live_51HKhOsLpzl3jlytjdltqecZKWk4B39CMQ1zzlfAejSgk1ls48NoZjPUSduQQEBsAk5RbUyY36rESMXFoFHsgTKV500Rc6L0tD8"),t=Object(r.useState)(!1),n=t[0],a=t[1],s=Object(r.useState)(!1),d=s[0],u=s[1],m=Object(r.useState)(null),b=m[0],p=m[1],h=Object(r.useState)(!1),y=h[0],v=h[1],P=Object(r.useState)(null),I=P[0],T=P[1],F=Object(r.useState)(!1),L=F[0],C=F[1],U=Object(r.useState)(null),R=U[0],q=U[1],M=Object(r.useState)(0),H=M[0],A=M[1],D=Object(r.useState)(null),B=D[0],z=D[1],J=Object(r.useState)(null),K=J[0],Y=J[1],X=Object(l.useRouter)();Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search),t="1"===e.get("success"),n="1"===e.get("cancelled");if(a(t),u(n),!n){var c={orderId:X.query.orderid||e.get("orderid"),type:X.query.type||e.get("type"),amount:parseFloat(X.query.amount||e.get("amount")),extension:"1"===(X.query.extension||e.get("extension")),hostOrigin:window.location.href};v(!0),E.CreateCheckoutSession(c).then((function(e){0===e.status.code&&(e.data.uniqueId?(T(e.data.paymentIsRequired),C(e.data.extension),q(e.data.vehicle),A(e.data.depositAmount),z(e.data.manualOrderId||e.data.orderName),Y(e.data.uniqueId)):(p("Payment initialization failed."),a(!1)),v(!1))}))}(t||n)&&T(!1)}),[]);var G=function(){var t=Object(o.a)(i.a.mark((function t(n){var c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return c=t.sent,t.next=5,c.redirectToCheckout({sessionId:K});case 5:(r=t.sent).error&&p("Payment Failed. ".concat(r.error.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("section",{className:"".concat(g.a["payment-header"]),children:Object(c.jsx)("div",{className:"container text-center",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-24 py-md-5",children:[Object(c.jsx)("div",{className:g.a.icon,children:Object(c.jsx)(N.a,{icon:S.n,className:"fa-lock"})}),Object(c.jsx)("h1",{children:"Secure Online Payment"})]})})})}),Object(c.jsxs)("section",{className:"container-fluid py-3",children:[!y&&Object(c.jsx)("div",{className:"container py-3 py-md-5",children:Object(c.jsxs)("div",{className:g.a["checkout-container"],children:[n&&Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-24 text-center",children:[Object(c.jsxs)("div",{className:"d-flex justify-content-center align-items-center ".concat(g.a.title),children:[Object(c.jsx)("div",{children:Object(c.jsx)(N.a,{icon:_.w})}),Object(c.jsx)("h2",{children:"Thank you for your order"})]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-14 col-24 ".concat(g.a["payment-form"]),children:[Object(c.jsxs)("p",{children:["Your payment reference is: ",Object(c.jsx)("strong",{children:B})]}),Object(c.jsx)(w.a,{passHref:!0,href:"/",children:Object(c.jsxs)("a",{className:"btn btn-primary btn-labeled btn-lg",children:[Object(c.jsx)("span",{className:"btn-label",children:Object(c.jsx)(N.a,{width:"17",height:"17",icon:S.b})}),Object(c.jsx)("span",{className:"btn-text",children:"Back to home"})]})})]})})]})}),d&&Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-24",children:Object(c.jsx)("div",{className:"alert alert-warning",role:"alert",children:Object(c.jsx)("strong",{children:"Your payment was cancelled"})})})}),!n&&!d&&Object(c.jsxs)(c.Fragment,{children:[!0===I&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-24 text-center",children:[Object(c.jsxs)("div",{className:"d-flex justify-content-center align-items-center ".concat(g.a.title),children:[Object(c.jsx)("div",{children:Object(c.jsx)(N.a,{icon:_.l})}),Object(c.jsx)("h2",{children:"Payment Checkout"})]}),Object(c.jsxs)("p",{children:["A payment of ",Object(c.jsx)("strong",{dangerouslySetInnerHTML:{__html:j.a.formatMoney(H,"&pound;")}}),"\xa0is required to enable us to ",L?"process your extension":"order the vehicle and progress your order"]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-14 col-24 ".concat(g.a["payment-form"]),children:[Object(c.jsx)("p",{children:Object(c.jsx)("strong",{children:R})}),Object(c.jsxs)("button",{disabled:n,id:"submit",type:"submit",className:"btn btn-primary btn-labeled btn-lg btn-block-sm",onClick:function(e){G(e)},children:[Object(c.jsx)("span",{className:"btn-label",children:Object(c.jsx)(N.a,{width:"17",height:"17",icon:S.n})}),Object(c.jsxs)("span",{className:"btn-text",children:["Pay ",Object(c.jsx)("strong",{dangerouslySetInnerHTML:{__html:j.a.formatMoney(H,"&pound;")}})," Now"]})]}),Object(c.jsx)("div",{className:g.a["payment-methods"],children:Object(c.jsxs)("div",{className:"d-flex justify-content-between ".concat(g.a.wrapper),children:[Object(c.jsx)("div",{children:Object(c.jsx)(N.a,{icon:k.b})}),Object(c.jsx)("div",{children:Object(c.jsx)(N.a,{icon:k.d})}),Object(c.jsx)("div",{children:Object(c.jsx)(N.a,{icon:k.c})})]})})]})})]})}),b&&Object(c.jsx)("div",{className:"row mt-3",children:Object(c.jsx)("div",{className:"col-24 col-lg-14",children:Object(c.jsx)("div",{className:"alert alert-danger",role:"alert",children:b})})})]}),!1===I&&Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-24 text-center",children:[Object(c.jsx)("h2",{children:"Secure Online payment - No payment required"}),Object(c.jsx)("p",{children:"Thanks for your order."})]})})]})]})}),y&&Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-24 text-center my-5",children:Object(c.jsx)("h3",{children:"Payment is being initialized. Please wait...."})})})]})]})},L=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(F,{})})};L.layout=a.a;t.default=L},esfc:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/onlinepayment",function(){return n("Or9R")}])},x5i9:function(e,t,n){e.exports={"payment-header":"checkout-form_payment-header__3iRPF","page-banner":"checkout-form_page-banner__3GfiI",icon:"checkout-form_icon__3VvHD","checkout-container":"checkout-form_checkout-container__26ljM",title:"checkout-form_title__1Ts-A","payment-form":"checkout-form_payment-form__3JIbB","payment-methods":"checkout-form_payment-methods__3ddy3",wrapper:"checkout-form_wrapper__2pElv","card-element-container":"checkout-form_card-element-container__1Djf3"}},"z+X5":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var c=n("nKUr"),r=n("q1tI"),a=n("g4pe"),s=n.n(a),i=n("20a2"),o=n("8xcb"),l=n("voCN"),d=n("+CZG"),j=n("jD8p"),u=n("PYSM"),m=n("EXpO"),b=n("/MKj"),p=n("acQV"),h=n("v878"),O=n("EMmP"),x=n("sZbk"),f=n("7jhi"),y=n("uDbZ"),g=Object(b.b)((function(e){return{isInternal:e.isInternal,trustPilotRating:e.trustPilotRating}}),(function(e){return{dispatchInternalCheck:function(t){e({type:"UPDATE_INTERNAL",internal:t})},updateTrustPilotRating:function(t){e({type:"UPDATE_TRUSTPILOT_RATING",data:t})}}}))((function(e){var t=e.isInternal,n=e.dispatchInternalCheck,a=e.metaData,b=e.breadcrumbs,g=e.children,v=e.className,w=e.trustPilotRating,N=e.updateTrustPilotRating;return function(e){var b=Object(i.useRouter)(),_=new Date;_.setFullYear(_.getFullYear()+1);var k=function(){var e=document.getElementById("liveChatLink"),t=document.getElementById("chatwrapper");Object(u.a)()?(null===t||void 0===t||t.classList.remove("d-none"),null===e||void 0===e||e.classList.add("d-none")):(null===t||void 0===t||t.classList.add("d-none"),null===e||void 0===e||e.classList.remove("d-none"))};Object(r.useEffect)((function(){P(),S(),i.Router.events.on("routeChangeComplete",(function(){P(),S()}))}),[]);var S=function(){null==w&&Object(y.c)().then((function(e){N(e.data)}))};function P(){null===t&&m.a.IsInternalPage().then((function(e){n(e.data)})).catch((function(e){console.log(e)}))}Object(r.useEffect)((function(){k();var e=setInterval(k,15e3);return function(){return clearInterval(e)}}),[]);e=Object(p.a)(b);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(s.a,{children:[a?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("title",{children:a.title}),Object(c.jsx)("meta",{name:"description",content:a.description}),Object(c.jsx)("meta",{name:"keywords",content:a.keywords}),Object(c.jsx)("meta",{property:"og:type",content:"website"}),Object(c.jsx)("meta",{property:"og:url",content:"https://www.leasingoptions.co.uk"+b.asPath}),Object(c.jsx)("meta",{property:"og:title",content:a.title}),Object(c.jsx)("meta",{property:"og:description",content:a.description}),Object(c.jsx)("meta",{property:"og:image",content:a.imageUrl?a.imageUrl:"https://imagecdn.leasingoptions.co.uk/fit-in/400x400/website/static/img-placeholder.jpg"}),Object(c.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),Object(c.jsx)("meta",{property:"twitter:url",content:"https://www.leasingoptions.co.uk"+b.asPath}),Object(c.jsx)("meta",{property:"twitter:title",content:a.title}),Object(c.jsx)("meta",{property:"twitter:description",content:a.description}),Object(c.jsx)("meta",{property:"twitter:image",content:a.imageUrl?a.imageUrl:"https://imagecdn.leasingoptions.co.uk/fit-in/400x400/website/static/img-placeholder.jpg"})]}):null,a&&a.canonicalUrl?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("link",{rel:"canonical",href:a.canonicalUrl})}):null,a&&a.ampHTML?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("link",{rel:"amphtml",href:a.ampHTML})}):null,a&&a.noIndex?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("meta",{name:"robots",content:"noindex,nofollow"})}):null,a&&a.author?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("meta",{name:"author",content:a.author})}):null,e&&e.length>0?Object(c.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:Object(d.c)(Object(d.a)(e))}}):null,Object(c.jsx)("script",{type:"application/javascript",dangerouslySetInnerHTML:{__html:"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PG5CHN');"}})]}),Object(c.jsx)(h.a,{}),Object(c.jsx)(o.a,{breadcrumbs:e}),Object(c.jsx)("main",{className:v,children:g}),Object(c.jsx)(O.a,{}),Object(c.jsx)(x.a,{}),Object(c.jsx)(l.a,{}),Object(c.jsx)(f.a,{}),Object(c.jsx)(j.a,{})]})}(b)}))}},[["esfc",0,1,4,6,8,5,11,2,3,7,9,10,12]]]);