(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{"/kJK":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("H+61"),o=n("UlJF"),r=n("cpVT"),a=n("xG9w"),s=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"getRelationshipDescription",value:function(e){var t=null;if(e)switch(e.toUpperCase()){case"OO":t="From the options below, a maximum of one may be selected. For example, you can only have one type of paintwork.";break;case"RO":t="The option you have chosen must be accompanied by at least one of the additional options in the group below.";break;case"RA":t="The option you have chosen must be accompanied by all of the additional options in the group below.";break;case"NW":t="The option you have chosen cannot be accompanied by any of the options in the group below. For example if wood inlay is chosen it cannot be accompanied by any cloth trim.";break;case"IN":t="Please note the options below are included (at no extra cost) with the option you have chosen which comes as a pack.";break;case"IO":t="The option you have chosen must be accompanied by one option from the group below. The additional option will be no extra cost."}return t||e}},{key:"getSelectedOptions",value:function(e,t){var n=[];return e&&e.length>0&&t&&t.length>0&&(n=a.a.filter(e,(function(e){return a.a.contains(t,e.id)}))),n}},{key:"getOptionsPrice",value:function(e,t){var n=0;if(e){var i=this;e.forEach((function(e){n+=i.getOptionPrice(e,t)}))}return n}},{key:"getOptionPrice",value:function(e,t){var n=0;if(e){var i=this._getOptionState(t,e.id);n=this._getOptionPrice(e,i)}return n}},{key:"getOptionsStates",value:function(e,t){var n=[];e&&t&&this.getRelationships(t,e).forEach((function(t){var i=t.primaryOptionIds,o=t.regularOptionIds;if("OO"===t.type||a.a.intersection(i,e).length===i.length)if("OO"==t.type)a.a.difference(o,e).forEach((function(e){var t=a.a.find(n,(function(t){return t.id===e}));t||(t={id:e,selectionRequiredBy:[],deselectionRequiredBy:[]},n.push(t)),t.deselectionRequiredBy=a.a.union(t.deselectionRequiredBy,[-1])}));else if("RA"==t.type||"IN"==t.type){var r=t.mirrorRelationshipIds&&t.mirrorRelationshipIds.length>0;o.forEach((function(e){var i=a.a.find(n,(function(t){return t.id===e}));i||(i={id:e,selectionRequiredBy:[],deselectionRequiredBy:[],mirrorIn:[]},n.push(i)),i.selectionRequiredBy=a.a.union(i.selectionRequiredBy,[t.id]),i.useZeroPrice=i.useZeroPrice||"IN"===t.type,r&&(i.mirrorIn=a.a.union(i.mirrorIn,[t.id],t.mirrorRelationshipIds))}))}}));return n}},{key:"cloneOptionsStates",value:function(e){return a.a.map(e,(function(e){return{id:e.id,selectionRequiredBy:a.a.clone(e.selectionRequiredBy),deselectionRequiredBy:a.a.clone(e.deselectionRequiredBy),mirrorIn:a.a.clone(e.mirrorIn),useZeroPrice:e.useZeroPrice}}))}},{key:"getOptionsWithoutRelationships",value:function(e,t){var n=[];return t&&t.length>0&&(n=a.a.filter(e||[],(function(e){return e&&a.a.contains(t,e.id)&&(!e.linkedRelationshipIds||0===e.linkedRelationshipIds.length)}))),n}},{key:"getRelationships",value:function(e,t){var n=[],i=this.allowedRelationshipTypes;return t&&t.length>0&&(n=a.a.filter(e||[],(function(e){return e&&a.a.contains(i,e.type)&&(a.a.intersection(t,e.primaryOptionIds).length>0||a.a.intersection(t,e.regularOptionIds).length>0)}))),n}},{key:"getConfirmRelationship",value:function(e,t,n,i,o){var r=null;if(e&&e.length>0){var s=this._getRelationship(e,n);if(s){r={id:s.id,type:s.type,options:[]};var c=this._getRelationshipOptions(s,t,!0,i,o),l=this._getRelationshipOptions(s,t,!1,i,o);r.options=a.a.union(r.options,c),r.options=a.a.union(r.options,l)}}return r}},{key:"splitOptionIdsByAction",value:function(e){var t={selectIds:[],deselectIds:[]};return e&&e.length>0&&(t.selectIds=a.a.pluck(a.a.filter(e,(function(e){return e.selectionRequiredBy.length>0})),"id"),t.deselectIds=a.a.pluck(a.a.filter(e,(function(e){return e.deselectionRequiredBy.length>0})),"id")),t}},{key:"getOptionAction",value:function(e,t){var n=null;if(e&&!e.isDisabled){var i=e.id,o=!a.a.contains(t||[],i);n={id:i,selectionRequiredBy:o?[0]:[],deselectionRequiredBy:o?[]:[0]}}return n}},{key:"optionExists",value:function(e,t){return!!this._getOption(t,e)}},{key:"_getRelationshipOptions",value:function(e,t,n,i,o){var r=[];if(null!==e&&null!=t&&t.length>0){var s=this;((n?e.primaryOptionIds:e.regularOptionIds)||[]).forEach((function(e){var c=s._getOption(t,e);if(c){var l=s._getOptionState(o,c.id),u={id:c.id,name:c.name,isPrimary:n,price:s._getOptionPrice(c,l),isSelected:a.a.contains(i||[],c.id),isDisabled:!1};r.push(u)}})),r=a.a.sortBy(r,"name")}return r}},{key:"_getOptionPrice",value:function(e,t){var n=0;return e&&(n=t&&t.useZeroPrice?0:e.price),n}},{key:"_getOptionState",value:function(e,t){return a.a.find(e,(function(e){return e&&e.id===t}))}},{key:"_getOption",value:function(e,t){return a.a.find(e,(function(e){return e&&e.id===t}))}},{key:"_getRelationship",value:function(e,t){return a.a.find(e,(function(e){return e&&e.id===t}))}}]),e}();Object(r.a)(s,"allowedRelationshipTypes",["OO","RO","RA","NW","IN","IO"])},CTce:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("H+61"),o=n("UlJF"),r=n("cpVT"),a=n("xG9w"),s=n("/kJK"),c=function(){function e(){Object(i.a)(this,e),Object(r.a)(this,"_vehicleOptions",[]),Object(r.a)(this,"_vehicleOptionRelationships",[]),Object(r.a)(this,"_selectedOptionIds",[]),Object(r.a)(this,"_confirmRelationshipIds",[]),Object(r.a)(this,"_optionsStates",[])}return Object(o.a)(e,[{key:"_clearMangerState",value:function(){this._confirmRelationshipIds=[],this._selectedOptionIds=[],this._optionsStates=[]}},{key:"init",value:function(e,t){this._vehicleOptions=e||[],this._vehicleOptionRelationships=t||[],this._clearMangerState()}},{key:"processOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._clearMangerState(),this._selectedOptionIds=a.a.clone(n||[]),this._confirmRelationshipIds=a.a.clone(t||[]),this._optionsStates=s.a.cloneOptionsStates(i||[]);var o=null;if(e&&e.length>0){var r=a.a.clone(this._selectedOptionIds),c=s.a.splitOptionIdsByAction(e);if(a.a.intersection(c.selectIds,c.deselectIds).length>0)return alert("Action is not allowed."),null;var l=a.a.pluck(s.a.getOptionsWithoutRelationships(this._vehicleOptions,c.selectIds),"id"),u=a.a.pluck(s.a.getOptionsWithoutRelationships(this._vehicleOptions,c.deselectIds),"id"),d=a.a.union(l,u);d.length>0&&(r=a.a.union(r,l),r=a.a.difference(r,u),this._selectedOptionIds=a.a.clone(r),o=a.a.clone(r));var p=a.a.filter(e,(function(e){return!a.a.contains(d,e.id)}));if(null!=p&&p.length>0){var f=this._getConfirmDetails(p,r,this._confirmRelationshipIds,this._optionsStates);if(f.hasConflicts)return alert("Action is not allowed."),null;var h=a.a.filter(p,(function(e){return!a.a.some(f.confirmRelationships,(function(t){return a.a.contains(t.optionIds,e.id)}))}));h.length>0&&(o=a.a.clone(this._selectedOptionIds),c=s.a.splitOptionIdsByAction(h),o=a.a.union(o,c.selectIds),o=a.a.difference(o,c.deselectIds)),this._selectedOptionIds=f.selectedOptionIds,this._confirmRelationshipIds=a.a.pluck(f.confirmRelationships,"id"),this._optionsStates=f.optionsStates}}var g={selectedOptionIds:a.a.clone(this._selectedOptionIds),confirmRelationshipIds:a.a.clone(this._confirmRelationshipIds),optionsStates:a.a.clone(this._optionsStates),silentlySelectedOptionIds:o};return g}},{key:"_getConfirmDetails",value:function(e,t,n,i){var o=this,r={hasConflicts:!1,selectedOptionIds:[],confirmRelationships:[],optionsStates:[]};return e&&e.length>0&&function(){for(var c=a.a.clone(t||[]),l=a.a.clone(n||[]),u=s.a.cloneOptionsStates(i||[]),d=a.a.clone(e),p=o._getConfirmDetailsIteration(d,c,u);p;){if(p.hasConflicts){r.hasConflicts=!0;break}d.forEach((function(e){var t=a.a.find(u,(function(t){return t.id===e.id}));t||(t={id:e.id,selectionRequiredBy:[],deselectionRequiredBy:[],mirrorIn:[]},u.push(t)),t.selectionRequiredBy=a.a.union(t.selectionRequiredBy,a.a.difference(e.selectionRequiredBy,[-1])),t.deselectionRequiredBy=a.a.union(t.deselectionRequiredBy,a.a.difference(e.deselectionRequiredBy,[-1])),t.mirrorIn=a.a.union(t.mirrorIn,e.mirrorIn)})),p.recallRestrictionRelationshipIds&&u.forEach((function(e){e.selectionRequiredBy=a.a.difference(e.selectionRequiredBy,p.recallRestrictionRelationshipIds),e.deselectionRequiredBy=a.a.difference(e.deselectionRequiredBy,p.recallRestrictionRelationshipIds)}));var f=a.a.pluck(a.a.filter(d,(function(e){return e.selectionRequiredBy.length>0})),"id"),h=a.a.pluck(a.a.filter(d,(function(e){return e.deselectionRequiredBy.length>0})),"id");c=a.a.difference(a.a.union(c,f),h),l=a.a.union(l,p.confirmRelationshipIds),d=p.nextIterationOptions,p=o._getConfirmDetailsIteration(d,c,u)}if(!r.hasConflicts){var g=o,y=u,m=c,O=[];l.forEach((function(e){var t=a.a.find(g._vehicleOptionRelationships,(function(t){return t&&t.id===e}));if(t){var n=[];n=a.a.union(n,t.primaryOptionIds),n=a.a.union(n,t.regularOptionIds),(n=a.a.filter(n,(function(e){return s.a.optionExists(e,g._vehicleOptions)}))).length>0&&O.push({id:e,optionIds:n})}}));var v=a.a.filter(O,(function(e){return 0==a.a.intersection(e.optionIds,m).length}));O.length>v.length&&(O=a.a.filter(O,(function(e){return a.a.intersection(e.optionIds,m).length>0})));var I=[],b=a.a.filter(o._vehicleOptionRelationships,(function(e){return e&&a.a.contains(s.a.allowedRelationshipTypes,e.type)&&"IN"===e.type&&a.a.intersection(m,e.primaryOptionIds).length===e.primaryOptionIds.length}));b&&b.length>0&&b.forEach((function(e){I=a.a.union(I,e.regularOptionIds)})),y.forEach((function(e){e.useZeroPrice=a.a.contains(I,e.id),e.selectionRequiredBy=a.a.without(e.selectionRequiredBy,0),e.deselectionRequiredBy=a.a.without(e.deselectionRequiredBy,0)})),r.optionsStates=y,r.selectedOptionIds=m,r.confirmRelationships=O}}(),r}},{key:"_getConfirmDetailsIteration",value:function(e,t,n){var i=this;if(e&&e.length>0){var o=function(){var o=!1,r=[],c=[],l=[],u=s.a.splitOptionIdsByAction(e);if(!(o=a.a.intersection(u.selectIds,u.deselectIds).length>0)){var d=a.a.difference(u.selectIds,t),p=a.a.intersection(u.deselectIds,t),f=a.a.difference(a.a.union(t,d),p),h=s.a.getRelationships(i._vehicleOptionRelationships,a.a.union(d,p));if(h&&h.length>0)for(var g=function(e){var i=h[e],s=i.primaryOptionIds,u=i.regularOptionIds,g=a.a.union(s,u),y=a.a.intersection(g,d),m=a.a.intersection(g,p);if(y.length>0&&m.length>0);else if(y.length>0){if(!("OO"===i.type||a.a.intersection(s,f).length===s.length))return"continue";for(var O=function(e){var t=y[0],r=a.a.find(n,(function(e){return e.id===t}));if(r&&a.a.difference(r.deselectionRequiredBy,[i.id,-1]).length>0)return o=!0,"break"},v=0;v<y.length;v++){if("break"===O())break}if(o)return"break";if("OO"==i.type){if(y.length>1)return o=!0,"break";a.a.find(n,(function(e){return e.id===y[0]}));a.a.difference(u,y).forEach((function(e){var t=a.a.find(c,(function(t){return t.id===e}));t||(t={id:e,selectionRequiredBy:[],deselectionRequiredBy:[]},c.push(t)),t.deselectionRequiredBy=a.a.union(t.deselectionRequiredBy,[-1])}))}else if("RA"==i.type||"IN"==i.type){var I=i.mirrorRelationshipIds&&i.mirrorRelationshipIds.length>0;u.forEach((function(e){var t=a.a.find(c,(function(t){return t.id===e}));t||(t={id:e,selectionRequiredBy:[],deselectionRequiredBy:[],mirrorIn:[]},c.push(t)),t.selectionRequiredBy=a.a.union(t.selectionRequiredBy,[i.id]),I&&(t.mirrorIn=a.a.union(t.mirrorIn,[i.id],i.mirrorRelationshipIds))}))}r=a.a.union(r,[i.id])}else if(m.length>0){for(var b=function(e){var t=m[e],i=a.a.find(n,(function(e){return e.id===t}));if(i&&a.a.difference(i.selectionRequiredBy,i.mirrorIn).length>0)return o=!0,"break"},R=0;R<m.length;R++){if("break"===b(R))break}if(o)return"break";if("OO"==i.type)0==a.a.intersection(f,g).length&&l.push(i.id),r=a.a.union(r,[i.id]);else if("RA"==i.type||"IN"==i.type){i.mirrorRelationshipIds&&i.mirrorRelationshipIds.length>0&&a.a.difference(g,m).forEach((function(e){var t=a.a.find(c,(function(t){return t.id===e}));t||(t={id:e,selectionRequiredBy:[],deselectionRequiredBy:[],mirrorIn:[]},c.push(t)),t.deselectionRequiredBy=a.a.union(t.deselectionRequiredBy,[0])})),a.a.intersection(s,f).length!==s.length&&l.push(i.id),a.a.intersection(s,t).length===s.length&&(r=a.a.union(r,[i.id]))}}},y=0;y<h.length;y++){var m=g(y);if("continue"!==m&&"break"===m)break}}return{v:{hasConflicts:o,confirmRelationshipIds:o?[]:r,nextIterationOptions:o?[]:c,recallRestrictionRelationshipIds:o?[]:l}}}();if("object"===typeof o)return o.v}return null}}]),e}()},Ezyo:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("l7ai"),o=function(e,t,n,o){var r=null;return t&&t>0&&(r=(t=e===i.a.Personal?1.2*t:t)/(12*n-1+o)),r||0}},FK8X:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("H+61"),o=n("UlJF"),r=n("G6YE"),a=n("Kj82"),s=n("mmV+"),c=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"getTriggerMaxSize",value:function(e){switch(e){case r.a.History:return 4;default:return null}}},{key:"getStorageMaxSize",value:function(e){switch(e){case r.a.Garage:return 4;case r.a.History:return 20;default:return null}}},{key:"getStorageName",value:function(e){switch(e){case r.a.Garage:return"garage";case r.a.History:return"history";default:return null}}},{key:"getItems",value:function(e){var t=null,n=this.getStorageName(e);Object(a.c)(n)||(t=JSON.parse(localStorage.getItem(n))),t||(t=[]);var i=this.getStorageMaxSize(e);if(t.length<i)for(var o=i-t.length,r=0;r<o;r++)t.push(null);return t}},{key:"getItem",value:function(e,t){return this.getItems(e).find((function(e){return e&&e.id===t}))}},{key:"addItem",value:function(e,t,n){var i=!1,o=this.getItems(e),r=this.getStorageMaxSize(e),a=!Object(s.u)(n);return(!a&&o.length<r||a&&n>=0&&n<r)&&(a?o[n]=t:o.push(t),i=this.persistItems(e,o)),i}},{key:"updateItem",value:function(e,t){var n=!1,i=this.getItems(e),o=i.find((function(e){return e&&e.id===t.id&&e.index===t.index}));return o&&(i[i.indexOf(o)]=t,n=this.persistItems(e,i)),n}},{key:"removeItem",value:function(e,t){var n=!1,i=this.getItems(e),o=i.find((function(e){return e&&e.id===t}));return o&&(i[i.indexOf(o)]=null,n=this.persistItems(e,i)),n}},{key:"clear",value:function(e){var t=this.getStorageName(e);return!Object(a.c)(t)&&(localStorage.removeItem(t),!0)}},{key:"persistItems",value:function(e,t){var n=this.getStorageName(e);return!Object(a.c)(n)&&(localStorage.setItem(n,JSON.stringify(t)),!0)}}]),e}()},G6YE:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.None=0]="None",e[e.Garage=1]="Garage",e[e.History=2]="History"}(i||(i={}))},TovF:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("nKUr"),o=(n("q1tI"),n("dDCJ")),r=n("9vsu"),a=function(e){var t=e.id,n=e.trigger,a=e.title,s=e.body;return Object(i.jsx)(o.a,{trigger:"click",placement:"top",overlay:Object(i.jsxs)(r.a,{id:"popover-positioned-".concat(t),children:[a?Object(i.jsx)(r.a.Title,{children:a}):"",Object(i.jsx)(r.a.Content,{children:s})]}),children:n},t)}},"Wj+e":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("cpVT"),o=n("nKUr"),r=n("dhJC"),a=n("q1tI"),s=n("zM5D"),c=n("mmV+"),l=n("oszm"),u=n("/kJK"),d=n("CTce"),p=function(e){var t=e.options,n=e.relationships,i=e.leasingDealType,r=e.state,s=e.settings,p=Object(c.h)(i),f=Object(a.useState)([]),h=f[0],g=f[1];if(Object(a.useEffect)((function(){var e=[];r.confirmRelationshipIds&&r.confirmRelationshipIds.length>0&&r.confirmRelationshipIds.forEach((function(i){var o=u.a.getConfirmRelationship(n,t,i,r.selectedOptionIds,r.optionsStates);o&&e.push(o)})),g(e)}),[r]),h.length>0){var y=u.a.getOptionsPrice(u.a.getSelectedOptions(t,r.selectedOptionIds),r.optionsStates);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"options-box",children:h.map((function(e){return Object(o.jsxs)("div",{className:"rule-item",children:[Object(o.jsx)("p",{className:"my-3",children:Object(o.jsx)("strong",{className:"text-center",children:u.a.getRelationshipDescription(e.type)})}),Object(o.jsx)("div",{children:e.options.map((function(e){return Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-16 col-md-20 d-flex flex-row flex-wrap align-items-center my-2",children:[e.isPrimary?Object(o.jsx)("img",{className:"lazyload mr-2",height:"13",alt:"Primary icon","data-src":"".concat("https://imagecdn.leasingoptions.co.uk","/website/icon-primary.png")}):""," ",e.name]}),Object(o.jsxs)("div",{className:"col-8 col-md-4 d-flex justify-content-end align-items-center",children:[Object(l.a)(e.price)," ",Object(o.jsx)("span",{className:"vehicle-option__indicator ".concat(e.isSelected?"is-active":""," ").concat(e.isDisabled?"is-disabled":""),onClick:function(){return function(e){var i=u.a.getOptionAction(e,r.selectedOptionIds);if(i){var o=[i],a=new d.a;a.init(t,n);var c=a.processOptions(o,r.confirmRelationshipIds,r.selectedOptionIds,r.optionsStates);c&&s.onStateChanged&&s.onStateChanged({confirmRelationshipIds:c.confirmRelationshipIds,selectedOptionIds:c.selectedOptionIds,optionsStates:c.optionsStates})}}(e)}})]})]},"option-".concat(e.id))}))})]},"rule-".concat(e.id))}))}),Object(o.jsx)("div",{className:"options-pricing",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-16 col-md-19 d-flex flex-row flex-wrap my-2",children:"Total Extras Cost Per Month"}),Object(o.jsxs)("div",{className:"col-8 col-md-5 d-flex justify-content-end align-items-center",children:[Object(l.a)(y)," ",p]})]})})]})}return null};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.title,n=e.data,i=e.options,c=e.initialState,l=e.settings,u=e.onRequestClose,d=Object(r.a)(e,["title","data","options","initialState","settings","onRequestClose"]),f=Object(a.useState)(c),g=f[0],y=f[1],m=function(){l.onCancel&&l.onCancel(),u()};return Object(o.jsxs)(s.a,h(h({onHide:m,centered:!0,scrollable:!0},d),{},{children:[Object(o.jsx)(s.a.Header,{className:"options-title d-flex flex-nowrap justify-content-center align-items-center",closeButton:!0,children:Object(o.jsx)(s.a.Title,{className:"mb-0",children:t})}),Object(o.jsx)(s.a.Body,{children:Object(o.jsx)(p,{options:n.extraOptions,relationships:n.extraOptionsRelationships,leasingDealType:i.leasingDealType,state:g,settings:{onStateChanged:function(e){y(e)}}})}),Object(o.jsxs)(s.a.Footer,{children:[Object(o.jsx)("button",{className:"btn btn-danger btn-lg d-flex justify-content-center align-items-center flex-grow-1",onClick:m,children:"Cancel"}),Object(o.jsx)("button",{className:"btn btn-primary btn-lg d-flex justify-content-center align-items-center flex-grow-1",onClick:function(){l.onApply&&l.onApply(g),u()},children:"Apply"})]})]}))}},ZrQC:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("H+61"),o=n("UlJF"),r=n("Kj82"),a=n("xVrE"),s=n("PG61"),c=n("wbKs"),l=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"getVehicleCustomOptions",value:function(e,t){var n={},i=!1,o=e.url.split("?"),s=o[1]?Object(a.c)(o[1].split("&")):null;if(s){var l=NaN;l=parseInt(s.term),isNaN(l)||(n.term=l),l=parseInt(s.initialrentals),isNaN(l)||(n.initialRentalMonths=l),l=parseInt(s.mileage),isNaN(l)||(n.mileage=l),i=!Object(r.c)(s.isdefault)&&"1"===s.isdefault}e.pricingType&&2===e.pricingType?n.maintenance=!0:e.maintenanceAllowed||(n.maintenance=!1);var d=u.getOrAddVehicleCustomOptions(e.vehicleRef,e.leasingDealType,i,n);if(d.useCheapestTerm){var p={pricingType:e.pricingType||void 0,postcode:e.postcode||void 0};Object(c.G)(d.vehicleRef,d.leasingDealType,d.maintenance,d.mileage,d.initialRentalMonths,p).then((function(e){var n=null;e.isSucceed&&e.data&&(n=e.data),d.useCheapestTerm=!1,n&&n>0&&(d.term=n),u.addOrUpdateVehicleCustomOptions(d),t(d)}))}else t(d)}},{key:"storeVehicleCustomOptions",value:function(e){e&&(e.useCheapestTerm=!1,u.addOrUpdateVehicleCustomOptions(e))}}]),e}(),u=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"getOrAddVehicleCustomOptions",value:function(e,t,n,i){var o=this.getVehicleCustomOptions(e,t);return o&&!n||(o={vehicleRef:e,leasingDealType:t,term:s.a.DefaultTerm,mileage:s.a.GetDealTypeDefaultMileage(t),maintenance:s.a.DefaultMaintenance,initialRentalMonths:s.a.DefaultInitialRentals,options:[],salesCode:0,ageCategory:null,useCheapestTerm:!0}),Object.assign(o,i||{}),this.addOrUpdateVehicleCustomOptions(o),o}},{key:"addOrUpdateVehicleCustomOptions",value:function(e){if(null!==e){var t=this.getOptionsItemKey(e.vehicleRef,e.leasingDealType);localStorage.setItem(t,JSON.stringify(e))}}},{key:"getVehicleCustomOptions",value:function(e,t){var n=null;if(e&&t){var i=this.getOptionsItemKey(e,t),o=localStorage.getItem(i);n=JSON.parse(o)}return n}},{key:"getOptionsItemKey",value:function(e,t){return("options_"+e+"_"+t).toLowerCase()}}]),e}()},jmJx:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("H+61"),o=n("UlJF"),r=n("cpVT"),a=n("xG9w"),s=n("G6YE"),c=n("FK8X"),l=n("mmV+"),u=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"addItem",value:function(e,t){if(t&&e>=0&&e<this.storageMaxSize){var n={id:Object(l.p)(),index:e,vehicle:t};if(c.a.addItem(this.storageType,n,e))return n}return null}},{key:"updateItem",value:function(e,t,n){if(t){var i=c.a.getItem(this.storageType,e);if(i&&(n||!a.a.isEqual(i.vehicle,t))&&(i.vehicle=t,c.a.updateItem(this.storageType,i)))return i}return null}},{key:"addOrUpdateItem",value:function(e){if(e){var t=this.getItems(!1),n=t.find((function(t){return t&&t.vehicle&&t.vehicle.vehicleRef===e.vehicleRef}));if(n)return this.updateItem(n.id,e,!0);var i=t.indexOf(null);if(!Object(l.u)(i)&&i>=0&&i<this.storageMaxSize)return this.addItem(i,e)}return null}},{key:"cloneItem",value:function(e){var t=this.getItems(!1),n=t.find((function(t){return t&&t.id===e}));if(n){var i=t.indexOf(null);if(!Object(l.u)(i)&&i>=0&&i<this.storageMaxSize){var o={id:Object(l.p)(),index:i,vehicle:n.vehicle};if(c.a.addItem(this.storageType,o,i))return o}}return null}},{key:"removeItem",value:function(e){return c.a.removeItem(this.storageType,e)}},{key:"getItems",value:function(e){var t=c.a.getItems(this.storageType);return t&&t.length>0&&e&&(t=t.filter((function(e){return e}))),t}},{key:"clear",value:function(){c.a.clear(this.storageType)}},{key:"countItems",value:function(){return this.getItems(!0).length}},{key:"isFull",value:function(){return!(this.countItems()<this.storageMaxSize)}}]),e}();Object(r.a)(u,"storageType",s.a.Garage),Object(r.a)(u,"storageMaxSize",c.a.getStorageMaxSize(s.a.Garage)||0)}}]);