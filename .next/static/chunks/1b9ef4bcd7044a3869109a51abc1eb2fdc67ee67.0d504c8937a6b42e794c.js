(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{AZyX:function(e,t,a){e.exports={px:"px_px__S6VLw","your-registration":"px_your-registration__1aUOI","is-invalid":"px_is-invalid__ClPb3",required:"px_required__3eSvu","valuation-result":"px_valuation-result__1qgi_"}},p9cI:function(e,t,a){"use strict";var c=a("cpVT"),n=a("nKUr"),l=a("dhJC"),i=a("q1tI"),r=a.n(i),s=a("/MKj"),o=a("9UV2"),d=a.n(o),u=a("zM5D"),j=a("MHX4"),b=a("AZyX"),m=a.n(b),f=a("DQXc"),p=a("7Sq+"),h=a("vJKn"),O=a.n(h),v=a("rg98"),x=a("H+61"),g=a("UlJF"),N=a("uDbZ"),y=function(){function e(){Object(x.a)(this,e)}return Object(g.a)(e,null,[{key:"GetValuation",value:function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(N.d)(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),w=a("2inZ"),q=a("Ezaw"),k=a("+Css"),S=a("7LId"),C=a("VIvw"),T=a("iHvq");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,c=Object(T.a)(e);if(t){var n=Object(T.a)(this).constructor;a=Reflect.construct(c,arguments,n)}else a=c.apply(this,arguments);return Object(C.a)(this,a)}}var I=function(e){Object(S.a)(a,e);var t=_(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return e=t.call.apply(t,[this].concat(l)),Object(c.a)(Object(k.a)(e),"valuationCap",void 0),Object(c.a)(Object(k.a)(e),"valuationId",void 0),Object(c.a)(Object(k.a)(e),"valuationValue",void 0),Object(c.a)(Object(k.a)(e),"vrm",void 0),Object(c.a)(Object(k.a)(e),"make",void 0),Object(c.a)(Object(k.a)(e),"model",void 0),Object(c.a)(Object(k.a)(e),"mileage",void 0),Object(c.a)(Object(k.a)(e),"postCode",void 0),Object(c.a)(Object(k.a)(e),"salesPersonId",void 0),e}return a}(a("9ggA").a),P=a("gt28"),R=a("btDt"),E=a("a2hv"),M=a("SeHH"),V=a("8ua7"),L=a("IP2g"),D=a("uB96"),F=a("SUUS"),H=a("zjkP"),Y=a("20a2"),U=a("wbKs");function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a=Object(s.b)((function(e){return{carManufacturerList:e.carManufacturerList}}))((function(e){var t,a,c,s=e.isInternal,o=e.onRequestClose,b=e.registration,h=void 0===b?"":b,O=e.carManufacturerList,v=Object(l.a)(e,["isInternal","onRequestClose","registration","carManufacturerList"]),x=Object(i.useState)(!1),g=x[0],k=x[1],S=Object(i.useState)(!1),C=S[0],T=S[1],_=Object(i.useState)(null),A=_[0],B=_[1],G=Object(Y.useRouter)(),K=Object(i.useState)([]),X=K[0],Z=K[1],z=Object(i.useState)(null),Q=z[0],W=z[1],$=Object(i.useState)([]),ee=$[0],te=$[1],ae=Object(i.useState)(null),ce=ae[0],ne=ae[1],le=Object(i.useContext)(E.a),ie=Object(j.c)(),re=ie.register,se=ie.handleSubmit,oe=ie.errors;Object(i.useEffect)((function(){Object(N.b)().then((function(e){te(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(i.useEffect)((function(){Q?Object(U.p)(q.a.Car,Q).then((function(e){Z(e.data)})):Z([])}),[Q]);var de=function(e){if(k(!1),!g&&!C){k(!0);var t={vrm:e.vrm,mileage:e.mileage,fullName:e.fullName,telephone:e.telephone,email:e.email,postCode:e.postCode};new Promise((function(a){y.GetValuation(t).then((function(t){var c;if(null!==t&&void 0!==t&&null!==(c=t.data)&&void 0!==c&&c.id){ne(t.data);var n=null;!s&&void 0!=e.contactEmail&&e.allowedCommunicationTypes&&(n=e.allowedCommunicationTypes);var l=new I;l.vrm=e.vrm,l.mileage=e.mileage,l.fullName=e.fullName,l.telephone=e.telephone,l.email=e.email,l.postCode=e.postCode,l.allowedCommunicationTypes=n,l.valuationCap=t.data.cap,l.valuationId=t.data.id,l.valuationValue=t.data.value,l.make=e.make.replace("-"," "),l.model=e.model.replace("-"," "),l.salesPersonId=s?e.salesPersonId:null,l.gaClientId=Object(R.a)(),p.a.SubmitValuationEnquiry(l).then((function(t){if(t.data){if(!s){var c=new Date;c.setFullYear(c.getFullYear()+1),e.privacyConfirmed&&Object(f.b)(c),n&&w.a.SetToSeenMarketingForm(e.email,c)}a(!0)}else a(!1)}))}else ne(null),a(!1)}))})).then((function(e){G.push(Object(H.r)(!1,"valuation"))})).catch((function(e){console.log(e)})).finally((function(){k(!1)}))}};return Object(n.jsx)(r.a.Fragment,{children:Object(n.jsxs)(u.a,J(J({onHide:o,centered:!0},v),{},{children:[Object(n.jsx)(u.a.Header,{className:"d-flex flex-nowrap justify-content-center align-items-center",closeButton:!0,children:Object(n.jsx)(u.a.Title,{className:"text-left mb-0",children:null==ce?"Value Your Part Exchange":"Your Valuation Is:"})}),Object(n.jsx)(u.a.Body,{className:"".concat(m.a.px),children:Object(n.jsx)(j.b,J(J({},ie),{},{children:Object(n.jsxs)("form",{className:"px-md-3",onSubmit:se(de),children:[null==ce&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{className:"mb-4",children:["We and our partners will give you a fair value for your part-exchange.",Object(n.jsx)("br",{}),"You can even have it collected for FREE!"]}),Object(n.jsx)("p",{children:"Simply enter the number plate of the car you'd like a valuation for below."}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsx)("div",{id:"yourReg",children:Object(n.jsx)("input",{className:"".concat(m.a["your-registration"]," ").concat(oe.vrm?m.a["is-invalid"]:""),type:"text",placeholder:"ENTER YOUR REG",defaultValue:h,maxLength:10,name:"vrm",ref:re({required:!0})})}),oe.vrm&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:"This field is required"})]}),Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsx)("input",{type:"text",className:"form-control ".concat(oe.mileage?"is-invalid":""),placeholder:"Enter Your Current Mileage (required)",maxLength:10,name:"mileage",ref:re({required:{value:!0,message:"This field is required"},pattern:{value:/^\d+$/,message:"A valid numeric value is expected"}})}),oe.mileage&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:null===(t=oe.mileage)||void 0===t?void 0:t.message})]})]}),Object(n.jsx)("h3",{children:"I'm interested in leasing:"}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsxs)("label",{children:["Make ",Object(n.jsx)("span",{className:m.a.required,children:"(Required)"})]}),Object(n.jsxs)("select",{className:"form-control ".concat(oe.make?"is-invalid":""),onChange:function(e){return function(e){W(e.target.value)}(e)},name:"make",ref:re({required:!0}),children:[Object(n.jsx)("option",{value:"",children:"- Select Make -"}),null===O||void 0===O?void 0:O.map((function(e){return Object(n.jsx)("option",{value:e.id,children:e.text},e.id)}))]}),oe.make&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:"This field is required"})]}),Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsxs)("label",{children:["Model ",Object(n.jsx)("span",{className:m.a.required,children:"(Required)"})]}),Object(n.jsxs)("select",{className:"form-control ".concat(oe.model?"is-invalid":""),name:"model",ref:re({required:!0}),children:[Object(n.jsx)("option",{value:"",children:"- Select Model -"}),null===X||void 0===X?void 0:X.map((function(e){return Object(n.jsx)("option",{value:e.id,children:e.text},e.id)}))]}),oe.model&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:"This field is required"})]})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsxs)("label",{children:["Full Name ",Object(n.jsx)("span",{className:m.a.required,children:"(Required)"})]}),Object(n.jsx)("input",{type:"text",className:"form-control",placeholder:"Full Name",maxLength:100,name:"fullName",ref:re({required:!0})}),oe.fullName&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:"This field is required"})]}),Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsxs)("label",{children:["Email ",Object(n.jsx)("span",{className:m.a.required,children:"(Required)"})]}),Object(n.jsx)("input",{type:"text",className:"form-control ".concat(oe.email?"is-invalid":""),placeholder:"Email",maxLength:70,name:"email",onBlur:function(e){s||(e.target.value&&Object(P.a)(e.target.value)?B(e.target.value):B(null))},ref:re({required:"This field is required",validate:function(e){return!0===Object(P.a)(e)||"Invalid email address"}})}),oe.email&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:null===(a=oe.email)||void 0===a?void 0:a.message})]})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsxs)("label",{children:["Telephone ",Object(n.jsx)("span",{className:m.a.required,children:"(Required)"})]}),Object(n.jsx)("input",{type:"tel",className:"form-control ".concat(oe.telephone?"is-invalid":""),placeholder:"Telephone",maxLength:50,name:"telephone",ref:re({required:"This field is required",validate:function(e){return!0===Object(P.d)(e)||"Invalid phone number"}})}),oe.telephone&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:null===(c=oe.telephone)||void 0===c?void 0:c.message})]}),Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsxs)("label",{children:["Post Code ",Object(n.jsx)("span",{className:m.a.required,children:"(Required)"})]}),Object(n.jsx)("input",{type:"text",className:"form-control ".concat(oe.postCode?"is-invalid":""),placeholder:"Post Code",maxLength:10,name:"postCode",ref:re({required:!0})}),oe.postCode&&Object(n.jsx)("span",{className:"invalid-feedback d-block",children:"This field is required"})]})]}),s&&Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-24 col-lg-12 form-group",children:[Object(n.jsx)("label",{children:"Salesperson "}),Object(n.jsxs)("select",{className:"form-control",name:"salesPersonId",ref:re(),children:[Object(n.jsx)("option",{value:"",children:"- Select Salesperson -"}),null===ee||void 0===ee?void 0:ee.map((function(e){return Object(n.jsx)("option",{value:e.id,children:e.fullName},e.id)}))]})]})}),s?null:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-24",children:[Object(n.jsx)(M.a,{emailAddress:A,settings:{onVerificationStart:function(){T(!0)},onVerificationComplete:function(){T(!1)}}}),Object(n.jsx)(V.a,{})]})})]}),null!=ce&&Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-24",children:[Object(n.jsxs)("div",{className:m.a["valuation-result"],children:[Object(n.jsx)("i",{className:"fal fa-gbp"}),Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:d.a.formatMoney(ce.value)}})]}),Object(n.jsx)("p",{children:"This is an approximate value dependant on the condition, exact mileage, service history and other factors. To take this further or accept this please click on the link below."}),Object(n.jsx)("p",{children:"The amount you get may be more or less dependent on the factors mentioned above. Have you been offered more elsewhere? Tell our team!"})]})})]})}))}),Object(n.jsx)(u.a.Footer,{children:Object(n.jsx)("div",{className:"w-100 row",children:Object(n.jsxs)("div",{className:"col-24 d-flex justify-content-center justify-content-md-end",children:[null==ce&&Object(n.jsx)("button",{type:"button",className:"btn btn-primary btn-lg",onClick:se(de),children:g?Object(n.jsx)(L.a,{width:"16",height:"16",icon:D.x,className:"fa-spin"}):"Get Valuation"}),null!=ce&&Object(n.jsx)("button",{type:"button",className:"btn btn-primary btn-lg",onClick:function(e){return le.hideModal(),void le.showModal(F.default,{show:!0,title:"Start Your Search"})},children:"Ready to find a new car?"})]})})})]}))})}))}}]);