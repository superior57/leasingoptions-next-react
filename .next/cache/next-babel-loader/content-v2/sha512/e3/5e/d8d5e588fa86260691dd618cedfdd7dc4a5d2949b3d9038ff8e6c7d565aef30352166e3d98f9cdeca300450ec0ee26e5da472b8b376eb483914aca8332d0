{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport AccountBox from '../account-box';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMobileAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Button } from 'react-bootstrap';\nimport AccountAPI from 'API/AccountAPI';\n\nconst AccountAlerts = props => {\n  var _props$currentContrac, _props$currentContrac4, _props$currentContrac5;\n\n  const {\n    0: customer,\n    1: setCustomer\n  } = useState();\n  useEffect(() => {\n    setCustomer(JSON.parse(localStorage.getItem('lo-account-credentials')));\n  }, []);\n  const {\n    0: smsToggle,\n    1: setSmsToggle\n  } = useState(false);\n  const {\n    0: smsPhoneNumber,\n    1: setSmsPhoneNumber\n  } = useState((_props$currentContrac = props.currentContract) === null || _props$currentContrac === void 0 ? void 0 : _props$currentContrac.renewalAlertSmsNumber);\n\n  const handleSmsToggle = evt => {\n    evt.preventDefault();\n    setSmsToggle(true);\n  };\n\n  const handleAlertChange = evt => {\n    var _props$currentContrac2;\n\n    let alertData = {\n      accountId: customer === null || customer === void 0 ? void 0 : customer.accountId,\n      dealsheetId: (_props$currentContrac2 = props.currentContract) === null || _props$currentContrac2 === void 0 ? void 0 : _props$currentContrac2.dealsheetId,\n      type: evt.target.name,\n      value: evt.target.value\n    };\n    AccountAPI.setRenewalAlert(alertData).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const handleSmsClick = () => {\n    setSmsToggle(false);\n    props.handleSmsChange(smsPhoneNumber);\n  };\n\n  useEffect(() => {\n    var _props$currentContrac3;\n\n    setSmsPhoneNumber((_props$currentContrac3 = props.currentContract) === null || _props$currentContrac3 === void 0 ? void 0 : _props$currentContrac3.renewalAlertSmsNumber);\n  }, [props.currentContract]);\n  return /*#__PURE__*/_jsxs(AccountBox, {\n    icon: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n      icon: faMobileAlt\n    }),\n    title: \"CONTRACT EXPIRATION ALERTS\",\n    border: false,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: `col-24 mb-2 ${smsToggle ? \"d-none\" : \"\"}`,\n        children: [\"Please notify me with an SMS on \", (_props$currentContrac4 = props.currentContract) === null || _props$currentContrac4 === void 0 ? void 0 : _props$currentContrac4.renewalAlertSmsNumber, \" click \", /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-text\",\n          onClick: evt => handleSmsToggle(evt),\n          children: \"here\"\n        }), \" to change\"]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: `col-24 mb-2 ${smsToggle ? \"\" : \"d-none\"}`,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"form-row mb-3\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-14 col-sm-18 mb-2 mb-md-0\",\n            children: /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              value: smsPhoneNumber,\n              onChange: evt => {\n                setSmsPhoneNumber(parseInt(evt.target.value));\n              },\n              className: \"form-control\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-10 col-sm-6\",\n            children: /*#__PURE__*/_jsx(Button, {\n              className: \"btn btn-success btn-lg btn-fluid\",\n              onClick: () => handleSmsClick(),\n              children: \"Apply\"\n            })\n          })]\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4 offset-16 text-center mb-1\",\n        children: /*#__PURE__*/_jsx(\"strong\", {\n          children: \"YES\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4 text-center mb-1\",\n        children: /*#__PURE__*/_jsx(\"strong\", {\n          children: \"NO\"\n        })\n      })]\n    }), (_props$currentContrac5 = props.currentContract) === null || _props$currentContrac5 === void 0 ? void 0 : _props$currentContrac5.renewalAlerts.map(alert => /*#__PURE__*/_jsxs(\"div\", {\n      className: `row py-3 bg-white ${alert.type === 1 ? \"border-bottom border-dark\" : \"\"}`,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-16\",\n        children: [/*#__PURE__*/_jsxs(\"strong\", {\n          children: [alert.type === 1 ? \"3\" : \"6\", \" Month\"]\n        }), \" Alert\"]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"input\", {\n          type: \"radio\",\n          defaultChecked: alert.value ? true : false,\n          value: \"true\",\n          name: `${alert.type}`,\n          onChange: evt => handleAlertChange(evt),\n          className: \"form-control\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"input\", {\n          type: \"radio\",\n          defaultChecked: !alert.value ? true : false,\n          value: \"false\",\n          name: `${alert.type}`,\n          onChange: evt => handleAlertChange(evt),\n          className: \"form-control\"\n        })\n      })]\n    }, alert.type))]\n  });\n};\n\nexport default AccountAlerts;","map":null,"metadata":{},"sourceType":"module"}