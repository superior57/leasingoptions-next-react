{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport style from './garage-item.module.scss';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faTimes } from \"@fortawesome/pro-light-svg-icons\";\nimport { VehicleTypes } from 'enums/VehicleTypes';\nimport { LeasingDealTypes } from \"enums/LeasingDealTypes\";\nimport { isNullOrWhiteSpace } from 'helpers/stringHelper';\nimport { GetMakes, GetManufacturersModelsGarage, GetModelsTrimsGarage } from 'business-logic/vehicleService';\n\nconst GarageVehicleSelector = ({\n  idx,\n  settings\n}) => {\n  const {\n    0: makes,\n    1: setMakes\n  } = useState([]);\n  const {\n    0: models,\n    1: setModels\n  } = useState([]);\n  const {\n    0: derivatives,\n    1: setDerivatives\n  } = useState([]);\n  const {\n    0: leasingDealType,\n    1: setLeasingDealType\n  } = useState(undefined);\n  const {\n    0: makeUrl,\n    1: setMakeUrl\n  } = useState('');\n  const {\n    0: modelUrl,\n    1: setModelUrl\n  } = useState('');\n  const {\n    0: vehicleRef,\n    1: setVehicleRef\n  } = useState(undefined);\n  useEffect(() => {\n    if (leasingDealType) {\n      GetMakes(leasingDealType === LeasingDealTypes.Van ? VehicleTypes.Commercial : VehicleTypes.Car).then(result => {\n        let data = [];\n\n        if (result.isSucceed && result.data) {\n          data = result.data;\n        }\n\n        setMakeUrl('');\n        setMakes(data);\n      });\n    } else {\n      setMakeUrl('');\n      setMakes([]);\n    }\n  }, [leasingDealType]);\n  useEffect(() => {\n    if (leasingDealType && !isNullOrWhiteSpace(makeUrl)) {\n      //TODO: ApiResponse required\n      GetManufacturersModelsGarage(leasingDealType === LeasingDealTypes.Van ? VehicleTypes.Commercial : VehicleTypes.Car, makeUrl).then(data => {\n        setModelUrl('');\n        setModels(data.data);\n      });\n    } else {\n      setModelUrl('');\n      setModels([]);\n    }\n  }, [makeUrl]);\n  useEffect(() => {\n    if (leasingDealType && !isNullOrWhiteSpace(makeUrl) && !isNullOrWhiteSpace(modelUrl)) {\n      GetModelsTrimsGarage(leasingDealType === LeasingDealTypes.Van ? VehicleTypes.Commercial : VehicleTypes.Car, makeUrl, modelUrl).then(result => {\n        let data = [];\n\n        if (result.isSucceed && result.data) {\n          data = result.data;\n        } //TODO: check here\n\n\n        undefined;\n        setDerivatives(data);\n      });\n    } else {\n      setVehicleRef(undefined);\n      setDerivatives([]);\n    }\n  }, [modelUrl]);\n\n  const handleDealTypeChange = evt => {\n    setLeasingDealType(parseInt(evt.currentTarget.value) || undefined);\n    setMakeUrl('');\n    setModelUrl('');\n    setVehicleRef(undefined);\n  };\n\n  const handleMakeChange = evt => {\n    setMakeUrl(evt.currentTarget.value);\n    setModelUrl('');\n    setVehicleRef(undefined);\n  };\n\n  const handleModelChange = evt => {\n    setModelUrl(evt.currentTarget.value);\n    setVehicleRef(undefined);\n  };\n\n  const handleDerivativeChange = evt => {\n    setVehicleRef(parseInt(evt.currentTarget.value) || undefined);\n  };\n\n  const handleClear = () => {\n    setLeasingDealType(undefined);\n    setMakeUrl('');\n    setMakes([]);\n    setModelUrl('');\n    setModels([]);\n    setVehicleRef(undefined);\n    setDerivatives([]);\n  };\n\n  const handleSelectVehicle = () => {\n    if (settings.onSelect) {\n      settings.onSelect(idx, {\n        leasingDealType: leasingDealType,\n        makeUrl: makeUrl,\n        modelUrl: modelUrl,\n        vehicleRef: vehicleRef\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: `${style['garage-column']} w-100 box box--thick bg-white p-3 py-md-4`,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-100 d-flex justify-content-between align-items-center mb-3\",\n      children: [\"Select \", /*#__PURE__*/_jsx(\"span\", {\n        children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n          width: \"30\",\n          height: \"30\",\n          icon: faTimes,\n          className: \"fa-2x\",\n          onClick: handleClear\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleDealTypeChange,\n        value: leasingDealType || '',\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Contract Type\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: LeasingDealTypes.Business,\n          children: \"Business\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: LeasingDealTypes.Personal,\n          children: \"Personal\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: LeasingDealTypes.Van,\n          children: \"Van\"\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleMakeChange,\n        value: makeUrl,\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Make\"\n        }), makes.map(item => /*#__PURE__*/_jsx(\"option\", {\n          value: item.id,\n          children: item.text\n        }, item.id))]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleModelChange,\n        value: modelUrl,\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Model\"\n        }), models.map(model => /*#__PURE__*/_jsx(\"option\", {\n          value: model.id,\n          children: model.text\n        }, model.id))]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleDerivativeChange,\n        value: vehicleRef || '',\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Vehicle\"\n        }), derivatives.map(trim => /*#__PURE__*/_jsx(\"option\", {\n          value: trim.id,\n          children: trim.text\n        }, trim.id))]\n      })\n    }), vehicleRef ? /*#__PURE__*/_jsxs(\"button\", {\n      className: \"btn btn-outline-secondary btn-block btn-labeled btn-lg\",\n      onClick: handleSelectVehicle,\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        className: \"btn-label\",\n        children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n          width: \"16\",\n          height: \"16\",\n          icon: faPlus\n        })\n      }), /*#__PURE__*/_jsx(\"span\", {\n        className: \"btn-text\",\n        children: \"Add This Vehicle\"\n      })]\n    }) : null]\n  });\n};\n\nexport default GarageVehicleSelector;","map":null,"metadata":{},"sourceType":"module"}