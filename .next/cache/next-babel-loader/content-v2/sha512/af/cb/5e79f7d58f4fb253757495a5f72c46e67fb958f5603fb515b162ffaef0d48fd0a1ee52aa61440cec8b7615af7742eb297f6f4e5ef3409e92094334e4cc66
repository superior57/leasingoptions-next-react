{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport style from './ouibounce.module.scss';\nimport { faTimes, faEnvelope } from '@fortawesome/pro-light-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TrustMicro from '../../components/trustpilot/trust-micro';\nimport { TrustThemeTypes } from 'enums/TrustThemeTypes';\nimport Link from 'next/link';\nimport React, { useEffect, useRef, useState } from 'react';\nimport ouibounce from 'ouibounce';\nimport { logLabelEvent } from 'helpers/analytics';\nimport { NewsletterSignup } from '../../business-logic/systemService';\n\nvar OuibounceModal = function OuibounceModal() {\n  var emailAddress = useRef();\n\n  var _useState = useState(false),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var leavingModalRef = useRef();\n\n  var dissmissModal = function dissmissModal() {\n    // @ts-ignore\n    leavingModalRef.current.style.display = 'none';\n    logLabelEvent('ouibounce', 'Click', 'dismissed');\n  };\n\n  var newsletterSignup = function newsletterSignup() {\n    var _emailAddress$current, _emailAddress$current2;\n\n    // @ts-ignore\n    if (emailAddress !== null && emailAddress !== void 0 && (_emailAddress$current = emailAddress.current) !== null && _emailAddress$current !== void 0 && _emailAddress$current.value && EmailAddressIsValid(emailAddress === null || emailAddress === void 0 ? void 0 : (_emailAddress$current2 = emailAddress.current) === null || _emailAddress$current2 === void 0 ? void 0 : _emailAddress$current2.value)) {\n      // @ts-ignore\n      NewsletterSignup(emailAddress.current.value, SubscriptionTypes.News).then(function (result) {\n        if (result.status.message === \"OK\") {\n          dissmissModal();\n          setError(false);\n          logLabelEvent('ouibounce', 'click', 'newsletter_signup');\n        }\n      });\n    } else {\n      setError(true);\n      emailAddress === null || emailAddress === void 0 ? void 0 : emailAddress.current.focus();\n    }\n  };\n\n  useEffect(function () {\n    // @ts-ignore\n    ouibounce(leavingModalRef.current, {\n      delay: 20\n    });\n  }, []);\n  return /*#__PURE__*/_jsx(\"div\", {\n    id: \"ouibounce-modal\",\n    className: style['modal-ouibounce'],\n    style: {\n      display: 'none'\n    },\n    ref: leavingModalRef,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: style['ouibounce-overlay'],\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: style['ouibounce-overlay__modal'],\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: style['ouibounce-overlay__bg'],\n          children: /*#__PURE__*/_jsx(\"img\", {\n            \"data-src\": \"\".concat(process.env.NEXT_PUBLIC_CDN, \"/website/static/ouibounce-bg.jpg\"),\n            width: \"315\",\n            height: \"407\",\n            className: \"lazyload\",\n            alt: \"Decorative phone image\"\n          })\n        }), /*#__PURE__*/_jsx(\"button\", {\n          className: style['ouibounce-overlay__close'],\n          onClick: dissmissModal,\n          children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n            icon: faTimes\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row no-gutters\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-24 col-md-18\",\n            children: [/*#__PURE__*/_jsx(\"h3\", {\n              className: \"mb-3\",\n              children: \"Leaving so soon?\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-3 mb-md-4\",\n              children: \"Want the latest deals? Special offers, exclusives and latest car news and reviews. Don\\u2019t miss a thing and sign up for alerts!\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row no-gutters\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-md-16 col-lg-14 mb-3 mb-md-4\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"box bg-light-grey\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"\".concat(style['ouibounce-overlay__input'], \" \").concat(error ? \"is-invalid\" : \"\"),\n                children: [/*#__PURE__*/_jsx(\"input\", {\n                  ref: emailAddress,\n                  id: \"emailAddress\",\n                  name: \"emailAddress\",\n                  className: \"form-control \".concat(error ? style['is-invalid'] : \"mb-2 mb-md-3\"),\n                  placeholder: \"Your email address\"\n                }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                  icon: faEnvelope\n                })]\n              }), error && /*#__PURE__*/_jsx(\"small\", {\n                className: \"w-100 d-block text-red mb-3\",\n                children: \"Please enter a valid email address\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                className: \"btn btn-primary btn-lg-md btn-block mb-3\",\n                onClick: function onClick() {\n                  newsletterSignup();\n                },\n                children: \"Sign up for exclusive offers\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-100 position-relative text-center mb-3\",\n                children: /*#__PURE__*/_jsx(TrustMicro, {\n                  theme: TrustThemeTypes.Dark\n                })\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row no-gutters\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-md-16 col-lg-14 text-center\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              \"data-src\": \"\".concat(process.env.NEXT_PUBLIC_CDN, \"/website/static/ouibounce-cars.png\"),\n              width: \"400\",\n              height: \"100\",\n              className: \"img-fluid mb-3 lazyload\",\n              alt: \"\"\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row no-gutters\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-md-16\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: style['ouibounce-overlay__tandcs'],\n              children: /*#__PURE__*/_jsxs(\"small\", {\n                children: [\"You can unsubscribe at any time, by emailing \", /*#__PURE__*/_jsx(\"a\", {\n                  href: \"mailto:compliance@leasingoptions.co.uk\",\n                  children: \"compliance@leasingoptions.co.uk\"\n                }), \" or by clicking the unsubscribe link at the end of any e-newsletter you have received from us. For more information, please see our \", /*#__PURE__*/_jsx(Link, {\n                  passHref: true,\n                  href: \"/privacy-policy\",\n                  children: /*#__PURE__*/_jsx(\"a\", {\n                    children: \"Privacy Policy\"\n                  })\n                }), \".\"]\n              })\n            })\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default OuibounceModal;","map":null,"metadata":{},"sourceType":"module"}