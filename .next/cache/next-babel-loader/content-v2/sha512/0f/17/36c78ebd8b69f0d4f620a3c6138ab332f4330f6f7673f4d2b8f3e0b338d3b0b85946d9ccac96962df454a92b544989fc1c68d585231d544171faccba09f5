{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useEffect } from 'react';\nimport ExpandableText from 'components/expandable-text';\nimport CardManufacturer from 'components/card/card-manufacturer';\nimport CardVehicle from 'components/card/card-vehicle';\nimport VehicleCarousel from 'components/vehicle-carousel';\nimport DropDown from 'components/layout/drop-down';\nimport CardWithStickers from 'components/card/card-with-stickers';\nimport { GetVehicleModelPreviews } from 'business-logic/vehicleService';\n\n//TODO: check logic\nvar VehiclesSearchPage = function VehiclesSearchPage(_ref) {\n  var leasingDealType = _ref.leasingDealType,\n      title = _ref.title,\n      description = _ref.description,\n      vehicleFilter = _ref.vehicleFilter,\n      modelPreviews = _ref.modelPreviews,\n      topPicks = _ref.topPicks;\n\n  var _useState = useState(0),\n      totalResults = _useState[0],\n      setTotalResults = _useState[1];\n\n  var _useState2 = useState(0),\n      totalModels = _useState2[0],\n      setTotalModels = _useState2[1];\n\n  var _useState3 = useState('OrderPrice'),\n      sortBy = _useState3[0],\n      setSortBy = _useState3[1];\n\n  var _useState4 = useState('ASC'),\n      sortDirection = _useState4[0],\n      setSortDirection = _useState4[1];\n\n  var _useState5 = useState(modelPreviews),\n      modelPreviewsData = _useState5[0],\n      setModelPreviewsData = _useState5[1];\n\n  useEffect(function () {\n    Promise.resolve(filterModelPreviews(sortBy, sortDirection)).then(function (data) {\n      setModelPreviewsData(data.data);\n      setTotalResults(data.data.totalVehiclesCount);\n      setTotalModels(data.data.totalItemsCount);\n    });\n  }, [leasingDealType, sortBy, sortDirection]);\n\n  var handleSortChange = function handleSortChange(sortBy, sortDirection) {\n    setSortBy(sortBy);\n    setSortDirection(sortDirection);\n  };\n\n  var filterModelPreviews = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(sortBy, sortDirection) {\n      var sortingCriteria, paginationCriteria;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              sortingCriteria = {\n                sortBy: sortBy,\n                sortDirection: sortDirection\n              };\n              paginationCriteria = {\n                pageSize: 9999,\n                pageIndex: 1\n              };\n              _context.next = 4;\n              return GetVehicleModelPreviews(vehicleFilter, paginationCriteria, sortingCriteria);\n\n            case 4:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function filterModelPreviews(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"section\", {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"container-fluid pt-4 pb-5 py-md-4\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 d-flex align-items-center mb-4\",\n            children: /*#__PURE__*/_jsx(\"h1\", {\n              className: \"m-0\",\n              children: title\n            })\n          })\n        }), description && /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24\",\n            children: /*#__PURE__*/_jsx(ExpandableText, {\n              theme: \"light\",\n              children: description\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"container-fluid py-5 bg-light-grey\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-md-18\",\n            children: /*#__PURE__*/_jsxs(\"h3\", {\n              className: \"mb-3 mb-md-5\",\n              children: [/*#__PURE__*/_jsx(\"mark\", {\n                className: \"mark-text\",\n                children: totalResults\n              }), \" Matching Deals from \", /*#__PURE__*/_jsx(\"mark\", {\n                className: \"mark-text\",\n                children: totalModels\n              }), \" Matching Models\"]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-md-6 mb-3 mb-md-0\",\n            children: /*#__PURE__*/_jsxs(DropDown, {\n              indicator: true,\n              active: \"Price Low-High\",\n              wrapperClass: \"w-100\",\n              buttonClass: \"btn-block bg-white text-left\",\n              buttonText: \"Sort by\",\n              children: [/*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('OrderPrice', 'DESC');\n                },\n                children: \"Price High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('OrderPrice', 'ASC');\n                },\n                children: \"Price Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('Seats', 'DESC');\n                },\n                children: \"Seats High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('Seats', 'ASC');\n                },\n                children: \"Seats Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('EngineSize', 'DESC');\n                },\n                children: \"Engine Size High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('EngineSize', 'ASC');\n                },\n                children: \"Engine Size Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('Mpg', 'DESC');\n                },\n                children: \"MPG High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('Mpg', 'ASC');\n                },\n                children: \"MPG Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('CO2', 'DESC');\n                },\n                children: \"CO2 High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: function onClick() {\n                  return handleSortChange('CO2', 'ASC');\n                },\n                children: \"CO2 Low-High\"\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: modelPreviewsData.dataItems.map(function (model) {\n            return /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-24 col-md-12 col-lg-6 d-flex\",\n              children: /*#__PURE__*/_jsx(CardManufacturer, {\n                isATC: false,\n                vehicle: model,\n                dealSelector: leasingDealType\n              })\n            }, \"model-\".concat(model.vehicleRef));\n          })\n        })]\n      })]\n    }), topPicks && /*#__PURE__*/_jsxs(\"section\", {\n      className: \"container-fluid py-5 bg-white\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24\",\n          children: /*#__PURE__*/_jsx(\"h2\", {\n            className: \"mb-3 mb-md-5\",\n            children: \"Customers Also Viewed...\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24\",\n          children: /*#__PURE__*/_jsx(CardWithStickers, {\n            children: /*#__PURE__*/_jsx(VehicleCarousel, {\n              tabletArrows: true,\n              desktopArrows: true,\n              infinite: topPicks.length > 3,\n              children: topPicks.map(function (vehicle) {\n                return /*#__PURE__*/_jsx(CardVehicle, {\n                  id: \"picked-\".concat(vehicle.vehicleRef),\n                  isATC: false,\n                  vehicle: vehicle,\n                  dealSelector: leasingDealType,\n                  showStickers: false\n                }, \"featured-\".concat(vehicle.vehicleRef));\n              })\n            })\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default VehiclesSearchPage;","map":null,"metadata":{},"sourceType":"module"}