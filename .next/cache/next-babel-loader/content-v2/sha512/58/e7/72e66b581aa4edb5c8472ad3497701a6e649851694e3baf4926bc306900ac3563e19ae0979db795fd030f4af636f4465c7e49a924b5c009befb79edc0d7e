{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport ExpandableText from 'components/expandable-text';\nimport CardManufacturer from 'components/card/card-manufacturer';\nimport CardVehicle from 'components/card/card-vehicle';\nimport VehicleCarousel from 'components/vehicle-carousel';\nimport DropDown from 'components/layout/drop-down';\nimport CardWithStickers from 'components/card/card-with-stickers';\nimport { GetVehicleModelPreviews } from 'business-logic/vehicleService';\n\n//TODO: check logic\nconst VehiclesSearchPage = ({\n  leasingDealType,\n  title,\n  description,\n  vehicleFilter,\n  modelPreviews,\n  topPicks\n}) => {\n  const {\n    0: totalResults,\n    1: setTotalResults\n  } = useState(0);\n  const {\n    0: totalModels,\n    1: setTotalModels\n  } = useState(0);\n  const {\n    0: sortBy,\n    1: setSortBy\n  } = useState('OrderPrice');\n  const {\n    0: sortDirection,\n    1: setSortDirection\n  } = useState('ASC');\n  const {\n    0: modelPreviewsData,\n    1: setModelPreviewsData\n  } = useState(modelPreviews);\n  useEffect(() => {\n    Promise.resolve(filterModelPreviews(sortBy, sortDirection)).then(function (data) {\n      setModelPreviewsData(data.data);\n      setTotalResults(data.data.totalVehiclesCount);\n      setTotalModels(data.data.totalItemsCount);\n    });\n  }, [leasingDealType, sortBy, sortDirection]);\n\n  const handleSortChange = (sortBy, sortDirection) => {\n    setSortBy(sortBy);\n    setSortDirection(sortDirection);\n  };\n\n  const filterModelPreviews = async (sortBy, sortDirection) => {\n    const sortingCriteria = {\n      sortBy: sortBy,\n      sortDirection: sortDirection\n    };\n    const paginationCriteria = {\n      pageSize: 9999,\n      pageIndex: 1\n    };\n    return await GetVehicleModelPreviews(vehicleFilter, paginationCriteria, sortingCriteria);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"section\", {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"container-fluid pt-4 pb-5 py-md-4\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 d-flex align-items-center mb-4\",\n            children: /*#__PURE__*/_jsx(\"h1\", {\n              className: \"m-0\",\n              children: title\n            })\n          })\n        }), description && /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24\",\n            children: /*#__PURE__*/_jsx(ExpandableText, {\n              theme: \"light\",\n              children: description\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"container-fluid py-5 bg-light-grey\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-md-18\",\n            children: /*#__PURE__*/_jsxs(\"h3\", {\n              className: \"mb-3 mb-md-5\",\n              children: [/*#__PURE__*/_jsx(\"mark\", {\n                className: \"mark-text\",\n                children: totalResults\n              }), \" Matching Deals from \", /*#__PURE__*/_jsx(\"mark\", {\n                className: \"mark-text\",\n                children: totalModels\n              }), \" Matching Models\"]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-md-6 mb-3 mb-md-0\",\n            children: /*#__PURE__*/_jsxs(DropDown, {\n              indicator: true,\n              active: \"Price Low-High\",\n              wrapperClass: \"w-100\",\n              buttonClass: \"btn-block bg-white text-left\",\n              buttonText: \"Sort by\",\n              children: [/*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('OrderPrice', 'DESC'),\n                children: \"Price High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('OrderPrice', 'ASC'),\n                children: \"Price Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('Seats', 'DESC'),\n                children: \"Seats High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('Seats', 'ASC'),\n                children: \"Seats Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('EngineSize', 'DESC'),\n                children: \"Engine Size High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('EngineSize', 'ASC'),\n                children: \"Engine Size Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('Mpg', 'DESC'),\n                children: \"MPG High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('Mpg', 'ASC'),\n                children: \"MPG Low-High\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('CO2', 'DESC'),\n                children: \"CO2 High-Low\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"text-left\",\n                onClick: () => handleSortChange('CO2', 'ASC'),\n                children: \"CO2 Low-High\"\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: modelPreviewsData.dataItems.map(model => {\n            return /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-24 col-md-12 col-lg-6 d-flex\",\n              children: /*#__PURE__*/_jsx(CardManufacturer, {\n                isATC: false,\n                vehicle: model,\n                dealSelector: leasingDealType\n              })\n            }, `model-${model.vehicleRef}`);\n          })\n        })]\n      })]\n    }), topPicks && /*#__PURE__*/_jsxs(\"section\", {\n      className: \"container-fluid py-5 bg-white\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24\",\n          children: /*#__PURE__*/_jsx(\"h2\", {\n            className: \"mb-3 mb-md-5\",\n            children: \"Customers Also Viewed...\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24\",\n          children: /*#__PURE__*/_jsx(CardWithStickers, {\n            children: /*#__PURE__*/_jsx(VehicleCarousel, {\n              tabletArrows: true,\n              desktopArrows: true,\n              infinite: topPicks.length > 3,\n              children: topPicks.map(vehicle => /*#__PURE__*/_jsx(CardVehicle, {\n                id: `picked-${vehicle.vehicleRef}`,\n                isATC: false,\n                vehicle: vehicle,\n                dealSelector: leasingDealType,\n                showStickers: false\n              }, `featured-${vehicle.vehicleRef}`))\n            })\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default VehiclesSearchPage;","map":null,"metadata":{},"sourceType":"module"}