{"ast":null,"code":"import { LeasingDealTypes } from \"enums/LeasingDealTypes\";\nimport { TopPageMetaDescription } from \"./seoHelper\";\nimport { GetCanonicalUrl } from \"./urlHelper\";\nimport { VehicleTypes } from \"enums/VehicleTypes\";\nimport { VehicleMetaDescription } from \"helpers/seoHelper\";\nimport { formatNumber } from 'helpers/currencyHelper';\nimport { GetFuelTypeText, GetTransmissionText } from \"helpers/enumsHelper\";\nimport moment from \"moment\";\nimport { GetTrustPilotRating } from \"business-logic/systemService\";\nexport const getLandingPageSchema = (leasingDealType, url) => {\n  let leasingTypeText = \"\";\n\n  switch (leasingDealType) {\n    case LeasingDealTypes.Business:\n      leasingTypeText = \"Business Car Leasing\";\n      break;\n\n    case LeasingDealTypes.Personal:\n      leasingTypeText = \"Car Leasing\";\n      break;\n\n    case LeasingDealTypes.Van:\n      leasingTypeText = \"Van Leasing\";\n      break;\n  }\n\n  const webPageSchema = {\n    name: leasingTypeText,\n    type: \"WebPage\",\n    context: \"http://schema.org\",\n    description: TopPageMetaDescription(leasingDealType, url)\n  };\n  return setSchemaContextTypeProperties(JSON.stringify(webPageSchema));\n};\nexport const getWebPageSchema = (name, description) => {\n  const webPageSchema = {\n    name: name,\n    type: \"WebPage\",\n    context: \"http://schema.org\",\n    description: description\n  };\n  return setSchemaContextTypeProperties(JSON.stringify(webPageSchema));\n};\nexport const setSchemaContextTypeProperties = text => {\n  return text.replace('\"type\"', '\"@type\"').replace('\"context\"', '\"@context\"');\n};\nexport const GetServiceSchema = async vehicleType => {\n  var trustpilotRating = await GetTrustPilotRating();\n  let schema = {\n    name: \"Leasing Options\",\n    serviceType: vehicleType == VehicleTypes.Commercial ? \"Van\" : \"Car\" + \" Leasing\",\n    context: \"http://schema.org\",\n    type: \"Service\"\n  };\n\n  if (trustpilotRating.data != null) {\n    schema.aggregateRating = {\n      type: \"AggregateRating\",\n      bestRating: 5,\n      worstRating: 0,\n      url: \"https://uk.trustpilot.com/review/leasingoptions.co.uk\",\n      ratingCount: trustpilotRating.data.reviewsCount,\n      ratingValue: trustpilotRating.data.score,\n      itemReviewed: GetLoOrganization()\n    };\n  }\n\n  return setSchemaContextTypeProperties(JSON.stringify(schema));\n}; //TODO: review all above\n\nexport const GetFaqsSchema = (leasingDealType, faqs) => {\n  let schema = {\n    mainEntity: []\n  };\n\n  if (faqs && faqs.length > 0) {\n    let author = GetLoOrganization();\n    author.url = (leasingDealType === LeasingDealTypes.Van ? GetCanonicalUrl(\"/van-leasing\") : GetCanonicalUrl(leasingDealType == LeasingDealTypes.Business ? \"/business-car-leasing\" : \"/car-leasing\")).toLowerCase();\n\n    for (let idx = 0; idx < faqs.length; idx++) {\n      const item = faqs[idx];\n      const schemaItem = GetQuestion(item, author);\n      schema.mainEntity.push(schemaItem);\n    }\n  }\n\n  return Object.assign({\n    '@type': 'FAQPage'\n  }, schema);\n};\nexport const GetQuestion = (faqItem, author) => {\n  let schema = {\n    name: faqItem.question,\n    answerCount: 1,\n    author: author,\n    acceptedAnswer: GetAnswer(faqItem, author)\n  };\n  return Object.assign({\n    '@type': 'Question'\n  }, schema);\n};\nexport const GetAnswer = (faqItem, author) => {\n  let schema = {\n    text: faqItem.answer,\n    author: author\n  };\n  return Object.assign({\n    '@type': 'Answer'\n  }, schema);\n};\nexport const GetBreadcrumbsSchema = breadcrumbs => {\n  let schema = {\n    itemListElement: []\n  };\n\n  if (breadcrumbs && breadcrumbs.length > 0) {\n    for (let idx = 0; idx < breadcrumbs.length; idx++) {\n      const item = breadcrumbs[idx];\n      const schemaItem = GetBreadcrumbsListItem(idx + 1, item);\n      schema.itemListElement.push(schemaItem);\n    }\n  }\n\n  return Object.assign({\n    '@type': 'BreadcrumbList'\n  }, schema);\n};\nexport const GetBreadcrumbsListItem = (idx, breadcrumbsItem) => {\n  let schema = {\n    position: idx,\n    name: breadcrumbsItem.name.toUpperCase(),\n    item: GetCanonicalUrl(breadcrumbsItem.url)\n  };\n  return Object.assign({\n    '@type': 'ListItem'\n  }, schema);\n};\nexport const GetBlogPostSchema = article => {\n  let momentDate = moment(article.onDate, \"YYYY-MM-DDTHH:mm\");\n  let formattedDate = momentDate.format(\"YYYY-MM-DD\");\n  let schema = {\n    author: \"Leasing Options\",\n    publisher: GetLoOrganization(),\n    datePublished: article.onDate ? formattedDate : null,\n    description: article.metaDescription ? article.metaDescription : null,\n    headline: article.title ? article.title : null,\n    image: process.env.NEXT_PUBLIC_CDN + article.imageUrl,\n    mainEntityOfPage: article.newsUrl ? GetCanonicalUrl(`/news/blog/${article.newsUrl}`) : null,\n    sameAs: \"https://www.facebook.com/LeasingOptionsLtd/\"\n  };\n  return Object.assign({\n    '@type': 'BlogPosting'\n  }, schema);\n};\nexport const GetVehicleSchema = (vehicle, url, imageUrl) => {\n  let schema = {\n    brand: vehicle.make,\n    model: vehicle.model,\n    vehicleConfiguration: vehicle.derivative,\n    sku: vehicle.vehicleRef,\n    name: vehicle.make + \" \" + vehicle.model + \" \" + vehicle.derivative,\n    description: VehicleMetaDescription(vehicle.vehicleType, vehicle.make, vehicle.shortModel, vehicle.derivative),\n    modelDate: null,\n    url: url,\n    image: imageUrl,\n    fuelCapacity: null,\n    fuelEfficiency: vehicle.mpg,\n    fuelType: GetFuelTypeText(vehicle.fuelType),\n    accelerationTime: null,\n    emissionsCO2: vehicle.co2 || vehicle.co2 === 0 ? `${formatNumber(vehicle.co2)} g/km` : null,\n    meetsEmissionStandard: null,\n    numberOfDoors: vehicle.doors,\n    numberOfForwardGears: null,\n    payload: null,\n    vehicleSeatingCapacity: vehicle.seats,\n    vehicleSpecialUsage: \"Leasing\",\n    vehicleTransmission: vehicle.transmission ? GetTransmissionText(vehicle.transmission) : null,\n    speed: {\n      minValue: 0,\n      maxValue: null\n    },\n    offers: GetAggregateOffer(vehicle.minPrice, vehicle.maxPrice)\n  };\n  return Object.assign({\n    '@type': 'Car'\n  }, schema);\n};\nexport const GetAggregateOffer = (minPrice, maxPrice, count) => {\n  const hasMinPrice = minPrice >= 0;\n  const hasMaxPrice = maxPrice >= 0;\n\n  if (hasMinPrice || hasMaxPrice) {\n    let min = hasMinPrice ? minPrice : maxPrice;\n    let max = hasMaxPrice ? maxPrice : minPrice;\n    let schema = {\n      priceCurrency: \"GBP\",\n      seller: GetLoOrganization(),\n      lowPrice: min,\n      highPrice: max,\n      offerCount: count\n    };\n    return Object.assign({\n      '@type': 'AggregateOffer'\n    }, schema);\n  }\n\n  return null;\n};\nexport const GetLoOrganization = () => {\n  let schema = {\n    name: \"Leasing Options\",\n    logo: GetLogo(GetCanonicalUrl(\"/images/logo.png\"))\n  };\n  return Object.assign({\n    '@type': 'Organization'\n  }, schema);\n};\nexport const GetLogo = url => {\n  let schema = {\n    url: url\n  };\n  return Object.assign({\n    '@type': 'ImageObject'\n  }, schema);\n};\nexport const GetSerializedSchema = shemaObject => {\n  return JSON.stringify(Object.assign({\n    '@context': 'http://schema.org'\n  }, shemaObject), (key, value) => {\n    if (value !== null) return value;\n  });\n};","map":null,"metadata":{},"sourceType":"module"}