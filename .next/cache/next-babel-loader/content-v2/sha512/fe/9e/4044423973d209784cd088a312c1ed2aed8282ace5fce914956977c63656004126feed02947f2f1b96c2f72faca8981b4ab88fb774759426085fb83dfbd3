{"ast":null,"code":"import _regeneratorRuntime from \"E:/current_project/PPH/tfs/Website/website/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"E:/current_project/PPH/tfs/Website/website/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useEffect } from 'react';\nimport style from 'sass/single-post.module.scss';\nimport Link from 'next/link';\nimport MainLayout from '../../../components/layout/main-layout';\nimport PageUpsell from '../../../components/layout/page-upsell';\nimport PageFaqs from '../../../components/layout/page-faqs';\nimport AsideGuides from '../../../components/layout/aside-guides';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faThumbsUp, faThumbsDown } from \"@fortawesome/pro-regular-svg-icons\";\nimport { InlineShareButtons } from 'sharethis-reactjs';\nimport { ContentService } from 'business-logic/contentService';\nexport var __N_SSP = true;\nexport default function AdvicePost(_ref) {\n  var postUrl = _ref.postUrl,\n      category = _ref.category,\n      metaData = _ref.metaData,\n      categoryList = _ref.categoryList,\n      popularGuides = _ref.popularGuides,\n      faqList = _ref.faqList,\n      pageContent = _ref.pageContent;\n\n  var _useState = useState(pageContent.likesCount === null ? 0 : pageContent.likesCount),\n      likeCount = _useState[0],\n      setLikeCount = _useState[1];\n\n  var _useState2 = useState(pageContent.dislikesCount === null ? 0 : pageContent.dislikesCount),\n      dislikeCount = _useState2[0],\n      setDisikeCount = _useState2[1];\n\n  var cardImage = pageContent.imageUrl ? pageContent.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\";\n\n  var handleIncrementLikes = function handleIncrementLikes(newsId) {\n    //TODO: ADD check for user IP\n    Promise.resolve(IncrementLikes(newsId)).then(function (data) {\n      setLikeCount(likeCount + 1);\n    });\n  };\n\n  var handleIncrementDislikes = function handleIncrementDislikes(newsId) {\n    //TODO: ADD check for user IP\n    Promise.resolve(IncrementDislikes(newsId)).then(function (data) {\n      setDisikeCount(dislikeCount + 1);\n    });\n  };\n\n  function IncrementLikes(_x) {\n    return _IncrementLikes.apply(this, arguments);\n  }\n\n  function _IncrementLikes() {\n    _IncrementLikes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(newsId) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return ContentService.IncrementLikes(newsId);\n\n            case 2:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _IncrementLikes.apply(this, arguments);\n  }\n\n  function IncrementDislikes(_x2) {\n    return _IncrementDislikes.apply(this, arguments);\n  }\n\n  function _IncrementDislikes() {\n    _IncrementDislikes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newsId) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return ContentService.IncrementDislikes(newsId);\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _IncrementDislikes.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (postUrl === 'car-running-cost-calculator') {\n      appendCalculatorScript('runningCalcScript', \"\\n                var eventMethod = window.addEventListener\\n                    ? \\\"addEventListener\\\"\\n                    : \\\"attachEvent\\\";\\n                var eventer = window[eventMethod];\\n                var messageEvent = eventMethod == \\\"attachEvent\\\" ? \\\"onmessage\\\" : \\\"message\\\";\\n                eventer(\\n                    messageEvent,\\n                    function (e) {\\n                    if (e.data.indexOf(\\\"resize::\\\") != -1) {\\n                        var height = e.data.replace(\\\"resize::\\\", \\\"\\\");\\n                        document.getElementById(\\\"runningCalc\\\").style.height = height + \\\"px\\\";\\n                    }\\n                    },\\n                    false\\n                );\\n            \", false);\n    }\n\n    if (postUrl === 'pcp-early-settlement-calculator') {\n      appendCalculatorScript('pcpCalcScript', \"\\n                var eventMethod = window.addEventListener\\n                    ? \\\"addEventListener\\\"\\n                    : \\\"attachEvent\\\";\\n                var eventer = window[eventMethod];\\n                var messageEvent = eventMethod == \\\"attachEvent\\\" ? \\\"onmessage\\\" : \\\"message\\\";\\n                eventer(\\n                    messageEvent,\\n                    function (e) {\\n                    if (e.data.indexOf(\\\"resize::\\\") != -1) {\\n                        var height = e.data.replace(\\\"resize::\\\", \\\"\\\");\\n                        document.getElementById(\\\"pcpCalc\\\").style.height = height + \\\"px\\\";\\n                    }\\n                    },\\n                    false\\n                );\\n            \", false);\n    }\n  }, []);\n\n  function appendCalculatorScript(id, text, async) {\n    var mainScript = document.createElement('script');\n    mainScript.type = 'text/javascript';\n    mainScript.id = id;\n    mainScript.text = text;\n    mainScript.async = async;\n    document.head.appendChild(mainScript);\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"section\", {\n      className: \"bg-light-grey py-3 py-md-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row d-flex\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-lg-18 order-2 order-lg-1\",\n            children: /*#__PURE__*/_jsxs(\"article\", {\n              className: style['single-post'],\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: style['single-post__img'],\n                children: [/*#__PURE__*/_jsx(\"img\", {\n                  className: \"img-fluid lazyload\",\n                  alt: \"\".concat(pageContent.pageTitle, \" image\"),\n                  \"data-src\": cardImage\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: style['single-post__tags'],\n                  children: /*#__PURE__*/_jsx(\"ul\", {\n                    children: /*#__PURE__*/_jsx(\"li\", {\n                      children: /*#__PURE__*/_jsx(Link, {\n                        href: \"/advice/\".concat(category.url),\n                        passHref: true,\n                        children: /*#__PURE__*/_jsx(\"a\", {\n                          children: category.name\n                        })\n                      })\n                    })\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: style['single-post__info'],\n                children: [/*#__PURE__*/_jsx(\"h1\", {\n                  children: pageContent.pageTitle\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  dangerouslySetInnerHTML: {\n                    __html: pageContent.pageSubtitle\n                  }\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"w-100 position-relative\",\n                  dangerouslySetInnerHTML: {\n                    __html: pageContent.content\n                  }\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: style['single-post__tags'],\n                children: [pageContent.tags.length > 0 && /*#__PURE__*/_jsxs(\"ul\", {\n                  children: [/*#__PURE__*/_jsx(\"li\", {\n                    className: \"tag-label\",\n                    children: \"Tags\"\n                  }), pageContent.tags.map(function (tag) {\n                    return /*#__PURE__*/_jsx(\"li\", {\n                      children: tag\n                    }, \"tag-\".concat(tag));\n                  })]\n                }), /*#__PURE__*/_jsx(\"hr\", {})]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"\".concat(style['single-post__social'], \" d-lg-flex align-items-center justify-content-center\"),\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"\".concat(style['single-post__rate'], \" d-inline-flex flex-wrap align-items-lg-center justify-content-center justify-content-lg-start\"),\n                  children: [/*#__PURE__*/_jsx(\"h4\", {\n                    children: \"Enjoy this article?\"\n                  }), /*#__PURE__*/_jsxs(\"a\", {\n                    className: \"\".concat(style['single-post__thumb'], \" \").concat(style['single-post__thumb--left']),\n                    children: [/*#__PURE__*/_jsx(\"span\", {\n                      children: likeCount\n                    }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      width: \"30\",\n                      height: \"30\",\n                      icon: faThumbsUp,\n                      onClick: function onClick() {\n                        return handleIncrementLikes(pageContent.id);\n                      }\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"a\", {\n                    className: \"\".concat(style['single-post__thumb'], \" \").concat(style['single-post__thumb--right']),\n                    children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      width: \"30\",\n                      height: \"30\",\n                      icon: faThumbsDown,\n                      onClick: function onClick() {\n                        return handleIncrementDislikes(pageContent.id);\n                      }\n                    }), /*#__PURE__*/_jsx(\"span\", {\n                      children: dislikeCount\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"\".concat(style['single-post__share'], \" d-inline-flex flex-wrap align-items-lg-center justify-content-center justify-content-lg-end\"),\n                  children: /*#__PURE__*/_jsx(InlineShareButtons, {\n                    config: {\n                      alignment: 'center',\n                      // alignment of buttons (left, center, right)\n                      color: 'social',\n                      // set the color of buttons (social, white)\n                      enabled: true,\n                      // show/hide buttons (true, false)\n                      font_size: 10,\n                      // font size for the buttons\n                      labels: 'cta',\n                      // button labels (cta, counts, null)\n                      language: 'en',\n                      // which language to use (see LANGUAGES)\n                      networks: [// which networks to include (see SHARING NETWORKS)\n                      'facebook', 'twitter', 'linkedin'],\n                      padding: 12,\n                      // padding within buttons (INTEGER)\n                      radius: 0,\n                      // the corner radius on each button (INTEGER)\n                      show_total: false,\n                      size: 26 // the size of each button (INTEGER)\n\n                    }\n                  })\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-lg-6 order-1 order-lg-2\",\n            children: /*#__PURE__*/_jsx(AsideGuides, {\n              selectedCategory: category.id,\n              categoryList: categoryList,\n              popular: true,\n              popularGuides: popularGuides\n            })\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(PageFaqs, {\n      faqList: faqList\n    }), /*#__PURE__*/_jsx(PageUpsell, {})]\n  });\n}\nAdvicePost.layout = MainLayout;","map":null,"metadata":{},"sourceType":"module"}