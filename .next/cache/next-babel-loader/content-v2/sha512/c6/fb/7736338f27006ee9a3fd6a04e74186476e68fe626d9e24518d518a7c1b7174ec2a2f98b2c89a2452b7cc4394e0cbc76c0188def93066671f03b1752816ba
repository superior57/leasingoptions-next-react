{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\current_project\\\\PPH\\\\tfs\\\\Website\\\\Website\\\\components\\\\marketing-consent\\\\marketing-consent.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useFormContext } from \"react-hook-form\";\nimport Link from 'next/link';\nimport style from './marketing-consent.module.scss';\nimport { EmailAddressIsValid } from 'helpers/validation';\nimport { MarketingCommunicationsService } from 'business-logic/marketingCommunicationsService';\nimport { GetPhoneNumber } from 'helpers/helpers';\nimport { connect } from 'react-redux';\n\nconst MarketingConsent = ({\n  isInternal,\n  emailAddress,\n  settings\n}) => {\n  //Used to share \"privacyConfirmed\" field with parent form and use same validation\n  const formContext = useFormContext(); //Set only when email address is present and marketing consent wasn't accepted earlier\n\n  const {\n    0: isRequired,\n    1: setIsRequired\n  } = useState(false); //Should trigger only when email address is changed\n\n  useEffect(() => {\n    //do we need timeout here?\n    if (settings.onVerificationStart) {\n      settings.onVerificationStart();\n    }\n\n    if (emailAddress && EmailAddressIsValid(emailAddress)) {\n      MarketingCommunicationsService.HasSeenMarketingForm(emailAddress).then(result => {\n        setIsRequired(!result);\n\n        if (settings.onVerificationComplete) {\n          settings.onVerificationComplete();\n        }\n      });\n    } else {\n      setIsRequired(false);\n\n      if (settings.onVerificationComplete) {\n        settings.onVerificationComplete();\n      }\n    }\n  }, [emailAddress]); //TODO: check if phone number should be dynamic here?\n\n  if (isRequired) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style['marketing'],\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Marketing Communications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-4\",\n          children: \"We would love to keep you updated with our latest special offers, car news and exclusive benefits just for Leasing Options customers. Please let us know how you'd like us to contact you:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${style[\"checkboxes\"]} mb-4`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-check form-check-inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-check-input\",\n              type: \"checkbox\",\n              name: \"allowedCommunicationTypes\",\n              value: 1,\n              id: \"contactEmail\",\n              ref: formContext.register\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-check-label mb-0\",\n              htmlFor: \"contactEmail\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-check form-check-inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-check-input\",\n              type: \"checkbox\",\n              name: \"allowedCommunicationTypes\",\n              value: 2,\n              id: \"contactPost\",\n              ref: formContext.register\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-check-label mb-0\",\n              htmlFor: \"contactPost\",\n              children: \"Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-check form-check-inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-check-input\",\n              type: \"checkbox\",\n              name: \"allowedCommunicationTypes\",\n              value: 3,\n              id: \"contactSms\",\n              ref: formContext.register\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-check-label mb-0\",\n              htmlFor: \"contactSms\",\n              children: \"SMS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-check form-check-inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-check-input\",\n              type: \"checkbox\",\n              name: \"allowedCommunicationTypes\",\n              value: 4,\n              id: \"contactPhone\",\n              ref: formContext.register\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-check-label mb-0\",\n              htmlFor: \"contactPhone\",\n              children: \"Telephone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-4\",\n          children: [\"Your personal information will not be shared with any third party companies. For more information, please read our Privacy Policy \", /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/privacy-policy\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 184\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 155\n          }, this), \" for further details. You can unsubscribe from marketing communications at any time by contacting us on \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"phonenumber_call_now\",\n              children: GetPhoneNumber(isInternal)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 115\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 107\n          }, this), \" or via Email at \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"mailto:marketing@leasingoptions.co.uk\",\n            children: \"marketing@leasingoptions.co.uk\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 215\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this);\n  }\n\n  return null;\n};\n\nconst mapStateToProps = state => ({\n  isInternal: state.isInternal\n});\n\nexport default connect(mapStateToProps)(MarketingConsent);","map":{"version":3,"sources":["E:/current_project/PPH/tfs/Website/Website/components/marketing-consent/marketing-consent.tsx"],"names":["React","useState","useEffect","useFormContext","Link","style","EmailAddressIsValid","MarketingCommunicationsService","GetPhoneNumber","connect","MarketingConsent","isInternal","emailAddress","settings","formContext","isRequired","setIsRequired","onVerificationStart","HasSeenMarketingForm","then","result","onVerificationComplete","register","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport Link from 'next/link';\r\nimport style from './marketing-consent.module.scss';\r\n\r\nimport { EmailAddressIsValid } from 'helpers/validation';\r\nimport { MarketingCommunicationsService } from 'business-logic/marketingCommunicationsService';\r\nimport { GetPhoneNumber } from 'helpers/helpers';\r\nimport { connect } from 'react-redux';\r\n\r\ntype Props = {\r\n    isInternal: boolean;\r\n    emailAddress: string | null;\r\n    settings: {\r\n        onVerificationStart: any;\r\n        onVerificationComplete: any;\r\n    };\r\n}\r\n\r\nconst MarketingConsent: React.FC<Props> = ({ isInternal, emailAddress, settings }) => {\r\n    //Used to share \"privacyConfirmed\" field with parent form and use same validation\r\n    const formContext = useFormContext();\r\n\r\n    //Set only when email address is present and marketing consent wasn't accepted earlier\r\n    const [isRequired, setIsRequired] = useState<boolean | any>(false);\r\n\r\n    //Should trigger only when email address is changed\r\n    useEffect(() => {\r\n        //do we need timeout here?\r\n        if (settings.onVerificationStart) {\r\n            settings.onVerificationStart();\r\n        }\r\n\r\n        if (emailAddress && EmailAddressIsValid(emailAddress)) {\r\n            MarketingCommunicationsService.HasSeenMarketingForm(emailAddress).then(result => {\r\n                setIsRequired(!result);\r\n                if (settings.onVerificationComplete) {\r\n                    settings.onVerificationComplete();\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            setIsRequired(false);\r\n            if (settings.onVerificationComplete) {\r\n                settings.onVerificationComplete();\r\n            }\r\n        }\r\n    }, [emailAddress]);\r\n\r\n    //TODO: check if phone number should be dynamic here?\r\n    if (isRequired) {\r\n        return (\r\n            <div className=\"form-group\">\r\n                <div className={style['marketing']}>\r\n                    <h4>Marketing Communications</h4>\r\n                    <p className=\"mb-4\">We would love to keep you updated with our latest special offers, car news and exclusive benefits just for Leasing Options customers. Please let us know how you'd like us to contact you:</p>\r\n                    <div className={`${style[\"checkboxes\"]} mb-4`}>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"checkbox\" name=\"allowedCommunicationTypes\" value={1} id=\"contactEmail\" ref={formContext.register} />\r\n                            <label className=\"form-check-label mb-0\" htmlFor=\"contactEmail\">Email</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"checkbox\" name=\"allowedCommunicationTypes\" value={2} id=\"contactPost\" ref={formContext.register} />\r\n                            <label className=\"form-check-label mb-0\" htmlFor=\"contactPost\">Post</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"checkbox\" name=\"allowedCommunicationTypes\" value={3} id=\"contactSms\" ref={formContext.register} />\r\n                            <label className=\"form-check-label mb-0\" htmlFor=\"contactSms\">SMS</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"checkbox\" name=\"allowedCommunicationTypes\" value={4} id=\"contactPhone\" ref={formContext.register} />\r\n                            <label className=\"form-check-label mb-0\" htmlFor=\"contactPhone\">Telephone</label>\r\n                        </div>\r\n                    </div>\r\n                    <p className=\"mb-4\">\r\n                        Your personal information will not be shared with any third party companies. For more information, please read our Privacy Policy <Link href=\"/privacy-policy\"><a>here</a></Link> for further details.\r\n                        You can unsubscribe from marketing communications at any time by contacting us on <strong><span className=\"phonenumber_call_now\">{GetPhoneNumber(isInternal)}</span></strong> or via Email at <a href=\"mailto:marketing@leasingoptions.co.uk\">marketing@leasingoptions.co.uk</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isInternal: state.isInternal\r\n});\r\n\r\nexport default connect(mapStateToProps)(MarketingConsent);"]},"metadata":{},"sourceType":"module"}