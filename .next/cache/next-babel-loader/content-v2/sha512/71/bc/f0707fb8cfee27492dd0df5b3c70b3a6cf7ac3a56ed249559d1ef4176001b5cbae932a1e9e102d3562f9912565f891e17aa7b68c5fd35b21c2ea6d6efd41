{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch, faSpinner } from \"@fortawesome/free-solid-svg-icons\";\nimport style from './page-banner.module.scss';\nimport { NewsTypes } from 'enums/NewsTypes';\nimport { NewsService } from 'business-logic/newsService';\n\nconst PageBannerSearchNews = ({\n  newsType\n}) => {\n  const newsSearchTerm = useRef();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: selectednewsType,\n    1: setSelectednewsType\n  } = useState(newsType);\n  const {\n    0: searchList,\n    1: setSearchList\n  } = useState([]);\n\n  const handleNewsTypeChange = evt => setSelectednewsType(evt.currentTarget.value);\n\n  const handleNewsSearch = () => getSearchResults();\n\n  useEffect(() => {\n    getSearchResults();\n  }, [selectednewsType]);\n\n  function getSearchResults() {\n    // @ts-ignore\n    let searchTerm = newsSearchTerm.current.value.toString();\n\n    if (searchTerm.length >= 3) {\n      setIsLoading(true);\n      Promise.resolve(GetNewsSearchList(selectednewsType, searchTerm)).then(function (data) {\n        setSearchList(data.data);\n        setIsLoading(false);\n      });\n    } else {\n      setSearchList([]);\n    }\n  }\n\n  async function GetNewsSearchList(newsType, searchTerm) {\n    return await NewsService.GetNewsSearchList(newsType, searchTerm);\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: style['page-banner__search'],\n    children: /*#__PURE__*/_jsxs(\"form\", {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: style['page-banner__dd'],\n        children: /*#__PURE__*/_jsxs(\"select\", {\n          defaultValue: selectednewsType,\n          onChange: evt => handleNewsTypeChange(evt),\n          children: [/*#__PURE__*/_jsx(\"option\", {\n            value: \"\",\n            children: \"Search all articles\"\n          }), /*#__PURE__*/_jsx(\"option\", {\n            value: NewsTypes.LatestNews,\n            children: \"Latest News\"\n          }), /*#__PURE__*/_jsx(\"option\", {\n            value: NewsTypes.VehicleReviews,\n            children: \"Vehicle Reviews\"\n          }), /*#__PURE__*/_jsx(\"option\", {\n            value: NewsTypes.Blog,\n            children: \"Blog\"\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"w-100 d-inline-flex\",\n        children: [isLoading ? /*#__PURE__*/_jsx(FontAwesomeIcon, {\n          width: \"40\",\n          height: \"50\",\n          icon: faSpinner,\n          className: `fa-spin ${style['page-banner__loading']}`\n        }) : \"\", /*#__PURE__*/_jsx(\"input\", {\n          ref: newsSearchTerm,\n          type: \"search\",\n          placeholder: \"e.g. BMW 3 Series\",\n          autoComplete: \"off\",\n          onChange: () => handleNewsSearch()\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n            width: \"40\",\n            height: \"50\",\n            icon: faSearch,\n            onClick: () => handleNewsSearch()\n          })\n        })]\n      }), searchList.length > 0 && /*#__PURE__*/_jsx(\"div\", {\n        className: style['page-banner_results'],\n        children: /*#__PURE__*/_jsx(\"ul\", {\n          children: searchList.map(result => /*#__PURE__*/_jsx(\"li\", {\n            children: /*#__PURE__*/_jsx(Link, {\n              href: result.url,\n              passHref: true,\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: result.title\n              })\n            })\n          }, `result-${result.url}`))\n        })\n      })]\n    })\n  });\n};\n\nexport default PageBannerSearchNews;","map":null,"metadata":{},"sourceType":"module"}