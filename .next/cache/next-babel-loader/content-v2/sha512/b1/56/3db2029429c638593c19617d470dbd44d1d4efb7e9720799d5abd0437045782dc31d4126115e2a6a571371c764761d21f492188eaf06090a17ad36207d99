{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch, faSpinner } from \"@fortawesome/free-solid-svg-icons\";\nimport style from './page-banner.module.scss';\nimport { ContentService } from 'business-logic/contentService';\n\nconst PageBannerSearchGuides = ({\n  categoryId,\n  categoryList\n}) => {\n  const newsSearchTerm = useRef();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: selectedCategory,\n    1: setSelectedCategory\n  } = useState(categoryId);\n  const {\n    0: searchList,\n    1: setSearchList\n  } = useState([]);\n\n  const handleCategoryChange = evt => setSelectedCategory(evt.currentTarget.value);\n\n  const handleGuideSearch = () => getSearchResults();\n\n  useEffect(() => {\n    getSearchResults();\n  }, [selectedCategory]);\n\n  function getSearchResults() {\n    // @ts-ignore\n    let searchTerm = newsSearchTerm.current.value.toString();\n\n    if (searchTerm.length >= 3) {\n      setIsLoading(true);\n      Promise.resolve(GetGuidesSearchList(selectedCategory, searchTerm)).then(function (data) {\n        setSearchList(data.data);\n        setIsLoading(false);\n      });\n    } else {\n      setSearchList([]);\n    }\n  }\n\n  async function GetGuidesSearchList(categoryId, searchTerm) {\n    return await ContentService.GetGuidesSearchList(categoryId, searchTerm);\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: style['page-banner__search'],\n    children: /*#__PURE__*/_jsxs(\"form\", {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: style['page-banner__dd'],\n        children: /*#__PURE__*/_jsxs(\"select\", {\n          defaultValue: selectedCategory,\n          onChange: evt => handleCategoryChange(evt),\n          children: [/*#__PURE__*/_jsx(\"option\", {\n            value: \"\",\n            children: \"Search all guides\"\n          }), categoryList.map(category => /*#__PURE__*/_jsx(\"option\", {\n            value: category.id,\n            children: category.name\n          }, `cateogry=${category.id}`))]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"w-100 d-inline-flex\",\n        children: [isLoading ? /*#__PURE__*/_jsx(FontAwesomeIcon, {\n          width: \"40\",\n          height: \"50\",\n          icon: faSpinner,\n          className: `fa-spin ${style['page-banner__loading']}`\n        }) : \"\", /*#__PURE__*/_jsx(\"input\", {\n          ref: newsSearchTerm,\n          type: \"search\",\n          placeholder: \"e.g. BMW 3 Series\",\n          autoComplete: \"off\",\n          onChange: () => handleGuideSearch()\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n            width: \"40\",\n            height: \"50\",\n            icon: faSearch,\n            onClick: () => handleGuideSearch()\n          })\n        })]\n      }), searchList.length > 0 && /*#__PURE__*/_jsx(\"div\", {\n        className: style['page-banner_results'],\n        children: /*#__PURE__*/_jsx(\"ul\", {\n          children: searchList.map(result => /*#__PURE__*/_jsx(\"li\", {\n            children: /*#__PURE__*/_jsx(Link, {\n              href: \"advice/\" + result.categoryUrl + \"/\" + result.url,\n              passHref: true,\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: result.pageTitle\n              })\n            })\n          }, `result-${result.url}`))\n        })\n      })]\n    })\n  });\n};\n\nexport default PageBannerSearchGuides;","map":null,"metadata":{},"sourceType":"module"}