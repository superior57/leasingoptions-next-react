{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Modal from 'react-bootstrap/Modal';\nimport SearchButtons from './search-buttons';\nimport SearchMakes from './search-makes';\nimport SearchModels from './search-models';\nimport SearchBodies from './search-bodies';\nimport SearchBudgets from './search-budgets';\nimport SearchDetailed from './search-detailed';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport style from './search.module.scss';\nimport { useDispatch } from 'react-redux';\nimport { connect } from 'react-redux';\nimport { GetSearchFiltersUrl } from '../../helpers/urlHelper';\nimport { LeasingDealTypes } from '../../enums/LeasingDealTypes';\nimport { SearchPanels } from '../../enums/SearchPanels';\nimport { SiteSettings } from '../../environment/siteSettings';\n\nfunction mapStateToProps(state) {\n  return {\n    dealToggle: state.dealSelector,\n    vehicleFilters: state.vehicleFilters,\n    carManufacturerList: state.carManufacturerList,\n    vanManufacturerList: state.vanManufacturerList,\n    userPostcode: state.userPostcode\n  };\n}\n\nvar Search = function Search(_ref) {\n  var onRequestClose = _ref.onRequestClose,\n      title = _ref.title,\n      _ref$activePanel = _ref.activePanel,\n      activePanel = _ref$activePanel === void 0 ? 1 : _ref$activePanel,\n      dealToggle = _ref.dealToggle,\n      carManufacturerList = _ref.carManufacturerList,\n      vanManufacturerList = _ref.vanManufacturerList,\n      vehicleFilters = _ref.vehicleFilters,\n      userPostcode = _ref.userPostcode,\n      otherProps = _objectWithoutProperties(_ref, [\"onRequestClose\", \"title\", \"activePanel\", \"dealToggle\", \"carManufacturerList\", \"vanManufacturerList\", \"vehicleFilters\", \"userPostcode\"]);\n\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      modalCtas = _useState[0],\n      setmodalCtas = _useState[1];\n\n  var _useState2 = useState(title),\n      modalTitle = _useState2[0],\n      setModalTitle = _useState2[1];\n\n  var _useState3 = useState(activePanel),\n      currentPanel = _useState3[0],\n      setCurrentPanel = _useState3[1];\n\n  var _useState4 = useState(''),\n      currentMake = _useState4[0],\n      setCurrentMake = _useState4[1];\n\n  var _useState5 = useState(0),\n      vehicleCount = _useState5[0],\n      setVehicleCount = _useState5[1];\n\n  var handleTitleChange = function handleTitleChange(title) {\n    setModalTitle(title);\n  };\n\n  var handlePanelChange = function handlePanelChange(panel, title) {\n    setCurrentPanel(panel);\n    handleTitleChange(title);\n\n    if (panel === SearchPanels.SearchDetailed) {\n      setmodalCtas(true);\n    } else {\n      setmodalCtas(false);\n    }\n  };\n\n  var handleMakeUpdate = function handleMakeUpdate(make) {\n    return setCurrentMake(make);\n  };\n\n  var handleBackButton = function handleBackButton() {\n    if (currentPanel === SearchPanels.SearchModels && currentMake) {\n      setCurrentMake('');\n    } else {\n      setCurrentPanel(SearchPanels.SearchButtons);\n      handlePanelChange(SearchPanels.SearchButtons, title);\n    }\n  };\n\n  var handleVehicleCountUpdate = function handleVehicleCountUpdate(count) {\n    return setVehicleCount(count);\n  };\n\n  var handleClearButton = function handleClearButton() {\n    dispatch({\n      type: 'RESET_POSTCODE'\n    });\n    dispatch({\n      type: 'UPDATE_ALL_FILTERS',\n      payload: {\n        initialRentals: SiteSettings.DefaultInitialRentals,\n        mileage: SiteSettings.GetDealTypeDefaultMileage(dealToggle)\n      }\n    });\n  };\n\n  useEffect(function () {\n    if (activePanel === SearchPanels.SearchDetailed) {\n      setmodalCtas(true);\n    } else {\n      setmodalCtas(false);\n    }\n  }, [activePanel]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Modal, _objectSpread(_objectSpread({\n      onHide: onRequestClose,\n      centered: true,\n      className: \"search-modal \".concat(currentPanel === SearchPanels.SearchDetailed ? \"search-modal--detailed\" : \"\")\n    }, otherProps), {}, {\n      children: [/*#__PURE__*/_jsx(Modal.Header, {\n        className: \"d-flex flex-nowrap justify-content-center align-items-center\",\n        closeButton: true,\n        children: /*#__PURE__*/_jsxs(Modal.Title, {\n          className: \"text-center mb-0\",\n          children: [modalTitle, \" \", !userPostcode && currentPanel > 1 ? /*#__PURE__*/_jsx(FontAwesomeIcon, {\n            width: \"12\",\n            height: \"24\",\n            icon: faChevronLeft,\n            onClick: function onClick() {\n              return handleBackButton();\n            }\n          }) : null]\n        })\n      }), /*#__PURE__*/_jsx(Modal.Body, {\n        className: \"modal-body--search p-0\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: style['vehicle-search'],\n          children: [currentPanel === SearchPanels.SearchButtons && /*#__PURE__*/_jsx(SearchButtons, {\n            active: true,\n            handlePanelChange: handlePanelChange\n          }), currentPanel === SearchPanels.SearchMakes && /*#__PURE__*/_jsx(SearchMakes, {\n            active: true,\n            makes: dealToggle === LeasingDealTypes.Van ? vanManufacturerList : carManufacturerList\n          }), currentPanel === SearchPanels.SearchModels && /*#__PURE__*/_jsx(SearchModels, {\n            active: true,\n            makes: dealToggle === LeasingDealTypes.Van ? vanManufacturerList : carManufacturerList,\n            handleMakeUpdate: handleMakeUpdate,\n            currentMake: currentMake,\n            dealToggle: dealToggle\n          }), currentPanel === SearchPanels.SearchBodies && /*#__PURE__*/_jsx(SearchBodies, {\n            active: true\n          }), currentPanel === SearchPanels.SearchBudgets && /*#__PURE__*/_jsx(SearchBudgets, {\n            active: true\n          }), currentPanel === SearchPanels.SearchDetailed && /*#__PURE__*/_jsx(SearchDetailed, {\n            active: true,\n            handleVehicleCountUpdate: handleVehicleCountUpdate\n          })]\n        })\n      }), modalCtas && /*#__PURE__*/_jsx(Modal.Footer, {\n        className: \"modal-footer__ctas\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: style['search-ctas'],\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            className: \"btn btn-lg\",\n            onClick: function onClick() {\n              return handleClearButton();\n            },\n            children: \"Clear search\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            className: \"btn btn-primary btn-lg\",\n            children: /*#__PURE__*/_jsx(Link, {\n              passHref: true,\n              href: GetSearchFiltersUrl(dealToggle, userPostcode, vehicleFilters),\n              children: /*#__PURE__*/_jsx(\"a\", {\n                className: \"text-decoration-none\",\n                children: vehicleCount === 0 ? \"No results\" : \"See \" + vehicleCount + \" deals\"\n              })\n            })\n          })]\n        })\n      })]\n    }))\n  });\n};\n\nexport default connect(mapStateToProps)(Search);","map":null,"metadata":{},"sourceType":"module"}