{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport MainLayout from '../../components/layout/main-layout';\nimport PageBanner from '../../components/page-banner';\nimport CardNews from '../../components/card/card-news';\nimport AsideNews from '../../components/layout/aside-news';\nimport PageRelated from '../../components/layout/page-related';\nimport PageUpsell from '../../components/layout/page-upsell';\nimport { NewsTypes } from 'enums/NewsTypes';\nimport wrapper from 'redux/store.tsx/store';\nimport { NewsService } from 'business-logic/newsService';\nimport PageBannerSearchNews from 'components/page-banner/page-banner--searchNews';\nimport { GetNewsCategoryPageTitle, GetNewsCategoryPageMetaDescription, GetNewsCategoryPageKeywords, GetNewsCategoryPageMetaImageDescription } from 'helpers/seoHelper';\nimport { GetCanonicalUrl } from 'helpers/urlHelper';\nimport { getBaseUrl } from 'helpers/urlsHelper';\nimport { GetNewsType } from 'helpers/enumsHelper';\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  const category = context.query.category;\n  const newsType = GetNewsType(category);\n  const categoryNewsPromise = await NewsService.GetAllNewsArticlePreviews(newsType, null, 1, 9);\n  const popularNewsPromise = await NewsService.GetCategoryPopularArticles(newsType);\n  const relatedNewsPromise = await NewsService.GetCategoryRelatedArticles(newsType);\n  const metaData = {\n    title: GetNewsCategoryPageTitle(newsType),\n    description: GetNewsCategoryPageMetaDescription(newsType),\n    canonicalUrl: GetCanonicalUrl(getBaseUrl(context.req.url)),\n    keywords: GetNewsCategoryPageKeywords(),\n    imageUrl: GetNewsCategoryPageMetaImageDescription(newsType)\n  };\n  return {\n    props: {\n      metaData: metaData,\n      category: category,\n      newsType: newsType,\n      categoryNews: categoryNewsPromise.data,\n      popularNews: popularNewsPromise.data,\n      relatedNews: relatedNewsPromise.data\n    }\n  };\n});\nexport default function NewsCategory({\n  category,\n  newsType,\n  categoryNews,\n  popularNews,\n  relatedNews\n}) {\n  const {\n    0: pageResults,\n    1: setPageResults\n  } = useState(categoryNews);\n  const {\n    0: pageIndex,\n    1: setPageIndex\n  } = useState(1);\n\n  const handleReadMore = () => setPageIndex(pageIndex + 1);\n\n  useEffect(() => {\n    Promise.resolve(getMoreArticles(pageIndex)).then(function (data) {\n      setPageResults(data.data);\n    });\n  }, [pageIndex]);\n\n  async function getMoreArticles(pageIndex) {\n    return await NewsService.GetAllNewsArticlePreviews(newsType, null, 1, 9 * pageIndex);\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(PageBanner, {\n      className: `page-banner--${category}`,\n      trustPilot: true,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 pt-md-5\",\n          children: [newsType === NewsTypes.LatestNews && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"text-white\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Latest News\"\n              })\n            }), /*#__PURE__*/_jsx(\"h2\", {\n              className: \"text-white mb-3 mb-md-5\",\n              children: \"Keep up-to-date with the Leasing Lounge. From exciting model launches to tech news, you'll find all the latest vehicle news here.\"\n            })]\n          }), newsType === NewsTypes.VehicleReviews && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"text-white\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Vehicle Reviews\"\n              })\n            }), /*#__PURE__*/_jsx(\"h2\", {\n              className: \"text-white mb-3 mb-md-5\",\n              children: \"Read exclusive model reviews from our experts right here on the Leasing Lounge. The very latest models get put to the test by our drivers.\"\n            })]\n          }), newsType === NewsTypes.Blog && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"text-white\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Blog\"\n              })\n            }), /*#__PURE__*/_jsx(\"h2\", {\n              className: \"text-white mb-3 mb-md-5\",\n              children: \"Whether you're seeking expert advice or just a bit of fun, you've come to the right place. Our blog posts cover all kinds of car-related topics; have a browse right here on the Leasing Lounge.\"\n            })]\n          }), /*#__PURE__*/_jsx(PageBannerSearchNews, {\n            newsType: newsType\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid py-3 py-md-4 pb-md-5 bg-light-grey\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row mb-md-4\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 col-lg-6 d-flex\",\n          children: /*#__PURE__*/_jsx(AsideNews, {\n            popular: true,\n            filters: newsType === NewsTypes.VehicleReviews,\n            social: true,\n            popularNews: popularNews,\n            newsType: newsType,\n            category: category\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 col-lg-18 py-5 py-md-0\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"row no-gutters\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-24 d-lg-none\",\n              children: /*#__PURE__*/_jsx(\"h2\", {\n                children: \"Latest Articles\"\n              })\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"row\",\n            children: [pageResults.dataItems.map((article, index) => /*#__PURE__*/_jsx(\"div\", {\n              className: `col-24 ${index > 2 ? 'col-lg-12' : 'col-lg-8'}  d-flex mb-3`,\n              children: /*#__PURE__*/_jsx(CardNews, {\n                condensed: index > 2 ? true : false,\n                id: `article-${article.id}`,\n                image: article.imageUrl,\n                tag: article.type,\n                link: article.url,\n                title: article.title,\n                date: article.onDate,\n                excerpt: article.description\n              })\n            }, article.id)), pageIndex * 9 < pageResults.totalItemsCount && /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-24 text-center\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                className: \"btn btn-primary btn-lg mt-3\",\n                onClick: () => handleReadMore(),\n                children: \"View More\"\n              })\n            })]\n          })]\n        })]\n      })\n    }), relatedNews.length > 0 && /*#__PURE__*/_jsx(PageRelated, {\n      relatedNews: relatedNews\n    }), /*#__PURE__*/_jsx(PageUpsell, {})]\n  });\n}\n;\nNewsCategory.layout = MainLayout;","map":null,"metadata":{},"sourceType":"module"}