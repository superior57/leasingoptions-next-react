{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState } from 'react';\nimport { isNullOrWhiteSpace } from 'helpers/stringHelper';\nimport MainLayout from 'components/layout/main-layout';\nimport { useRouter } from 'next/router';\nimport AccountAPI from 'API/AccountAPI';\nimport { GetPhoneNumber, isValidPasswordComplexity } from 'helpers/helpers';\nimport Link from 'next/link';\n\nvar CreateAccount = function CreateAccount(_ref) {\n  var account = _ref.account,\n      error = _ref.error,\n      accountId = _ref.accountId;\n\n  var _useState = useState(error),\n      errorMessage = _useState[0],\n      setErrorMessage = _useState[1];\n\n  var _useState2 = useState(null),\n      updatePassword = _useState2[0],\n      setUpdatePassword = _useState2[1];\n\n  var _useState3 = useState(null),\n      confirmPassword = _useState3[0],\n      setConfirmPassword = _useState3[1];\n\n  var router = useRouter();\n\n  var onSubmitHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n\n              if (isValidPasswordComplexity(updatePassword)) {\n                _context.next = 5;\n                break;\n              }\n\n              setErrorMessage(\"Your password must have at least one number, one lowercase and one uppercase letter and at least 6 characters\");\n              _context.next = 21;\n              break;\n\n            case 5:\n              if (!(!isNullOrWhiteSpace(updatePassword) && !isNullOrWhiteSpace(confirmPassword))) {\n                _context.next = 20;\n                break;\n              }\n\n              if (!(account == null || (account === null || account === void 0 ? void 0 : account.accountId) == null)) {\n                _context.next = 10;\n                break;\n              }\n\n              setErrorMessage(\"We cant find your account, please speak to an account manager.\");\n              _context.next = 18;\n              break;\n\n            case 10:\n              if (!(updatePassword === confirmPassword)) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.next = 13;\n              return AccountAPI.createPassword(accountId, confirmPassword, account.email);\n\n            case 13:\n              result = _context.sent;\n\n              if (result) {\n                localStorage.removeItem(\"lo-account-credentials\");\n                localStorage.setItem(\"lo-account-credentials\", JSON.stringify(account));\n                router.push(\"/account/home\");\n              } else {\n                setErrorMessage('Oops something went wrong, please contact your account manager.');\n              }\n\n              _context.next = 18;\n              break;\n\n            case 17:\n              setErrorMessage('Your passwords do not match');\n\n            case 18:\n              _context.next = 21;\n              break;\n\n            case 20:\n              setErrorMessage('Please enter and confirm your new password');\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmitHandler(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleUpdatePassword = function handleUpdatePassword(event) {\n    setUpdatePassword(event.target.value);\n  };\n\n  var handleConfirmPassword = function handleConfirmPassword(event) {\n    setConfirmPassword(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid bg-white py-3 py-md-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 col-md-20 col-lg-18 mx-auto\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-blue text-center mb-3\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"My Account Area\"\n            })\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"h5 text-center text-mid-grey\",\n            children: \"View your leasing account & benefit from full control...\"\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid bg-light-grey py-4\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 col-md-12 d-flex mb-3 mb-md-0\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-100 d-flex flex-wrap justify-content-start align-items-start bg-white\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 d-block p-3 bg-charcoal h3 text-center text-white\",\n              children: \"Create Account\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 d-block bg-white p-3\",\n              children: /*#__PURE__*/_jsxs(\"form\", {\n                onSubmit: onSubmitHandler,\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-24\",\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"alert alert-danger \".concat(errorMessage ? \"\" : \"d-none\"),\n                      role: \"alert\",\n                      children: errorMessage\n                    })\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"createPassword\",\n                      children: \"Your email\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"email\",\n                      type: \"text\",\n                      className: \"form-control\",\n                      disabled: true,\n                      defaultValue: account === null || account === void 0 ? void 0 : account.email\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"accountNumber\",\n                      children: \"Your account number\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"accountNumber\",\n                      type: \"text\",\n                      className: \"form-control\",\n                      disabled: true,\n                      defaultValue: account === null || account === void 0 ? void 0 : account.accountNumber\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"createPassword\",\n                      children: \"Create new password\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"createPassword\",\n                      type: \"password\",\n                      className: \"form-control\",\n                      onChange: function onChange(e) {\n                        return handleUpdatePassword(e);\n                      }\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"confirmPassword\",\n                      children: \"Confirm new password\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"confirmPassword\",\n                      type: \"password\",\n                      className: \"form-control\",\n                      onChange: function onChange(e) {\n                        return handleConfirmPassword(e);\n                      }\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col text-right\",\n                    children: /*#__PURE__*/_jsx(\"button\", {\n                      className: \"btn btn-primary btn-lg btn-fluid-xs\",\n                      type: \"submit\",\n                      children: \"Create\"\n                    })\n                  })\n                })]\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 col-md-12 d-flex\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-100 d-flex flex-wrap justify-content-start align-items-start bg-white\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 d-block p-3 bg-charcoal h3 text-center text-white\",\n              children: \"New Customer?\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-100 d-block bg-white p-3 text-center\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                children: \"We aren\\u2019t \\u2018just another leasing company\\u2019 check out\"\n              }), /*#__PURE__*/_jsx(Link, {\n                passHref: true,\n                href: \"/car-leasing-faqs?search=why\",\n                children: /*#__PURE__*/_jsx(\"button\", {\n                  className: \"btn btn-primary btn-lg mb-3\",\n                  children: \"WHY LEASE WITH US?\"\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                children: \"Already know how great we are...  then take a look at our\"\n              }), /*#__PURE__*/_jsx(Link, {\n                passHref: true,\n                href: \"/car-leasing-deals\",\n                children: /*#__PURE__*/_jsx(\"button\", {\n                  className: \"btn btn-primary btn-lg mb-3\",\n                  children: \"SPECIAL OFFERS\"\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                children: \"We have a unique team of leasing experts here at Leasing Options who can assist you with finding your perfect vehicle\"\n              }), /*#__PURE__*/_jsxs(\"strong\", {\n                className: \"text-red h5\",\n                children: [\"Telephone: \", /*#__PURE__*/_jsx(\"a\", {\n                  href: \"tel:\".concat(GetPhoneNumber(false)),\n                  className: \"text-mid-grey\",\n                  children: GetPhoneNumber(false)\n                })]\n              })]\n            })]\n          })\n        })]\n      })\n    })]\n  });\n};\n\nCreateAccount.layout = MainLayout;\nexport var __N_SSP = true;\nexport default CreateAccount;","map":null,"metadata":{},"sourceType":"module"}