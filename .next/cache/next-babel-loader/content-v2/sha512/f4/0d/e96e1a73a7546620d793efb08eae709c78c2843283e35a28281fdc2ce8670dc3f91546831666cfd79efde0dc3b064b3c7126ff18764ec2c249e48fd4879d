{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport AccountAPI from 'API/AccountAPI';\nimport AccountLayout from 'components/layout/account-layout';\n\nconst AccountDocumentsPage = () => {\n  const {\n    0: documents,\n    1: setDocuments\n  } = useState([]);\n  const {\n    0: name,\n    1: setName\n  } = useState();\n  const {\n    0: comments,\n    1: setComments\n  } = useState();\n  const {\n    0: fileName,\n    1: setFileName\n  } = useState();\n  const {\n    0: fileType,\n    1: setFileType\n  } = useState();\n  const {\n    0: upload,\n    1: setUpload\n  } = useState();\n  const {\n    0: customer,\n    1: setCustomer\n  } = useState();\n  useEffect(() => {\n    setCustomer(JSON.parse(localStorage.getItem('lo-account-credentials')));\n  }, []);\n  useEffect(() => {\n    if (customer !== null && customer !== void 0 && customer.accountId) {\n      AccountAPI.getDocuments(customer === null || customer === void 0 ? void 0 : customer.accountId).then(data => {\n        if (data.data != null) {\n          setDocuments(data.data);\n        }\n      });\n    }\n  }, [customer === null || customer === void 0 ? void 0 : customer.accountId]);\n\n  const updateComments = event => {\n    setComments(event.target.value);\n  };\n\n  const updateName = event => {\n    setName(event.target.value);\n  };\n\n  const onSubmitHandler = () => {\n    let obj = {\n      accountId: customer.accountId,\n      name: name,\n      comments: comments,\n      fileName: fileName,\n      fileType: fileType,\n      fileData: upload === null || upload === void 0 ? void 0 : upload.toString()\n    };\n    AccountAPI.saveDocument(obj);\n    return false;\n  };\n\n  const handleFile = event => {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      var _reader$result;\n\n      setFileName(file.name);\n      setFileType(file.type);\n      setUpload((_reader$result = reader.result) === null || _reader$result === void 0 ? void 0 : _reader$result.toString().split(',').pop());\n    };\n\n    reader.onerror = err => {// reject(err);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  return /*#__PURE__*/_jsx(AccountLayout, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"container-fluid bg-light-grey py-3 py-md-5\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 mb-3\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"To assist with your application please upload the required documents here. Press the upload file button and follow the on screen instructions.\"\n            })\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Please give the document a name and press upload.\"\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 mb-3\",\n          children: [/*#__PURE__*/_jsx(\"h2\", {\n            className: \"text-default\",\n            children: \"Upload document\"\n          }), /*#__PURE__*/_jsxs(\"form\", {\n            onSubmit: onSubmitHandler,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"col-24 col-md-12 mb-3 py-1\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"file\",\n                  onChange: e => handleFile(e)\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-24 col-md-12 mb-3\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  onChange: e => updateName(e),\n                  placeholder: \"Name\"\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"col mb-3\",\n                children: /*#__PURE__*/_jsx(\"textarea\", {\n                  className: \"form-control\",\n                  placeholder: \"Comments\",\n                  onChange: e => updateComments(e)\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"col text-right\",\n                children: /*#__PURE__*/_jsx(\"button\", {\n                  className: \"btn btn-primary btn-lg btn-fluid-xs\",\n                  type: \"submit\",\n                  children: \"Upload\"\n                })\n              })\n            })]\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 mb-3\",\n          children: /*#__PURE__*/_jsx(\"h2\", {\n            className: \"text-default\",\n            children: \"Your documents\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: documents.map(document => /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 col-md-12 mb-2\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"w-100 bg-white px-3 py-1\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"col-16 d-flex flex-wrap justify-content-center align-items-center border-right border-light\",\n                children: [/*#__PURE__*/_jsx(\"strong\", {\n                  className: \"w-100 d-block text-limit\",\n                  children: document.fileName\n                }), /*#__PURE__*/_jsxs(\"span\", {\n                  className: \"w-100 d-block text-limit\",\n                  children: [document.fileSize, \" - \", document.createdOn]\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-8 d-flex flex-wrap justify-content-center align-items-center\",\n                children: /*#__PURE__*/_jsxs(\"a\", {\n                  href: 'http://localhost:27381/api/documents/download?id=' + document.id,\n                  className: \"button button-brand\",\n                  rel: \"noopener noreferrer\",\n                  target: \"blank\",\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faSearch,\n                    className: \"mr-1 ml-0\"\n                  }), \" View\"]\n                })\n              })]\n            })\n          })\n        }, document.createdOn))\n      })]\n    })\n  });\n};\n\nexport default AccountDocumentsPage;","map":null,"metadata":{},"sourceType":"module"}