{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _ from 'underscore';\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Modal from 'react-bootstrap/Modal';\nimport { GarageStorageHelper } from '../../garage/_libs/helpers/garageStorageHelper';\nimport { HistoryStorageHelper } from '../../history/_libs/helpers/historyStorageHelper';\nimport { VehiclesStorageProvider } from '../../../helpers/vehiclesStorageProvider';\nimport { VehicleStorageTypes } from \"enums/VehicleStorageTypes\";\nimport { logLabelEvent } from \"helpers/analytics\";\nimport { setCookie } from 'nookies';\n\nvar ModalGarage = function ModalGarage(_ref) {\n  var onRequestClose = _ref.onRequestClose,\n      otherProps = _objectWithoutProperties(_ref, [\"onRequestClose\"]);\n\n  var router = useRouter();\n\n  var orderedStorageItems = _.sortBy(HistoryStorageHelper.getItems(true), function (orderedStorageItem) {\n    return orderedStorageItem.timeStamp;\n  });\n\n  var slicedStorageItems = orderedStorageItems.reverse().slice(0, VehiclesStorageProvider.getTriggerMaxSize(VehicleStorageTypes.History));\n\n  var _useState = useState(slicedStorageItems),\n      vehicleHistory = _useState[0],\n      setVehicleHistory = _useState[1];\n\n  var expiryDate = new Date();\n  expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n\n  var handleClose = function handleClose() {\n    setCookie(null, \"HasClosedGaragePromo\", \"true\", {\n      expires: expiryDate,\n      path: '/'\n    });\n    logLabelEvent('my-garage-modal', 'decline', 'modal');\n  };\n\n  var addToGarage = function addToGarage() {\n    vehicleHistory.map(function (item) {\n      GarageStorageHelper.addOrUpdateItem(item.vehicle);\n    });\n    router.push('/my-garage?referrer=modal');\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Modal, _objectSpread(_objectSpread({\n      className: \"modal--compare\",\n      onHide: onRequestClose,\n      centered: true\n    }, otherProps), {}, {\n      children: [/*#__PURE__*/_jsx(Modal.Header, {\n        className: \"d-flex flex-nowrap justify-content-center align-items-center\",\n        closeButton: true,\n        children: /*#__PURE__*/_jsx(Modal.Title, {\n          className: \"text-center capitalize mb-0\",\n          children: \"My Garage\"\n        })\n      }), /*#__PURE__*/_jsxs(Modal.Body, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 text-center\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"We've noticed you've been looking at the following vehicles:\"\n            })\n          })\n        }), (vehicleHistory === null || vehicleHistory === void 0 ? void 0 : vehicleHistory.length) > 0 && /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: vehicleHistory.map(function (vehicle) {\n            var _vehicle$summary, _vehicle$summary2, _vehicle$summary3, _vehicle$summary4, _vehicle$summary5, _vehicle$summary6, _vehicle$summary7;\n\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"col-24 col-md-12 \".concat((vehicleHistory === null || vehicleHistory === void 0 ? void 0 : vehicleHistory.length) > 2 ? 'col-lg-6' : '', \" mb-md-3\"),\n              children: [((_vehicle$summary = vehicle.summary) === null || _vehicle$summary === void 0 ? void 0 : _vehicle$summary.imageUrl) && /*#__PURE__*/_jsx(\"img\", {\n                \"data-src\": \"\".concat(process.env.NEXT_PUBLIC_CDN, \"/\").concat((_vehicle$summary2 = vehicle.summary) === null || _vehicle$summary2 === void 0 ? void 0 : _vehicle$summary2.imageUrl),\n                className: \"img-fluid lazyload mb-2\",\n                alt: \"\".concat((_vehicle$summary3 = vehicle.summary) === null || _vehicle$summary3 === void 0 ? void 0 : _vehicle$summary3.make, \" \").concat((_vehicle$summary4 = vehicle.summary) === null || _vehicle$summary4 === void 0 ? void 0 : _vehicle$summary4.model)\n              }), /*#__PURE__*/_jsxs(\"small\", {\n                className: \"w-100 d-block mb-2 text-center\",\n                children: [/*#__PURE__*/_jsxs(\"strong\", {\n                  children: [(_vehicle$summary5 = vehicle.summary) === null || _vehicle$summary5 === void 0 ? void 0 : _vehicle$summary5.make, \" \", (_vehicle$summary6 = vehicle.summary) === null || _vehicle$summary6 === void 0 ? void 0 : _vehicle$summary6.model]\n                }), \" \", /*#__PURE__*/_jsx(\"br\", {}), (_vehicle$summary7 = vehicle.summary) === null || _vehicle$summary7 === void 0 ? void 0 : _vehicle$summary7.derivative]\n              })]\n            });\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 text-center\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"Did you know, you can add them to your garage and compare them?\"\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(Modal.Footer, {\n        className: \"d-flex flex-md-nowrap justify-content-center align-items-center\",\n        children: [/*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-danger btn-lg btn-fluid-xs mb-2 mb-md-0 mr-sm-3 garage-modal-dismiss\",\n          onClick: function onClick() {\n            handleClose();\n            onRequestClose();\n          },\n          children: \"Dismiss\"\n        }), /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-primary btn-lg btn-fluid-xs garage-modal-compare\",\n          onClick: addToGarage,\n          children: \"Compare Now\"\n        })]\n      })]\n    }))\n  });\n};\n\nexport default ModalGarage;","map":null,"metadata":{},"sourceType":"module"}