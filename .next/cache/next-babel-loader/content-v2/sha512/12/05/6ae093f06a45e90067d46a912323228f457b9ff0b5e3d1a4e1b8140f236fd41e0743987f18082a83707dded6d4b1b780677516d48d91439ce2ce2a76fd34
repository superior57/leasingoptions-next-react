{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport MainLayout from '../components/layout/main-layout';\nimport FaqSearch from '../components/layout/faq-search';\nimport FaqResults from '../components/layout/faq-results';\nimport FaqList from '../components/layout/faq-list';\nimport FaqContent from '../components/layout/faq-content';\nimport { ContentService } from 'business-logic/contentService';\nimport wrapper from 'redux/store.tsx/store';\nimport { GetCanonicalUrl } from 'helpers/urlHelper';\nimport { getBaseUrl } from 'helpers/urlsHelper';\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  const faqSearch = context.query.search;\n  const faqList = await ContentService.GetFaqListAll();\n  const metaData = {\n    title: `Frequently Asked Car Leasing Questions | Leasing Options`,\n    description: `Find answers to some of the most frequently asked Car Leasing questions or contact us directly to get an answer.`,\n    canonicalUrl: GetCanonicalUrl(getBaseUrl(context.req.url)),\n    keywords: \"Personal Car Leasing, Personal Car Lease Deals, Personal Car Leasing Manchester, Contract hire\"\n  };\n  return {\n    props: {\n      metaData: metaData,\n      faqSearch: faqSearch,\n      faqList: faqList.data\n    }\n  };\n});\nexport default function LeasingFaqs({\n  faqSearch,\n  faqList\n}) {\n  const {\n    0: searchTerm,\n    1: setSearchTerm\n  } = useState(faqSearch ? faqSearch : '');\n  const {\n    0: searchList,\n    1: setSearchList\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: currentPage,\n    1: setCurrentPage\n  } = useState(1);\n  const {\n    0: resultsPerPage,\n    1: setResultsPerPage\n  } = useState(5);\n  const {\n    0: totalResults,\n    1: setTotalResults\n  } = useState(0);\n  const {\n    0: pageCount,\n    1: setPagecount\n  } = useState(1);\n\n  const handlePageSize = pagesize => setResultsPerPage(pagesize);\n\n  const handlePageClick = (evt, page) => {\n    evt.preventDefault();\n    setCurrentPage(page);\n  };\n\n  const handleFaqSearch = searchTerm => {\n    setSearchTerm(searchTerm);\n    GetFaqSearchResults(searchTerm, currentPage, resultsPerPage);\n  };\n\n  const handleResultsClear = () => {\n    setSearchTerm('');\n    setSearchList([]);\n    setIsLoading(false);\n    setCurrentPage(1);\n    setResultsPerPage(5);\n    setTotalResults(0);\n    setPagecount(1);\n  };\n\n  useEffect(() => {\n    GetFaqSearchResults(searchTerm, currentPage, resultsPerPage);\n  }, [currentPage, resultsPerPage]);\n\n  function GetFaqSearchResults(searchTerm, currentPage, resultsPerPage) {\n    if (searchTerm.length >= 3) {\n      setIsLoading(true);\n      Promise.resolve(GetFaqSearchPromise(searchTerm, currentPage, resultsPerPage)).then(function (data) {\n        setSearchList(data.data);\n        setTotalResults(data.data.totalItemsCount);\n        setPagecount(data.data.totalPagesCount);\n        setIsLoading(false);\n      });\n    } else {\n      setSearchList([]);\n      setSearchTerm('');\n    }\n  }\n\n  async function GetFaqSearchPromise(searchTerm, currentPage, resultsPerPage) {\n    return await ContentService.GetFaqSearchResults(searchTerm, currentPage, resultsPerPage);\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid py-3 py-md-5\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-24\",\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              children: \"Car Leasing FAQs\"\n            }), /*#__PURE__*/_jsx(\"h2\", {\n              className: \"text-mint\",\n              children: \"Have a question? Try typing a few words into out search box\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24\",\n            children: /*#__PURE__*/_jsx(FaqSearch, {\n              defaultValue: faqSearch ? faqSearch : \"\",\n              handleFaqSearch: handleFaqSearch,\n              isLoading: isLoading,\n              handleResultsClear: handleResultsClear\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24\",\n            children: /*#__PURE__*/_jsx(FaqResults, {\n              searchList: searchList,\n              searchTerm: searchTerm,\n              currentPage: currentPage,\n              resultsPerPage: resultsPerPage,\n              totalResults: totalResults,\n              pageCount: pageCount,\n              handlePageSize: handlePageSize,\n              handlePageClick: handlePageClick\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24\",\n            children: /*#__PURE__*/_jsx(FaqList, {\n              faqs: faqList\n            })\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid py-3 py-md-5 bg-light-grey\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"bg-faq-area\",\n              children: [/*#__PURE__*/_jsx(\"h1\", {\n                children: \"All Questions\"\n              }), faqList.map(faqGroup => /*#__PURE__*/_jsxs(\"div\", {\n                children: [/*#__PURE__*/_jsx(\"h2\", {\n                  children: faqGroup.name.replace('amp;', '')\n                }), /*#__PURE__*/_jsx(FaqContent, {\n                  faqs: faqGroup.items\n                })]\n              }, faqGroup.id))]\n            })\n          })\n        })\n      })\n    })]\n  });\n}\nLeasingFaqs.layout = MainLayout;","map":null,"metadata":{},"sourceType":"module"}