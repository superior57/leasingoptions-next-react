{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { isNullOrWhiteSpace } from 'helpers/stringHelper';\nimport MainLayout from 'components/layout/main-layout';\nimport wrapper from 'redux/store.tsx/store';\nimport { useRouter } from 'next/router';\nimport AccountAPI from 'API/AccountAPI';\nimport { GetPhoneNumber, isValidPasswordComplexity } from 'helpers/helpers';\nimport Link from 'next/link';\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  var _context$query, _context$query2;\n\n  const accountId = context !== null && context !== void 0 && (_context$query = context.query) !== null && _context$query !== void 0 && _context$query.id ? context === null || context === void 0 ? void 0 : (_context$query2 = context.query) === null || _context$query2 === void 0 ? void 0 : _context$query2.id.toString() : \"\";\n\n  if (isNullOrWhiteSpace(accountId)) {\n    context.res.writeHead(302, {\n      Location: '/account/login'\n    });\n    context.res.end();\n    return;\n  }\n\n  ;\n  const getAccount = await AccountAPI.getAccount(accountId);\n  let customerEmail = \"\";\n  let error = null;\n\n  if (getAccount.isSucceed && (getAccount === null || getAccount === void 0 ? void 0 : getAccount.data) != null) {\n    var _getAccount$data;\n\n    customerEmail = getAccount === null || getAccount === void 0 ? void 0 : (_getAccount$data = getAccount.data) === null || _getAccount$data === void 0 ? void 0 : _getAccount$data.email;\n  } else {\n    error = \"We cant find your account, please speak to an account manager.\";\n  }\n\n  return {\n    props: {\n      account: getAccount === null || getAccount === void 0 ? void 0 : getAccount.data,\n      error: error,\n      accountId: accountId\n    }\n  };\n});\n\nconst CreateAccount = ({\n  account,\n  error,\n  accountId\n}) => {\n  const {\n    0: errorMessage,\n    1: setErrorMessage\n  } = useState(error);\n  const {\n    0: updatePassword,\n    1: setUpdatePassword\n  } = useState(null);\n  const {\n    0: confirmPassword,\n    1: setConfirmPassword\n  } = useState(null);\n  const router = useRouter();\n\n  const onSubmitHandler = async event => {\n    event.preventDefault();\n\n    if (!isValidPasswordComplexity(updatePassword)) {\n      setErrorMessage(`Your password must have at least one number, one lowercase and one uppercase letter and at least 6 characters`);\n    } else if (!isNullOrWhiteSpace(updatePassword) && !isNullOrWhiteSpace(confirmPassword)) {\n      if (account == null || (account === null || account === void 0 ? void 0 : account.accountId) == null) {\n        setErrorMessage(\"We cant find your account, please speak to an account manager.\");\n      } else if (updatePassword === confirmPassword) {\n        let result = await AccountAPI.createPassword(accountId, confirmPassword, account.email);\n\n        if (result) {\n          localStorage.removeItem(`lo-account-credentials`);\n          localStorage.setItem(`lo-account-credentials`, JSON.stringify(account));\n          router.push(`/account/home`);\n        } else {\n          setErrorMessage('Oops something went wrong, please contact your account manager.');\n        }\n      } else {\n        setErrorMessage('Your passwords do not match');\n      }\n    } else {\n      setErrorMessage('Please enter and confirm your new password');\n    }\n  };\n\n  const handleUpdatePassword = event => {\n    setUpdatePassword(event.target.value);\n  };\n\n  const handleConfirmPassword = event => {\n    setConfirmPassword(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid bg-white py-3 py-md-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 col-md-20 col-lg-18 mx-auto\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-blue text-center mb-3\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"My Account Area\"\n            })\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"h5 text-center text-mid-grey\",\n            children: \"View your leasing account & benefit from full control...\"\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid bg-light-grey py-4\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 col-md-12 d-flex mb-3 mb-md-0\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-100 d-flex flex-wrap justify-content-start align-items-start bg-white\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 d-block p-3 bg-charcoal h3 text-center text-white\",\n              children: \"Create Account\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 d-block bg-white p-3\",\n              children: /*#__PURE__*/_jsxs(\"form\", {\n                onSubmit: onSubmitHandler,\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-24\",\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: `alert alert-danger ${errorMessage ? \"\" : \"d-none\"}`,\n                      role: \"alert\",\n                      children: errorMessage\n                    })\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"createPassword\",\n                      children: \"Your email\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"email\",\n                      type: \"text\",\n                      className: \"form-control\",\n                      disabled: true,\n                      defaultValue: account === null || account === void 0 ? void 0 : account.email\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"accountNumber\",\n                      children: \"Your account number\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"accountNumber\",\n                      type: \"text\",\n                      className: \"form-control\",\n                      disabled: true,\n                      defaultValue: account === null || account === void 0 ? void 0 : account.accountNumber\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"createPassword\",\n                      children: \"Create new password\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"createPassword\",\n                      type: \"password\",\n                      className: \"form-control\",\n                      onChange: e => handleUpdatePassword(e)\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-24 col-md-12 mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      htmlFor: \"confirmPassword\",\n                      children: \"Confirm new password\"\n                    }), /*#__PURE__*/_jsx(\"input\", {\n                      id: \"confirmPassword\",\n                      type: \"password\",\n                      className: \"form-control\",\n                      onChange: e => handleConfirmPassword(e)\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col text-right\",\n                    children: /*#__PURE__*/_jsx(\"button\", {\n                      className: \"btn btn-primary btn-lg btn-fluid-xs\",\n                      type: \"submit\",\n                      children: \"Create\"\n                    })\n                  })\n                })]\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 col-md-12 d-flex\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-100 d-flex flex-wrap justify-content-start align-items-start bg-white\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 d-block p-3 bg-charcoal h3 text-center text-white\",\n              children: \"New Customer?\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-100 d-block bg-white p-3 text-center\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                children: \"We aren\\u2019t \\u2018just another leasing company\\u2019 check out\"\n              }), /*#__PURE__*/_jsx(Link, {\n                passHref: true,\n                href: \"/car-leasing-faqs?search=why\",\n                children: /*#__PURE__*/_jsx(\"button\", {\n                  className: \"btn btn-primary btn-lg mb-3\",\n                  children: \"WHY LEASE WITH US?\"\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                children: \"Already know how great we are...  then take a look at our\"\n              }), /*#__PURE__*/_jsx(Link, {\n                passHref: true,\n                href: \"/car-leasing-deals\",\n                children: /*#__PURE__*/_jsx(\"button\", {\n                  className: \"btn btn-primary btn-lg mb-3\",\n                  children: \"SPECIAL OFFERS\"\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                children: \"We have a unique team of leasing experts here at Leasing Options who can assist you with finding your perfect vehicle\"\n              }), /*#__PURE__*/_jsxs(\"strong\", {\n                className: \"text-red h5\",\n                children: [\"Telephone: \", /*#__PURE__*/_jsx(\"a\", {\n                  href: `tel:${GetPhoneNumber(false)}`,\n                  className: \"text-mid-grey\",\n                  children: GetPhoneNumber(false)\n                })]\n              })]\n            })]\n          })\n        })]\n      })\n    })]\n  });\n};\n\nCreateAccount.layout = MainLayout;\nexport default CreateAccount;","map":null,"metadata":{},"sourceType":"module"}