{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport AccountAPI from 'API/AccountAPI';\nimport AccountAlerts from 'components/account/account-alerts/account-alerts';\nimport AccountCarousel from 'components/account/account-carousel/account-carousel';\nimport AccountDetails from 'components/account/account-details/account-details';\nimport AccountManager from 'components/account/account-manager';\nimport AccountMileage from 'components/account/account-mileage/account-mileage';\nimport AccountUseful from 'components/account/account-useful/account-useful';\nimport AccountLayout from 'components/layout/account-layout';\nimport React, { useState, useEffect } from 'react';\nimport { defaultDealSheet } from '../../components/account/defaultDealSheet';\n\nvar AccountHomePage = function AccountHomePage() {\n  var _useState = useState(),\n      customer = _useState[0],\n      setCustomer = _useState[1];\n\n  useEffect(function () {\n    setCustomer(JSON.parse(localStorage.getItem('lo-account-credentials')));\n  }, []);\n\n  var _useState2 = useState([]),\n      contracts = _useState2[0],\n      setContracts = _useState2[1];\n\n  var _useState3 = useState(defaultDealSheet),\n      currentContract = _useState3[0],\n      setCurrentContract = _useState3[1];\n\n  var _useState4 = useState(false),\n      vehicleSelect = _useState4[0],\n      setVehicleSelect = _useState4[1];\n\n  var _useState5 = useState(0),\n      currentId = _useState5[0],\n      setCurrentId = _useState5[1];\n\n  useEffect(function () {\n    if (customer !== null && customer !== void 0 && customer.accountId) {\n      AccountAPI.getContracts(customer === null || customer === void 0 ? void 0 : customer.accountId).then(function (data) {\n        var contractData = data === null || data === void 0 ? void 0 : data.data;\n\n        if (contractData != null && (contractData === null || contractData === void 0 ? void 0 : contractData.length) > 0) {\n          setContracts(contractData);\n          setCurrentContract(contractData[currentId]);\n        }\n      });\n    }\n  }, [customer === null || customer === void 0 ? void 0 : customer.accountId, currentId]);\n\n  var handleVehicleClick = function handleVehicleClick(vehicleId) {\n    setCurrentId(vehicleId);\n    setVehicleSelect(false);\n  };\n\n  var handleDropdownClick = function handleDropdownClick() {\n    setVehicleSelect(!vehicleSelect);\n  };\n\n  var handleSmsChange = function handleSmsChange(smsNumber) {\n    var smsData = {\n      accountId: customer === null || customer === void 0 ? void 0 : customer.accountId,\n      dealsheetId: currentContract === null || currentContract === void 0 ? void 0 : currentContract.dealsheetId,\n      number: smsNumber\n    };\n    AccountAPI.setSmsNumber(smsData).then(function (data) {\n      var obj = Object.assign({}, currentContract);\n      obj.renewalAlertSmsNumber = parseInt(smsNumber);\n      setCurrentContract(obj);\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsx(AccountLayout, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-fluid bg-light-grey py-3 py-md-5\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 col-md-14\",\n          children: [/*#__PURE__*/_jsx(AccountManager, {}), (contracts === null || contracts === void 0 ? void 0 : contracts.length) > 0 && currentContract && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(AccountCarousel, {\n              vehicleSelect: vehicleSelect,\n              contracts: contracts,\n              currentContract: currentContract,\n              handleDropdownClick: handleDropdownClick,\n              handleVehicleClick: handleVehicleClick\n            }), /*#__PURE__*/_jsx(AccountDetails, {\n              currentContract: currentContract\n            }), /*#__PURE__*/_jsx(AccountAlerts, {\n              currentContract: currentContract,\n              handleSmsChange: handleSmsChange\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 col-md-10\",\n          children: (contracts === null || contracts === void 0 ? void 0 : contracts.length) > 0 && currentContract && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(AccountUseful, {\n              funder: currentContract === null || currentContract === void 0 ? void 0 : currentContract.funder\n            }), /*#__PURE__*/_jsx(AccountMileage, {\n              currentContract: currentContract\n            })]\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default AccountHomePage;","map":null,"metadata":{},"sourceType":"module"}