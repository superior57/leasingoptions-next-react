{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEnvelope, faPhone, faSms, faMailBulk } from \"@fortawesome/free-solid-svg-icons\";\nimport { toast } from 'react-toastify';\nimport AccountAPI from 'API/AccountAPI';\nimport AccountLayout from 'components/layout/account-layout';\n\nconst AccountPreferencesPage = () => {\n  const {\n    0: activePreferences,\n    1: setActivePreferences\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: buttonText,\n    1: setButtonText\n  } = useState(\"Submit\");\n  const {\n    0: customer,\n    1: setCustomer\n  } = useState();\n  useEffect(() => {\n    setCustomer(JSON.parse(localStorage.getItem('lo-account-credentials')));\n  }, []);\n  useEffect(() => {\n    if (customer !== null && customer !== void 0 && customer.accountId) {\n      AccountAPI.getMarketingPreferences(customer === null || customer === void 0 ? void 0 : customer.accountId).then(data => {\n        if (data.data != null) {\n          setActivePreferences(data.data);\n          setLoading(false);\n        }\n      });\n    }\n  }, [customer === null || customer === void 0 ? void 0 : customer.accountId]);\n\n  const onChangeHandler = event => {\n    setButtonText(\"Submit\");\n    var data = [...activePreferences];\n    var index = data.indexOf(parseInt(event.target.value));\n\n    if (event.target.checked) {\n      data.push(parseInt(event.target.value));\n    } else {\n      data.splice(index, 1);\n    }\n\n    setActivePreferences(data);\n  };\n\n  const onClickHandler = () => {\n    setLoading(true);\n    setButtonText(\"Saving\");\n    toast.info(\"Your preferences are being saved\", {\n      position: toast.POSITION.TOP_RIGHT\n    });\n    var obj = {\n      accountId: customer.accountId,\n      allowedPermissions: activePreferences\n    };\n    AccountAPI.saveMarketingPreferences(obj).then(data => {\n      setLoading(false);\n      setButtonText(\"Saved\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(AccountLayout, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: `loading justify-content-center align-items-center ${!loading ? \"d-none\" : \"d-flex\"}`,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"spinner-border text-light\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsx(\"span\", {\n          className: \"sr-only\",\n          children: \"Loading...\"\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-fluid bg-light-grey py-3 py-md-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-24 mb-3\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                children: /*#__PURE__*/_jsx(\"strong\", {\n                  children: \"From time to time we'll choose to send you communications, please select by clicking the icon below how you'll like to hear from us. You can change these at any time.\"\n                })\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"col-24\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: `contact-type ${activePreferences.indexOf(1) !== -1 ? \"is-active\" : \"\"}`,\n                children: /*#__PURE__*/_jsxs(\"label\", {\n                  htmlFor: \"email\",\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faEnvelope,\n                    className: \"mr-1 ml-0\"\n                  }), \"Email\", /*#__PURE__*/_jsx(\"input\", {\n                    type: \"checkbox\",\n                    checked: activePreferences.indexOf(1) !== -1,\n                    id: \"email\",\n                    name: \"email\",\n                    value: \"1\",\n                    className: \"ml-2\",\n                    onChange: evt => onChangeHandler(evt)\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: `contact-type ${activePreferences.indexOf(4) !== -1 ? \"is-active\" : \"\"}`,\n                children: /*#__PURE__*/_jsxs(\"label\", {\n                  htmlFor: \"telephone\",\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faPhone,\n                    className: \"mr-1 ml-0\"\n                  }), \"Telephone\", /*#__PURE__*/_jsx(\"input\", {\n                    type: \"checkbox\",\n                    checked: activePreferences.indexOf(4) !== -1,\n                    id: \"telephone\",\n                    name: \"telephone\",\n                    value: \"4\",\n                    className: \"ml-2\",\n                    onChange: evt => onChangeHandler(evt)\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: `contact-type ${activePreferences.indexOf(3) !== -1 ? \"is-active\" : \"\"}`,\n                children: /*#__PURE__*/_jsxs(\"label\", {\n                  htmlFor: \"sms\",\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faSms,\n                    className: \"mr-1 ml-0\"\n                  }), \"SMS\", /*#__PURE__*/_jsx(\"input\", {\n                    type: \"checkbox\",\n                    checked: activePreferences.indexOf(3) !== -1,\n                    id: \"sms\",\n                    name: \"sms\",\n                    value: \"3\",\n                    className: \"ml-2\",\n                    onChange: evt => onChangeHandler(evt)\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: `contact-type ${activePreferences.indexOf(2) !== -1 ? \"is-active\" : \"\"}`,\n                children: /*#__PURE__*/_jsxs(\"label\", {\n                  htmlFor: \"post\",\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faMailBulk,\n                    className: \"mr-1 ml-0\"\n                  }), \"Post\", /*#__PURE__*/_jsx(\"input\", {\n                    type: \"checkbox\",\n                    checked: activePreferences.indexOf(2) !== -1,\n                    id: \"post\",\n                    name: \"post\",\n                    value: \"2\",\n                    className: \"ml-2\",\n                    onChange: evt => onChangeHandler(evt)\n                  })]\n                })\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-24 text-center\",\n              children: /*#__PURE__*/_jsxs(\"button\", {\n                className: \"btn btn-primary btn-lg\",\n                onClick: onClickHandler,\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: `spinner-border spinner-border-sm ${buttonText === \"Saving\" ? \"\" : \"d-none\"}`,\n                  role: \"status\",\n                  \"aria-hidden\": \"true\"\n                }), \" \", buttonText]\n              })\n            })\n          })]\n        })\n      })\n    })]\n  });\n};\n\nexport default AccountPreferencesPage;","map":null,"metadata":{},"sourceType":"module"}