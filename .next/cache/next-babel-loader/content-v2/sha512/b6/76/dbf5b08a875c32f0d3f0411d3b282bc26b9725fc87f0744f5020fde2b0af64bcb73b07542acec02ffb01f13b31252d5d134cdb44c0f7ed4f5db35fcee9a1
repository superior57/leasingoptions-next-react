{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\n\nvar Gallery360 = function Gallery360(_ref) {\n  var alt = _ref.alt,\n      dir = _ref.dir;\n  var pixelsPerDegree = 2;\n\n  var _useState = useState(false),\n      dragging = _useState[0],\n      setDragging = _useState[1];\n\n  var _useState2 = useState(1),\n      imageIndex = _useState2[0],\n      setImageIndex = _useState2[1];\n\n  var _useState3 = useState(0),\n      dragStart = _useState3[0],\n      setDragStart = _useState3[1];\n\n  var _useState4 = useState(1),\n      dragStartIndex = _useState4[0],\n      setDragStartIndex = _useState4[1];\n\n  var externalWrapper = React.useRef(null);\n  useEffect(function () {\n    if (externalWrapper.current) {\n      externalWrapper.current.addEventListener(\"mousemove\", handleMouseMove, false);\n      externalWrapper.current.addEventListener(\"mouseup\", handleMouseUp, false);\n    }\n  }, [dragging]);\n\n  var handleMouseDown = function handleMouseDown(e) {\n    e.persist();\n    setDragging(true);\n    setDragStart(e.screenX);\n    setDragStartIndex(imageIndex);\n  };\n\n  var handleMouseUp = function handleMouseUp() {\n    setDragging(false);\n  };\n\n  var updateImageIndex = function updateImageIndex(currentPosition) {\n    var numImages = 36;\n    var pixelsPerImage = pixelsPerDegree * (360 / numImages);\n    var dx = (currentPosition - dragStart) / pixelsPerImage;\n    var index = Math.floor(dx) % numImages;\n\n    if (index < 1) {\n      index = numImages + index;\n    }\n\n    index = (index + dragStartIndex) % numImages;\n\n    if (index === 0) {\n      setImageIndex(1);\n    } else if (index !== imageIndex) {\n      setImageIndex(index);\n    }\n  };\n\n  var handleMouseMove = function handleMouseMove(e) {\n    if (dragging) {\n      updateImageIndex(e.screenX);\n    }\n  };\n\n  var preventDragHandler = function preventDragHandler(e) {\n    e.preventDefault();\n  };\n\n  if (dir) {\n    var renderImage = function renderImage() {\n      return /*#__PURE__*/_jsx(\"img\", {\n        src: \"\".concat(process.env.NEXT_PUBLIC_CDN, \"/\").concat(dir + imageIndex, \".png\"),\n        className: \"img-fluid\",\n        alt: \"\".concat(alt, \" angle \").concat(imageIndex)\n      });\n    };\n\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"external-360\",\n      ref: externalWrapper,\n      onMouseDown: handleMouseDown,\n      onDragStart: preventDragHandler,\n      children: renderImage()\n    });\n  }\n\n  return null;\n};\n\nexport default Gallery360;","map":null,"metadata":{},"sourceType":"module"}