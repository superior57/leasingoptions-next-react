{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport Router, { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport Navigation from \"../navigation\";\nimport DealSelector from '../deal-selector';\nimport HeaderSearch from './header-search';\nimport ModalContext from '../../HOCs/modal/modalContext';\nvar Search = dynamic(function () {\n  return import('../../search');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../search')];\n    },\n    modules: ['../../search']\n  }\n});\nvar ModalPostcode = dynamic(function () {\n  return import('../modal-postcode/modal-postcode');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../modal-postcode/modal-postcode')];\n    },\n    modules: ['../modal-postcode/modal-postcode']\n  }\n});\nvar ModalContact = dynamic(function () {\n  return import('../modal-contact/modal-contact');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../modal-contact/modal-contact')];\n    },\n    modules: ['../modal-contact/modal-contact']\n  }\n});\nimport TrustScore from '../../trustpilot/trust-score';\nimport style from './header.module.scss';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronDown, faPhoneAlt, faEnvelope, faSearch, faBars, faTimes, faEdit, faCheck } from \"@fortawesome/pro-regular-svg-icons\";\nimport { logEvent, logLabelEvent } from '../../../helpers/analytics';\nimport { connect } from 'react-redux';\nimport { getSearchButton, GetPhoneNumber } from 'helpers/helpers';\nimport { SearchPanels } from '../../../enums/SearchPanels';\n\nvar Header = function Header(props) {\n  var router = useRouter();\n  var modalContext = useContext(ModalContext);\n\n  var _useState = useState(false),\n      navToggle = _useState[0],\n      setNavToggle = _useState[1];\n\n  var _useState2 = useState(false),\n      searchToggle = _useState2[0],\n      setSearchToggle = _useState2[1];\n\n  var _useState3 = useState(getSearchButton(router, props.vehicleFilters, props.dealSelector)),\n      searchButtonText = _useState3[0],\n      setSearchButtonText = _useState3[1];\n\n  var handleHeaderToggle = function handleHeaderToggle(evt, toggle) {\n    evt.preventDefault();\n    props.dispatchHeaderToggle(toggle);\n  };\n\n  var handleSearchToggle = function handleSearchToggle(evt) {\n    evt.preventDefault();\n    setSearchToggle(!searchToggle);\n  };\n\n  var handleMenuToggle = function handleMenuToggle(evt) {\n    evt.preventDefault();\n    setNavToggle(!navToggle);\n    props.dispatchMenuToggle();\n  };\n\n  var handleMenuClose = function handleMenuClose(evt) {\n    evt.preventDefault();\n    setNavToggle(false);\n    props.dispatchMenuClose();\n  };\n\n  var handleSearchClick = function handleSearchClick() {\n    if (router.pathname.includes('car-leasing-with-insurance')) {\n      if (props.userPostcode) {\n        modalContext.showModal(Search, {\n          show: true,\n          title: \"Refine Search\",\n          activePanel: SearchPanels.SearchDetailed\n        });\n      } else {\n        modalContext.showModal(ModalPostcode, {\n          show: true,\n          title: 'Search Insured Cars'\n        });\n      }\n    } else {\n      modalContext.showModal(Search, {\n        show: true,\n        title: searchButtonText,\n        activePanel: searchButtonText === \"Refine Search\" ? 6 : 1\n      });\n    }\n  };\n\n  var logContact = function logContact() {\n    logEvent('Contact', 'Click');\n    logLabelEvent('Contact', 'Click', 'leave_message_track');\n  };\n\n  var handleContactClick = function handleContactClick() {\n    modalContext.showModal(ModalContact, {\n      show: true,\n      title: \"Contact\"\n    });\n  };\n\n  var HasLeaseDealTypeToggle = function HasLeaseDealTypeToggle(router) {\n    var showToggle = false; //TODO: check this logic. Don't think router.pathname.includes('car-leasing') check is correct. In any case better solution is required\n\n    if (router.asPath === \"/\" || router.asPath !== \"/car-leasing-with-insurance\" && router.pathname.includes('car-leasing')) {\n      showToggle = true;\n    }\n\n    return showToggle;\n  };\n\n  useEffect(function () {\n    Router.events.on('routeChangeStart', function (url) {\n      setNavToggle(false);\n      props.dispatchMenuClose();\n      props.dispatchRouteChange(url); // Close search on route change\n\n      modalContext.showModal(Search, {\n        show: false,\n        title: \"Start Your Search\"\n      });\n    });\n  }, []);\n  useEffect(function () {\n    // Check for active filters\n    setSearchButtonText(getSearchButton(router, props.vehicleFilters, props.dealSelector));\n  }, [router, props.vehicleFilters, props.dealSelector]);\n  var hasLeaseDealTypeToggle = HasLeaseDealTypeToggle(router);\n  var phoneNumber = GetPhoneNumber(props.isInternal);\n  return /*#__PURE__*/_jsxs(\"header\", {\n    className: \"\".concat(style['header'], \" \").concat(props.headerToggle ? style['header--condensed'] : ''),\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"\".concat(style['head-toggle'], \" container-fluid d-lg-none\"),\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 \".concat(style['head-toggle__col']),\n          children: hasLeaseDealTypeToggle && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: style['deal-manage'],\n              children: [/*#__PURE__*/_jsx(DealSelector, {\n                theme: \"light\"\n              }), /*#__PURE__*/_jsx(\"a\", {\n                className: style['head-toggle__close'],\n                onClick: function onClick(evt) {\n                  return handleHeaderToggle(evt, true);\n                },\n                children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                  width: \"20\",\n                  height: \"20\",\n                  icon: faTimes\n                })\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: style['deal-view'],\n              children: [/*#__PURE__*/_jsxs(\"span\", {\n                className: \"\".concat(style['deal-label'], \" \").concat(style['deal-indicator']),\n                children: [props.dealSelector === 1 ? \"Business\" : \"Personal\", \" Prices Active\"]\n              }), /*#__PURE__*/_jsx(\"span\", {\n                className: \"\".concat(style['deal-label'], \" \").concat(style['deal-edit'], \" \").concat(style['head-toggle__open']),\n                onClick: function onClick(evt) {\n                  return handleHeaderToggle(evt, false);\n                },\n                children: \"Change Prices\"\n              }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                width: \"16\",\n                height: \"16\",\n                icon: faEdit\n              }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                width: \"16\",\n                height: \"16\",\n                icon: faCheck\n              })]\n            })]\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-fluid \".concat(style['head-bar']),\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row \".concat(style['head-bar__row']),\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-10 col-lg-4 \".concat(style['head-bar__col']),\n          children: /*#__PURE__*/_jsx(Link, {\n            prefetch: false,\n            href: \"/\",\n            passHref: true,\n            children: /*#__PURE__*/_jsx(\"a\", {\n              className: \"text-decoration-none\",\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: \"\".concat(process.env.NEXT_PUBLIC_CDN, \"/website/static/leasing-options-logo.svg\"),\n                alt: \"LeasingOptions Logo\",\n                className: \"img-fluid\",\n                width: \"230\"\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-14 \".concat(style['head-bar__col'], \" d-inline-flex justify-content-end align-items-center d-lg-none\"),\n          children: [/*#__PURE__*/_jsxs(\"ul\", {\n            className: \"\".concat(style['head-bar__ql'], \" list-inline\"),\n            children: [/*#__PURE__*/_jsx(\"li\", {\n              className: \"list-inline-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                onClick: function onClick(evt) {\n                  return handleContactClick();\n                },\n                \"aria-label\": \"Contact\",\n                children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                  width: \"16\",\n                  height: \"16\",\n                  icon: faEnvelope,\n                  onClick: logContact\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"list-inline-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                href: \"tel:\".concat(phoneNumber),\n                children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                  width: \"22\",\n                  height: \"22\",\n                  icon: faPhoneAlt\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"list-inline-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                onClick: function onClick(evt) {\n                  return handleSearchToggle(evt);\n                },\n                \"aria-label\": \"Search\",\n                children: searchToggle ? /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                  width: \"22\",\n                  height: \"22\",\n                  icon: faTimes\n                }) : /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                  width: \"22\",\n                  height: \"22\",\n                  icon: faSearch\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"a\", {\n            id: style['head-bar__toggle'],\n            onClick: function onClick(evt) {\n              return handleMenuToggle(evt);\n            },\n            children: [/*#__PURE__*/_jsx(\"span\", {\n              children: \"Menu\"\n            }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n              width: \"22\",\n              height: \"25\",\n              icon: faBars\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-4 d-none d-lg-flex justify-content-center align-items-center \".concat(style['head-bar__col']),\n          children: hasLeaseDealTypeToggle && /*#__PURE__*/_jsx(DealSelector, {})\n        }), /*#__PURE__*/_jsx(\"div\", {\n          id: \"text-search\",\n          className: \"\".concat(style['head-bar__col'], \" \").concat(style['head-bar__search'], \" col-24 col-lg-6 \").concat(searchToggle ? 'd-block' : ''),\n          children: /*#__PURE__*/_jsx(HeaderSearch, {\n            dealSelector: props.dealSelector\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"\".concat(style['head-bar__col'], \" col-6 d-none d-lg-flex justify-content-center align-items-center text-center\"),\n          children: /*#__PURE__*/_jsxs(\"ul\", {\n            className: \"\".concat(style['head-bar__sub'], \" list-inline\"),\n            children: [/*#__PURE__*/_jsx(\"li\", {\n              className: \"list-inline-item\",\n              children: /*#__PURE__*/_jsx(Link, {\n                prefetch: false,\n                passHref: true,\n                href: \"/news\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: \"Blog\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"list-inline-item\",\n              children: /*#__PURE__*/_jsx(Link, {\n                prefetch: false,\n                passHref: true,\n                href: \"/advice\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: \"Guides\"\n                })\n              })\n            }), /*#__PURE__*/_jsxs(\"li\", {\n              className: \"list-inline-item \".concat(style['head-bar__dd']),\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: style['lvl-caption'],\n                children: [\"Help \", /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                  width: \"20\",\n                  height: \"20\",\n                  icon: faChevronDown\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: style['sub-lvl'],\n                children: /*#__PURE__*/_jsxs(\"ul\", {\n                  className: style['sub-nav'],\n                  children: [/*#__PURE__*/_jsx(\"li\", {\n                    children: /*#__PURE__*/_jsx(Link, {\n                      prefetch: false,\n                      passHref: true,\n                      href: \"/car-leasing-faqs\",\n                      children: /*#__PURE__*/_jsx(\"a\", {\n                        children: \"FAQs\"\n                      })\n                    })\n                  }), /*#__PURE__*/_jsx(\"li\", {\n                    children: /*#__PURE__*/_jsx(Link, {\n                      prefetch: false,\n                      passHref: true,\n                      href: \"/customer-testimonials\",\n                      children: /*#__PURE__*/_jsx(\"a\", {\n                        children: \"Testimonials\"\n                      })\n                    })\n                  }), /*#__PURE__*/_jsx(\"li\", {\n                    children: /*#__PURE__*/_jsx(Link, {\n                      prefetch: false,\n                      passHref: true,\n                      href: \"/our-story\",\n                      children: /*#__PURE__*/_jsx(\"a\", {\n                        children: \"Our Story\"\n                      })\n                    })\n                  }), /*#__PURE__*/_jsx(\"li\", {\n                    children: /*#__PURE__*/_jsx(Link, {\n                      prefetch: false,\n                      passHref: true,\n                      href: \"/look-after-my-car\",\n                      children: /*#__PURE__*/_jsx(\"a\", {\n                        children: \"Gap Insurance\"\n                      })\n                    })\n                  }), /*#__PURE__*/_jsx(\"li\", {\n                    children: /*#__PURE__*/_jsx(Link, {\n                      prefetch: false,\n                      passHref: true,\n                      href: \"/what-is-bik-tax\",\n                      children: /*#__PURE__*/_jsx(\"a\", {\n                        children: \"Tax Calculator\"\n                      })\n                    })\n                  }), /*#__PURE__*/_jsx(\"li\", {\n                    children: /*#__PURE__*/_jsx(Link, {\n                      prefetch: false,\n                      passHref: true,\n                      href: \"/fair-wear-and-tear\",\n                      children: /*#__PURE__*/_jsx(\"a\", {\n                        children: \"Fair Wear And Tear\"\n                      })\n                    })\n                  })]\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"list-inline-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                \"aria-label\": \"Contact\",\n                onClick: function onClick(evt) {\n                  return handleContactClick();\n                },\n                children: \"Contact\"\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"\".concat(style['head-bar__col'], \" \").concat(style['head-bar__tel'], \" col-4 d-none d-lg-block text-right\"),\n          children: /*#__PURE__*/_jsx(\"a\", {\n            \"aria-label\": \"Phone number\",\n            href: \"tel:\".concat(phoneNumber),\n            children: /*#__PURE__*/_jsx(\"span\", {\n              className: \"phonenumber_call_now\",\n              children: phoneNumber\n            })\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-fluid \".concat(style['head-cta'], \" d-lg-none\"),\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 d-flex flex-nowrap align-items-center justify-content-between\",\n          children: [/*#__PURE__*/_jsx(TrustScore, {}), /*#__PURE__*/_jsx(\"button\", {\n            className: \"btn btn-primary btn-fluid vehicle-search-button\",\n            onClick: function onClick() {\n              return handleSearchClick();\n            },\n            children: searchButtonText\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(Navigation, {\n      navToggle: navToggle,\n      searchButtonText: searchButtonText,\n      handleMenuClose: handleMenuClose\n    })]\n  });\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isInternal: state.isInternal,\n    dealSelector: state.dealSelector,\n    headerToggle: state.headerToggle,\n    vehicleFilters: state.vehicleFilters,\n    userPostcode: state.userPostcode\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    dispatchHeaderToggle: function dispatchHeaderToggle(toggle) {\n      dispatch({\n        type: 'UPDATE_HEADER_STATE',\n        toggle: toggle\n      });\n    },\n    dispatchMenuToggle: function dispatchMenuToggle() {\n      dispatch({\n        type: 'UPDATE_OVERLAY_STATE',\n        state: false\n      });\n    },\n    dispatchMenuClose: function dispatchMenuClose() {\n      dispatch({\n        type: 'UPDATE_LINK_STATE',\n        id: \"\",\n        level: 1,\n        controls: false,\n        indicator: \"\"\n      });\n      dispatch({\n        type: 'UPDATE_OVERLAY_STATE',\n        state: false\n      });\n    },\n    dispatchRouteChange: function dispatchRouteChange(url) {\n      //Set referrer\n      dispatch({\n        type: \"UPDATE_REFERRER\",\n        url: url\n      }); // Reset navigation state\n\n      dispatch({\n        type: 'UPDATE_LINK_STATE',\n        id: \"\",\n        level: 1,\n        controls: false,\n        indicator: \"\"\n      }); // Reset Overlay\n\n      dispatch({\n        type: 'UPDATE_OVERLAY_STATE',\n        state: false\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","map":null,"metadata":{},"sourceType":"module"}