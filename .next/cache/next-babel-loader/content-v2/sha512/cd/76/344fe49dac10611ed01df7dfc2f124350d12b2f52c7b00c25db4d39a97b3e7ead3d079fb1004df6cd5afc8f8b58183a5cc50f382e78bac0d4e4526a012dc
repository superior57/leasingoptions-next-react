{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport { GetVATText } from 'helpers/helpers';\nimport { formatMoney } from 'helpers/currencyHelper';\nimport { VehicleExtraOptionsHelper } from '../_libs/helpers/VehicleExtraOptionsHelper';\nimport { VehicleExtraOptionsManager } from '../_libs/VehicleExtraOptionsManager';\n\nvar VehicleExtraOptionsRelationshipsManager = function VehicleExtraOptionsRelationshipsManager(_ref) {\n  var options = _ref.options,\n      relationships = _ref.relationships,\n      leasingDealType = _ref.leasingDealType,\n      state = _ref.state,\n      settings = _ref.settings;\n  var vatText = GetVATText(leasingDealType);\n\n  var _useState = useState([]),\n      confirmRelationships = _useState[0],\n      setConfirmRelationships = _useState[1];\n\n  var handleOptionClick = function handleOptionClick(option) {\n    var optionToProcess = VehicleExtraOptionsHelper.getOptionAction(option, state.selectedOptionIds);\n\n    if (optionToProcess) {\n      var optionsToProcess = [optionToProcess];\n      var manager = new VehicleExtraOptionsManager();\n      manager.init(options, relationships);\n      var managerState = manager.processOptions(optionsToProcess, state.confirmRelationshipIds, state.selectedOptionIds, state.optionsStates);\n\n      if (managerState) {\n        if (settings.onStateChanged) {\n          settings.onStateChanged({\n            confirmRelationshipIds: managerState.confirmRelationshipIds,\n            selectedOptionIds: managerState.selectedOptionIds,\n            optionsStates: managerState.optionsStates\n          });\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    var confirmList = [];\n\n    if (state.confirmRelationshipIds && state.confirmRelationshipIds.length > 0) {\n      state.confirmRelationshipIds.forEach(function (relationshipId) {\n        var confirmRelationship = VehicleExtraOptionsHelper.getConfirmRelationship(relationships, options, relationshipId, state.selectedOptionIds, state.optionsStates);\n\n        if (confirmRelationship) {\n          confirmList.push(confirmRelationship);\n        }\n      });\n    }\n\n    setConfirmRelationships(confirmList);\n  }, [state]);\n\n  if (confirmRelationships.length > 0) {\n    var totalPrice = VehicleExtraOptionsHelper.getOptionsPrice(VehicleExtraOptionsHelper.getSelectedOptions(options, state.selectedOptionIds), state.optionsStates);\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"options-box\",\n        children: confirmRelationships.map(function (relationship) {\n          return /*#__PURE__*/_jsxs(\"div\", {\n            className: \"rule-item\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"my-3\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                className: \"text-center\",\n                children: VehicleExtraOptionsHelper.getRelationshipDescription(relationship.type)\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: relationship.options.map(function (option) {\n                return /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-16 col-md-20 d-flex flex-row flex-wrap align-items-center my-2\",\n                    children: [option.isPrimary ? /*#__PURE__*/_jsx(\"img\", {\n                      className: \"lazyload mr-2\",\n                      height: \"13\",\n                      alt: \"Primary icon\",\n                      \"data-src\": \"\".concat(process.env.NEXT_PUBLIC_CDN, \"/website/icon-primary.png\")\n                    }) : \"\", \" \", option.name]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"col-8 col-md-4 d-flex justify-content-end align-items-center\",\n                    children: [formatMoney(option.price), \" \", /*#__PURE__*/_jsx(\"span\", {\n                      className: \"vehicle-option__indicator \".concat(option.isSelected ? \"is-active\" : \"\", \" \").concat(option.isDisabled ? \"is-disabled\" : \"\"),\n                      onClick: function onClick() {\n                        return handleOptionClick(option);\n                      }\n                    })]\n                  })]\n                }, \"option-\".concat(option.id));\n              })\n            })]\n          }, \"rule-\".concat(relationship.id));\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"options-pricing\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-16 col-md-19 d-flex flex-row flex-wrap my-2\",\n            children: \"Total Extras Cost Per Month\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-8 col-md-5 d-flex justify-content-end align-items-center\",\n            children: [formatMoney(totalPrice), \" \", vatText]\n          })]\n        })\n      })]\n    });\n  }\n\n  return null;\n};\n\nexport default VehicleExtraOptionsRelationshipsManager;","map":null,"metadata":{},"sourceType":"module"}