{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport style from './garage-item.module.scss';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faTimes } from \"@fortawesome/pro-light-svg-icons\";\nimport { VehicleTypes } from 'enums/VehicleTypes';\nimport { LeasingDealTypes } from \"enums/LeasingDealTypes\";\nimport { isNullOrWhiteSpace } from 'helpers/stringHelper';\nimport { GetMakes, GetManufacturersModelsGarage, GetModelsTrimsGarage } from 'business-logic/vehicleService';\n\nvar GarageVehicleSelector = function GarageVehicleSelector(_ref) {\n  var idx = _ref.idx,\n      settings = _ref.settings;\n\n  var _useState = useState([]),\n      makes = _useState[0],\n      setMakes = _useState[1];\n\n  var _useState2 = useState([]),\n      models = _useState2[0],\n      setModels = _useState2[1];\n\n  var _useState3 = useState([]),\n      derivatives = _useState3[0],\n      setDerivatives = _useState3[1];\n\n  var _useState4 = useState(undefined),\n      leasingDealType = _useState4[0],\n      setLeasingDealType = _useState4[1];\n\n  var _useState5 = useState(''),\n      makeUrl = _useState5[0],\n      setMakeUrl = _useState5[1];\n\n  var _useState6 = useState(''),\n      modelUrl = _useState6[0],\n      setModelUrl = _useState6[1];\n\n  var _useState7 = useState(undefined),\n      vehicleRef = _useState7[0],\n      setVehicleRef = _useState7[1];\n\n  useEffect(function () {\n    if (leasingDealType) {\n      GetMakes(leasingDealType === LeasingDealTypes.Van ? VehicleTypes.Commercial : VehicleTypes.Car).then(function (result) {\n        var data = [];\n\n        if (result.isSucceed && result.data) {\n          data = result.data;\n        }\n\n        setMakeUrl('');\n        setMakes(data);\n      });\n    } else {\n      setMakeUrl('');\n      setMakes([]);\n    }\n  }, [leasingDealType]);\n  useEffect(function () {\n    if (leasingDealType && !isNullOrWhiteSpace(makeUrl)) {\n      //TODO: ApiResponse required\n      GetManufacturersModelsGarage(leasingDealType === LeasingDealTypes.Van ? VehicleTypes.Commercial : VehicleTypes.Car, makeUrl).then(function (data) {\n        setModelUrl('');\n        setModels(data.data);\n      });\n    } else {\n      setModelUrl('');\n      setModels([]);\n    }\n  }, [makeUrl]);\n  useEffect(function () {\n    if (leasingDealType && !isNullOrWhiteSpace(makeUrl) && !isNullOrWhiteSpace(modelUrl)) {\n      GetModelsTrimsGarage(leasingDealType === LeasingDealTypes.Van ? VehicleTypes.Commercial : VehicleTypes.Car, makeUrl, modelUrl).then(function (result) {\n        var data = [];\n\n        if (result.isSucceed && result.data) {\n          data = result.data;\n        } //TODO: check here\n\n\n        undefined;\n        setDerivatives(data);\n      });\n    } else {\n      setVehicleRef(undefined);\n      setDerivatives([]);\n    }\n  }, [modelUrl]);\n\n  var handleDealTypeChange = function handleDealTypeChange(evt) {\n    setLeasingDealType(parseInt(evt.currentTarget.value) || undefined);\n    setMakeUrl('');\n    setModelUrl('');\n    setVehicleRef(undefined);\n  };\n\n  var handleMakeChange = function handleMakeChange(evt) {\n    setMakeUrl(evt.currentTarget.value);\n    setModelUrl('');\n    setVehicleRef(undefined);\n  };\n\n  var handleModelChange = function handleModelChange(evt) {\n    setModelUrl(evt.currentTarget.value);\n    setVehicleRef(undefined);\n  };\n\n  var handleDerivativeChange = function handleDerivativeChange(evt) {\n    setVehicleRef(parseInt(evt.currentTarget.value) || undefined);\n  };\n\n  var handleClear = function handleClear() {\n    setLeasingDealType(undefined);\n    setMakeUrl('');\n    setMakes([]);\n    setModelUrl('');\n    setModels([]);\n    setVehicleRef(undefined);\n    setDerivatives([]);\n  };\n\n  var handleSelectVehicle = function handleSelectVehicle() {\n    if (settings.onSelect) {\n      settings.onSelect(idx, {\n        leasingDealType: leasingDealType,\n        makeUrl: makeUrl,\n        modelUrl: modelUrl,\n        vehicleRef: vehicleRef\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"\".concat(style['garage-column'], \" w-100 box box--thick bg-white p-3 py-md-4\"),\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-100 d-flex justify-content-between align-items-center mb-3\",\n      children: [\"Select \", /*#__PURE__*/_jsx(\"span\", {\n        children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n          width: \"30\",\n          height: \"30\",\n          icon: faTimes,\n          className: \"fa-2x\",\n          onClick: handleClear\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleDealTypeChange,\n        value: leasingDealType || '',\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Contract Type\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: LeasingDealTypes.Business,\n          children: \"Business\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: LeasingDealTypes.Personal,\n          children: \"Personal\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: LeasingDealTypes.Van,\n          children: \"Van\"\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleMakeChange,\n        value: makeUrl,\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Make\"\n        }), makes.map(function (item) {\n          return /*#__PURE__*/_jsx(\"option\", {\n            value: item.id,\n            children: item.text\n          }, item.id);\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleModelChange,\n        value: modelUrl,\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Model\"\n        }), models.map(function (model) {\n          return /*#__PURE__*/_jsx(\"option\", {\n            value: model.id,\n            children: model.text\n          }, model.id);\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"form-group text-left\",\n      children: /*#__PURE__*/_jsxs(\"select\", {\n        className: \"form-control\",\n        onChange: handleDerivativeChange,\n        value: vehicleRef || '',\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          children: \"Vehicle\"\n        }), derivatives.map(function (trim) {\n          return /*#__PURE__*/_jsx(\"option\", {\n            value: trim.id,\n            children: trim.text\n          }, trim.id);\n        })]\n      })\n    }), vehicleRef ? /*#__PURE__*/_jsxs(\"button\", {\n      className: \"btn btn-outline-secondary btn-block btn-labeled btn-lg\",\n      onClick: handleSelectVehicle,\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        className: \"btn-label\",\n        children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n          width: \"16\",\n          height: \"16\",\n          icon: faPlus\n        })\n      }), /*#__PURE__*/_jsx(\"span\", {\n        className: \"btn-text\",\n        children: \"Add This Vehicle\"\n      })]\n    }) : null]\n  });\n};\n\nexport default GarageVehicleSelector;","map":null,"metadata":{},"sourceType":"module"}