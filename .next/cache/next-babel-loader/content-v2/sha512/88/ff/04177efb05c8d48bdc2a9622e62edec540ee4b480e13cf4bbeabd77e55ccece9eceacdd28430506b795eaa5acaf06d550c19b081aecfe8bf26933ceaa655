{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\current_project\\\\PPH\\\\tfs\\\\Website\\\\Website\\\\components\\\\layout\\\\main-layout\\\\main-layout.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport Head from \"next/head\";\nimport { useRouter, Router } from 'next/router';\nimport Breadcrumbs from '../breadcrumbs';\nimport PageOverlay from 'components/page-overlay/page-overlay';\nimport { GetBreadcrumbsSchema, GetSerializedSchema } from 'helpers/schemaHelper';\nimport LiveChat from \"../../live-chat\";\nimport { isWithinLeaseBotHours } from \"../../leasebot/helper\";\nimport { AuthenticationService } from \"business-logic/authenticationService\";\nimport { connect } from 'react-redux';\nimport { getBreadcrumbs } from \"helpers/breadcrumbsHelper\";\nimport Header from '../header';\nimport Footer from '../footer';\nimport ToTop from '../to-top';\nimport LeaseBotIcon from 'components/leasebot/leaseBotIcon';\nimport { GetTrustPilotRating } from 'business-logic/systemService';\n\nvar MainLayout = function MainLayout(_ref) {\n  _s();\n\n  var isInternal = _ref.isInternal,\n      dispatchInternalCheck = _ref.dispatchInternalCheck,\n      metaData = _ref.metaData,\n      breadcrumbs = _ref.breadcrumbs,\n      children = _ref.children,\n      className = _ref.className,\n      trustPilotRating = _ref.trustPilotRating,\n      updateTrustPilotRating = _ref.updateTrustPilotRating;\n  return function (breadcrumbs) {\n    var router = useRouter();\n    var expiryDate = new Date();\n    expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n\n    var checkChatStatus = function checkChatStatus() {\n      var liveChat = document.getElementById(\"liveChatLink\");\n      var chatWrapper = document.getElementById(\"chatwrapper\");\n\n      if (isWithinLeaseBotHours()) {\n        if (process.env.NEXT_PUBLIC_IS_CHATBOT_ENABLED) {\n          chatWrapper === null || chatWrapper === void 0 ? void 0 : chatWrapper.classList.remove(\"d-none\");\n        }\n\n        liveChat === null || liveChat === void 0 ? void 0 : liveChat.classList.add(\"d-none\");\n      } else {\n        chatWrapper === null || chatWrapper === void 0 ? void 0 : chatWrapper.classList.add(\"d-none\");\n        liveChat === null || liveChat === void 0 ? void 0 : liveChat.classList.remove(\"d-none\");\n      }\n    };\n\n    useEffect(function () {\n      // Check for internal user on first pageload\n      checkInternalIp();\n      checkTrustpilot(); // Check for internal user on first route change\n\n      Router.events.on('routeChangeComplete', function () {\n        checkInternalIp();\n        checkTrustpilot();\n      });\n    }, []);\n\n    var checkTrustpilot = function checkTrustpilot() {\n      if (trustPilotRating == null) {\n        GetTrustPilotRating().then(function (response) {\n          updateTrustPilotRating(response.data);\n        });\n      }\n    };\n\n    useEffect(function () {\n      // Check chat status\n      // ! This is required otherwise there's a delay in showing the cirrect chat\n      checkChatStatus(); // Check chat repeater\n\n      var interval = setInterval(checkChatStatus, 15000);\n      return function () {\n        return clearInterval(interval);\n      };\n    }, []);\n\n    function checkInternalIp() {\n      if (isInternal === null) {\n        AuthenticationService.IsInternalPage().then(function (result) {\n          dispatchInternalCheck(result.data);\n        })[\"catch\"](function (error) {\n          console.log(error);\n        });\n      }\n    }\n\n    var breadcrumbs = getBreadcrumbs(router);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Head, {\n        children: [metaData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"title\", {\n            children: metaData.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            name: \"description\",\n            content: metaData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            name: \"keywords\",\n            content: metaData.keywords\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"og:type\",\n            content: \"website\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"og:url\",\n            content: process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"og:title\",\n            content: metaData.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"og:description\",\n            content: metaData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"og:image\",\n            content: metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"twitter:card\",\n            content: \"summary_large_image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"twitter:url\",\n            content: process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"twitter:title\",\n            content: metaData.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"twitter:description\",\n            content: metaData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n            property: \"twitter:image\",\n            content: metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true) : null, metaData && metaData.canonicalUrl ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"link\", {\n            rel: \"canonical\",\n            href: metaData.canonicalUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false) : null, metaData && metaData.ampHTML ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"link\", {\n            rel: \"amphtml\",\n            href: metaData.ampHTML\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false) : null, metaData && metaData.noIndex ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"meta\", {\n            name: \"robots\",\n            content: \"noindex,nofollow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false) : null, metaData && metaData.author ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"meta\", {\n            name: \"author\",\n            content: metaData.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false) : null, breadcrumbs && breadcrumbs.length > 0 ? /*#__PURE__*/_jsxDEV(\"script\", {\n          type: \"application/ld+json\",\n          dangerouslySetInnerHTML: {\n            __html: GetSerializedSchema(GetBreadcrumbsSchema(breadcrumbs))\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 61\n        }, _this) : null, process.env.NEXT_PUBLIC_TAGMANAGER_ENABLED == \"true\" && /*#__PURE__*/_jsxDEV(\"script\", {\n          type: \"application/javascript\",\n          dangerouslySetInnerHTML: {\n            __html: \"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PG5CHN');\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n        breadcrumbs: breadcrumbs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: className,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(ToTop, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(PageOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(LeaseBotIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(LiveChat, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }, _this)]\n    }, void 0, true);\n  }(breadcrumbs);\n};\n\n_s(MainLayout, \"TvQOAa6MuxS5wkANqefpxaThEc4=\", false, function () {\n  return [useRouter];\n});\n\n_c = MainLayout;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isInternal: state.isInternal,\n    trustPilotRating: state.trustPilotRating\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    dispatchInternalCheck: function dispatchInternalCheck(internal) {\n      dispatch({\n        type: \"UPDATE_INTERNAL\",\n        internal: internal\n      });\n    },\n    updateTrustPilotRating: function updateTrustPilotRating(data) {\n      dispatch({\n        type: 'UPDATE_TRUSTPILOT_RATING',\n        data: data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainLayout);\n\nvar _c;\n\n$RefreshReg$(_c, \"MainLayout\");","map":{"version":3,"sources":["E:/current_project/PPH/tfs/Website/Website/components/layout/main-layout/main-layout.tsx"],"names":["React","useEffect","Head","useRouter","Router","Breadcrumbs","PageOverlay","GetBreadcrumbsSchema","GetSerializedSchema","LiveChat","isWithinLeaseBotHours","AuthenticationService","connect","getBreadcrumbs","Header","Footer","ToTop","LeaseBotIcon","GetTrustPilotRating","MainLayout","isInternal","dispatchInternalCheck","metaData","breadcrumbs","children","className","trustPilotRating","updateTrustPilotRating","router","expiryDate","Date","setFullYear","getFullYear","checkChatStatus","liveChat","document","getElementById","chatWrapper","process","env","NEXT_PUBLIC_IS_CHATBOT_ENABLED","classList","remove","add","checkInternalIp","checkTrustpilot","events","on","then","response","data","interval","setInterval","clearInterval","IsInternalPage","result","error","console","log","title","description","keywords","NEXT_PUBLIC_CANONICALBASEURL","asPath","imageUrl","NEXT_PUBLIC_CDN","canonicalUrl","ampHTML","noIndex","author","length","__html","NEXT_PUBLIC_TAGMANAGER_ENABLED","mapStateToProps","state","mapDispatchToProps","dispatch","internal","type"],"mappings":"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","sourcesContent":["import React, { ReactNode, useState, useEffect } from 'react';\r\nimport Head from \"next/head\";\r\nimport { useRouter, Router } from 'next/router'\r\nimport Breadcrumbs from '../breadcrumbs';\r\nimport PageOverlay from 'components/page-overlay/page-overlay';\r\nimport { MetaData } from 'types/infrastructure/MetaData';\r\nimport { BreadcrumbsItem } from 'types/infrastructure/BreadcrumbsItem';\r\nimport { GetBreadcrumbsSchema, GetSerializedSchema } from 'helpers/schemaHelper';\r\nimport LiveChat from \"../../live-chat\";\r\nimport { isWithinLeaseBotHours } from \"../../leasebot/helper\";\r\nimport { AuthenticationService } from \"business-logic/authenticationService\";\r\nimport { connect } from 'react-redux';\r\nimport { getBreadcrumbs } from \"helpers/breadcrumbsHelper\";\r\nimport Header from '../header';\r\nimport Footer from '../footer';\r\nimport TrustMicro from 'components/trustpilot/trust-micro';\r\nimport ToTop from '../to-top';\r\nimport CookieBar from '../../cookie-bar/cookie-bar';\r\nimport LeaseBotIcon from 'components/leasebot/leaseBotIcon';\r\nimport { GetTrustPilotRating } from 'business-logic/systemService';\r\n\r\ntype Props = {\r\n    isInternal: boolean;\r\n    dispatchInternalCheck: any;\r\n    metaData?: MetaData;\r\n    breadcrumbs?: BreadcrumbsItem[];\r\n    children: ReactNode;\r\n    className?: string;    \r\n    trustPilotRating: any,\r\n    updateTrustPilotRating: any,\r\n}\r\n\r\nconst MainLayout: React.FC<Props> = ({ isInternal, dispatchInternalCheck, metaData, breadcrumbs, children, className, trustPilotRating, updateTrustPilotRating }) => {\r\n    const router = useRouter();\r\n    const expiryDate = new Date();\r\n          expiryDate.setFullYear(expiryDate.getFullYear() + 1);\r\n\r\n    const checkChatStatus = () => {\r\n        var liveChat = document.getElementById(\"liveChatLink\");\r\n        var chatWrapper = document.getElementById(\"chatwrapper\");\r\n\r\n        if (isWithinLeaseBotHours()) {\r\n            if (process.env.NEXT_PUBLIC_IS_CHATBOT_ENABLED) {\r\n                chatWrapper?.classList.remove(\"d-none\");\r\n            }\r\n            liveChat?.classList.add(\"d-none\");\r\n        } else {\r\n            chatWrapper?.classList.add(\"d-none\");\r\n            liveChat?.classList.remove(\"d-none\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Check for internal user on first pageload\r\n        checkInternalIp();\r\n        checkTrustpilot();\r\n        // Check for internal user on first route change\r\n        Router.events.on('routeChangeComplete', () => {\r\n            checkInternalIp();\r\n            checkTrustpilot();\r\n        });\r\n    }, []);\r\n\r\n    const checkTrustpilot = () => {\r\n        if (trustPilotRating == null) {\r\n            GetTrustPilotRating().then(response => {\r\n                updateTrustPilotRating(response.data);                 \r\n            });\r\n        }   \r\n    };\r\n\r\n    useEffect(() => {\r\n        // Check chat status\r\n        // ! This is required otherwise there's a delay in showing the cirrect chat\r\n        checkChatStatus();\r\n\r\n        // Check chat repeater\r\n        const interval = setInterval(checkChatStatus, 15000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    function checkInternalIp() {\r\n        if (isInternal === null) {\r\n            AuthenticationService.IsInternalPage()\r\n                .then(result => {\r\n                    dispatchInternalCheck(result.data);\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n    }\r\n\r\n    var breadcrumbs = getBreadcrumbs(router);\r\n\r\n    return (\r\n        <>\r\n            <Head>\r\n                {metaData ?\r\n                    (<>\r\n                        <title>{metaData.title}</title>\r\n                        <meta name=\"description\" content={metaData.description} />\r\n                        <meta name=\"keywords\" content={metaData.keywords} />\r\n\r\n                        {/* Open Graph / Facebook */}\r\n                        <meta property=\"og:type\" content=\"website\" />\r\n                        <meta property=\"og:url\" content={process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath} />\r\n                        <meta property=\"og:title\" content={metaData.title} />\r\n                        <meta property=\"og:description\" content={metaData.description} />\r\n                        <meta property=\"og:image\" content={metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"} />\r\n\r\n                        {/* Twitter */}\r\n                        <meta property=\"twitter:card\" content=\"summary_large_image\" />\r\n                        <meta property=\"twitter:url\" content={process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath} />\r\n                        <meta property=\"twitter:title\" content={metaData.title} />\r\n                        <meta property=\"twitter:description\" content={metaData.description} />\r\n                        <meta property=\"twitter:image\" content={metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"} />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.canonicalUrl) ?\r\n                    (<>\r\n                        <link rel=\"canonical\" href={metaData.canonicalUrl} />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.ampHTML) ?\r\n                    (<>\r\n                        <link rel=\"amphtml\" href={metaData.ampHTML} />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.noIndex) ?\r\n                    (<>\r\n                        <meta name=\"robots\" content=\"noindex,nofollow\" />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.author) ?\r\n                    (<>\r\n                        <meta name=\"author\" content={metaData.author} />\r\n                    </>) : null}\r\n\r\n                {(breadcrumbs && breadcrumbs.length > 0) ? (<script type=\"application/ld+json\" dangerouslySetInnerHTML={{\r\n                    __html: GetSerializedSchema(GetBreadcrumbsSchema(breadcrumbs))\r\n                }}></script>) : null}\r\n\r\n                {process.env.NEXT_PUBLIC_TAGMANAGER_ENABLED == \"true\" &&\r\n                    <script type=\"application/javascript\" dangerouslySetInnerHTML={\r\n                        {\r\n                            __html: `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PG5CHN');`,\r\n                        }\r\n                    }>\r\n                    </script>\r\n                }\r\n            </Head>\r\n\r\n            <Header />\r\n            <Breadcrumbs\r\n                breadcrumbs={breadcrumbs}\r\n            />\r\n          \r\n           \r\n            <main className={className}>{children}</main>\r\n            <Footer />\r\n            <ToTop />\r\n            <PageOverlay />\r\n            <LeaseBotIcon/>\r\n            <LiveChat />\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isInternal: state.isInternal,\r\n    trustPilotRating: state.trustPilotRating,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        dispatchInternalCheck: (internal: boolean) => {\r\n            dispatch({ type: \"UPDATE_INTERNAL\", internal: internal });\r\n        },\r\n        updateTrustPilotRating: (data) => {\r\n            dispatch({ type: 'UPDATE_TRUSTPILOT_RATING', data: data });\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainLayout);"]},"metadata":{},"sourceType":"module"}