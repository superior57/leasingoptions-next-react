{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport style from 'sass/single-post.module.scss';\nimport MetaHead from '../../../../components/seo/meta';\nimport MainLayout from '../../../../components/layout/main-layout';\nimport Newsletter from '../../../../components/layout/newsletter';\nimport AsideNews from '../../../../components/layout/aside-news';\nimport PageRelated from '../../../../components/layout/page-related';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faThumbsUp, faThumbsDown } from \"@fortawesome/pro-regular-svg-icons\";\nimport { InlineShareButtons } from 'sharethis-reactjs';\nimport { NewsTypes } from 'enums/NewsTypes';\nimport wrapper from 'redux/store.tsx/store';\nimport { NewsService } from 'business-logic/newsService';\nimport { ContentService } from 'business-logic/contentService';\nimport { GetBlogPostSchema, GetSerializedSchema } from 'helpers/schemaHelper';\nimport moment from 'moment';\nimport { GetNewsType } from 'helpers/enumsHelper';\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  var _newsArticlePromise$d, _newsArticlePromise$d2, _newsArticlePromise$d3, _newsArticlePromise$d4, _newsArticlePromise$d5;\n\n  const newsId = context.query.id;\n  const url = context.query.url;\n  const category = context.query.category;\n  const newsType = GetNewsType(category);\n  const newsArticlePromise = await NewsService.GetNewsArticle(parseInt(newsId));\n  const popularNewsPromise = await NewsService.GetCategoryPopularArticles(newsType);\n  const relatedNewsPromise = await NewsService.GetRelatedArticles(parseInt(newsId));\n  const webPageSchema = GetSerializedSchema(GetBlogPostSchema(newsArticlePromise === null || newsArticlePromise === void 0 ? void 0 : newsArticlePromise.data));\n  const metaData = {\n    title: `${newsArticlePromise === null || newsArticlePromise === void 0 ? void 0 : (_newsArticlePromise$d = newsArticlePromise.data) === null || _newsArticlePromise$d === void 0 ? void 0 : _newsArticlePromise$d.metaTitle} | Leasing Options`,\n    description: newsArticlePromise === null || newsArticlePromise === void 0 ? void 0 : (_newsArticlePromise$d2 = newsArticlePromise.data) === null || _newsArticlePromise$d2 === void 0 ? void 0 : _newsArticlePromise$d2.metaDescription,\n    canonicalUrl: context.req.url,\n    keywords: (newsArticlePromise === null || newsArticlePromise === void 0 ? void 0 : (_newsArticlePromise$d3 = newsArticlePromise.data) === null || _newsArticlePromise$d3 === void 0 ? void 0 : _newsArticlePromise$d3.metaKeywords) !== undefined ? newsArticlePromise === null || newsArticlePromise === void 0 ? void 0 : (_newsArticlePromise$d4 = newsArticlePromise.data) === null || _newsArticlePromise$d4 === void 0 ? void 0 : _newsArticlePromise$d4.metaKeywords : null,\n    ampHTML: `/amp/news/${category}/${url}/${newsId}`,\n    imageUrl: process.env.NEXT_PUBLIC_CDN + (newsArticlePromise === null || newsArticlePromise === void 0 ? void 0 : (_newsArticlePromise$d5 = newsArticlePromise.data) === null || _newsArticlePromise$d5 === void 0 ? void 0 : _newsArticlePromise$d5.imageUrl)\n  };\n  return {\n    props: {\n      metaData: metaData,\n      category: category,\n      newsId: parseInt(newsId),\n      newsType: newsType,\n      newsArticle: newsArticlePromise.data,\n      popularNews: popularNewsPromise.data,\n      relatedNews: relatedNewsPromise.data,\n      webPageSchema: webPageSchema\n    }\n  };\n});\n\nconst NewsPost = ({\n  category,\n  newsId,\n  newsType,\n  newsArticle,\n  popularNews,\n  relatedNews,\n  webPageSchema\n}) => {\n  const {\n    0: likeCount,\n    1: setLikeCount\n  } = useState(newsArticle.likesCount);\n  const {\n    0: dislikeCount,\n    1: setDisikeCount\n  } = useState(newsArticle.dislikesCount);\n  const cardImage = newsArticle.imageUrl ? newsArticle.imageUrl : \"/fit-in/400x400/website/static/img-placeholder.jpg\";\n  const momentDate = moment(newsArticle.onDate, \"YYYY-MM-DDTHH:mm\");\n  const formattedDate = momentDate.format(\"DD MMMM YYYY\");\n\n  const handleIncrementLikes = newsId => {\n    //TODO: ADD check for user IP\n    Promise.resolve(IncrementLikes(newsId)).then(function (data) {\n      setLikeCount(likeCount + 1);\n    });\n  };\n\n  const handleIncrementDislikes = newsId => {\n    //TODO: ADD check for user IP\n    Promise.resolve(IncrementDislikes(newsId)).then(function (data) {\n      setDisikeCount(dislikeCount + 1);\n    });\n  };\n\n  async function IncrementLikes(newsId) {\n    return await ContentService.IncrementLikes(newsId);\n  }\n\n  async function IncrementDislikes(newsId) {\n    return await ContentService.IncrementDislikes(newsId);\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(MetaHead, {\n      children: /*#__PURE__*/_jsx(\"script\", {\n        type: \"application/ld+json\",\n        dangerouslySetInnerHTML: {\n          __html: webPageSchema\n        }\n      })\n    }), /*#__PURE__*/_jsx(\"section\", {\n      className: \"bg-light-grey py-3 py-md-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row d-flex\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-lg-18 order-2 order-lg-1\",\n            children: /*#__PURE__*/_jsxs(\"article\", {\n              className: style['single-post'],\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: style['single-post__img'],\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  className: \"img-fluid lazyload\",\n                  alt: `${newsArticle.title} image`,\n                  \"data-src\": `${process.env.NEXT_PUBLIC_CDN + cardImage}`\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: style['single-post__info'],\n                children: [/*#__PURE__*/_jsx(\"h1\", {\n                  children: newsArticle.title\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  children: formattedDate\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"w-100 position-relative\",\n                  dangerouslySetInnerHTML: {\n                    __html: newsArticle.newsText\n                  }\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: style['single-post__tags'],\n                children: [newsArticle.tags.length > 0 && /*#__PURE__*/_jsxs(\"ul\", {\n                  children: [/*#__PURE__*/_jsx(\"li\", {\n                    className: \"tag-label\",\n                    children: \"Tags\"\n                  }), newsArticle.tags.map(tag => /*#__PURE__*/_jsx(\"li\", {\n                    children: tag\n                  }, `tag-${tag}`))]\n                }), /*#__PURE__*/_jsx(\"hr\", {})]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: `${style['single-post__social']} d-lg-flex align-items-center justify-content-center`,\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: `${style['single-post__rate']} d-inline-flex flex-wrap align-items-lg-center justify-content-center justify-content-lg-start`,\n                  children: [/*#__PURE__*/_jsx(\"h4\", {\n                    children: \"Enjoy this article?\"\n                  }), /*#__PURE__*/_jsxs(\"a\", {\n                    className: `${style['single-post__thumb']} ${style['single-post__thumb--left']}`,\n                    children: [/*#__PURE__*/_jsx(\"span\", {\n                      children: likeCount\n                    }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      width: \"30\",\n                      height: \"30\",\n                      icon: faThumbsUp,\n                      onClick: () => handleIncrementLikes(newsId)\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"a\", {\n                    className: `${style['single-post__thumb']} ${style['single-post__thumb--right']}`,\n                    children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      width: \"30\",\n                      height: \"30\",\n                      icon: faThumbsDown,\n                      onClick: () => handleIncrementDislikes(newsId)\n                    }), /*#__PURE__*/_jsx(\"span\", {\n                      children: dislikeCount\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: `${style['single-post__share']} d-inline-flex flex-wrap align-items-lg-center justify-content-center justify-content-lg-end`,\n                  children: /*#__PURE__*/_jsx(InlineShareButtons, {\n                    config: {\n                      alignment: 'center',\n                      // alignment of buttons (left, center, right)\n                      color: 'social',\n                      // set the color of buttons (social, white)\n                      enabled: true,\n                      // show/hide buttons (true, false)\n                      font_size: 10,\n                      // font size for the buttons\n                      labels: 'cta',\n                      // button labels (cta, counts, null)\n                      language: 'en',\n                      // which language to use (see LANGUAGES)\n                      networks: [// which networks to include (see SHARING NETWORKS)\n                      'facebook', 'twitter', 'linkedin'],\n                      padding: 12,\n                      // padding within buttons (INTEGER)\n                      radius: 0,\n                      // the corner radius on each button (INTEGER)\n                      show_total: false,\n                      size: 26 // the size of each button (INTEGER)\n\n                    }\n                  })\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-lg-6 order-1 order-lg-2\",\n            children: /*#__PURE__*/_jsx(AsideNews, {\n              popular: true,\n              filters: newsType === NewsTypes.VehicleReviews,\n              social: true,\n              popularNews: popularNews,\n              newsType: newsType,\n              category: category\n            })\n          })]\n        })\n      })\n    }), relatedNews.length > 0 && /*#__PURE__*/_jsx(PageRelated, {\n      relatedNews: relatedNews\n    }), /*#__PURE__*/_jsx(Newsletter, {})]\n  });\n};\n\nNewsPost.layout = MainLayout;\nexport default NewsPost;","map":null,"metadata":{},"sourceType":"module"}