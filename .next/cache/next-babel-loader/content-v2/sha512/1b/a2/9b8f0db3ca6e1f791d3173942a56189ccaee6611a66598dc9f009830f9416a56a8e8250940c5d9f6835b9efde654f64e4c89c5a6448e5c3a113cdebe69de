{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\current_project\\\\PPH\\\\tfs\\\\Website\\\\Website\\\\components\\\\layout\\\\modal-postcode\\\\modal-postcode.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useRef, useState, useContext } from 'react';\nimport { connect } from 'react-redux';\nimport Modal from 'react-bootstrap/Modal';\nimport { FormatValidatePostcode, AddSpaceToPostcode } from 'helpers/helpers';\nimport ModalContext from '../../HOCs/modal/modalContext';\nimport Search from '../../search';\nimport { SearchPanels } from '../../../enums/SearchPanels';\n\nfunction mapStateToProps(state) {\n  return {\n    dealToggle: state.dealSelector,\n    vehicleFilters: state.vehicleFilters,\n    userPostcode: state.userPostcode\n  };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateUserPostcode: userPostcode => {\n      dispatch({\n        type: 'UPDATE_POSTCODE',\n        userPostcode: userPostcode\n      });\n    }\n  };\n};\n\nconst ModalPostcode = (_ref) => {\n  let {\n    onRequestClose,\n    title,\n    userPostcode,\n    updateUserPostcode\n  } = _ref,\n      otherProps = _objectWithoutProperties(_ref, [\"onRequestClose\", \"title\", \"userPostcode\", \"updateUserPostcode\"]);\n\n  const modalContext = useContext(ModalContext);\n  const postcodeRef = useRef();\n  const {\n    0: isSubmitted,\n    1: setIsSubmitted\n  } = useState(false);\n  const {\n    0: isValidated,\n    1: setIsValidated\n  } = useState(false);\n\n  const handlePostcodeSubmit = evt => {\n    evt.preventDefault();\n    let enteredPostcode = postcodeRef.current.value.toLowerCase();\n\n    if (FormatValidatePostcode(enteredPostcode)) {\n      setIsValidated(true);\n      updateUserPostcode(AddSpaceToPostcode(enteredPostcode));\n    } else {\n      setIsValidated(false);\n      updateUserPostcode(null);\n    }\n\n    setIsSubmitted(true);\n\n    if (FormatValidatePostcode(enteredPostcode)) {\n      modalContext.showModal(Search, {\n        show: true,\n        title: \"Refine Search\",\n        activePanel: SearchPanels.SearchDetailed\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, _objectSpread(_objectSpread({\n      onHide: onRequestClose,\n      centered: true\n    }, otherProps), {}, {\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        className: \"d-flex flex-nowrap justify-content-center align-items-center\",\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          className: \"text-center mb-0\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-100 py-3 px-3 px-md-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2\",\n            children: \"Please enter a full postcode.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-24 form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                ref: postcodeRef,\n                className: `form-control ${isSubmitted && !isValidated ? 'is-invalid' : ''}`,\n                placeholder: \"AB12 3CD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-24 d-flex align-items-center justify-content-end\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success btn-lg\",\n                onClick: evt => handlePostcodeSubmit(evt),\n                children: \"Next\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }), void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalPostcode);","map":{"version":3,"sources":["E:/current_project/PPH/tfs/Website/Website/components/layout/modal-postcode/modal-postcode.tsx"],"names":["React","useRef","useState","useContext","connect","Modal","FormatValidatePostcode","AddSpaceToPostcode","ModalContext","Search","SearchPanels","mapStateToProps","state","dealToggle","dealSelector","vehicleFilters","userPostcode","mapDispatchToProps","dispatch","updateUserPostcode","type","ModalPostcode","onRequestClose","title","otherProps","modalContext","postcodeRef","isSubmitted","setIsSubmitted","isValidated","setIsValidated","handlePostcodeSubmit","evt","preventDefault","enteredPostcode","current","value","toLowerCase","showModal","show","activePanel","SearchDetailed"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useContext } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { FormatValidatePostcode, AddSpaceToPostcode } from 'helpers/helpers';\r\nimport ModalContext from '../../HOCs/modal/modalContext';\r\nimport Search from '../../search';\r\nimport { SearchPanels } from '../../../enums/SearchPanels';\r\n\r\ntype Props = {\r\n    onRequestClose: any;\r\n    title: string;\r\n    userPostcode: string;\r\n    updateUserPostcode: any;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        dealToggle: state.dealSelector,\r\n        vehicleFilters: state.vehicleFilters,\r\n        userPostcode: state.userPostcode,\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        updateUserPostcode: (userPostcode) => {\r\n            dispatch({ type: 'UPDATE_POSTCODE', userPostcode: userPostcode });\r\n        },\r\n    }\r\n}\r\n\r\nconst ModalPostcode: React.FC<Props> = ({ onRequestClose, title, userPostcode, updateUserPostcode, ...otherProps }) => {\r\n    const modalContext = useContext(ModalContext);\r\n    const postcodeRef = useRef() as React.MutableRefObject<HTMLInputElement>;\r\n    const [isSubmitted, setIsSubmitted] = useState<boolean>(false);\r\n    const [isValidated, setIsValidated] = useState<boolean>(false);\r\n    const handlePostcodeSubmit = (evt) => {\r\n        evt.preventDefault();\r\n        let enteredPostcode = postcodeRef.current.value.toLowerCase();\r\n\r\n        if (FormatValidatePostcode(enteredPostcode)) {\r\n            setIsValidated(true);\r\n            updateUserPostcode(AddSpaceToPostcode(enteredPostcode));\r\n        } else {\r\n            setIsValidated(false);\r\n            updateUserPostcode(null);\r\n        }\r\n\r\n        setIsSubmitted(true);\r\n\r\n        if (FormatValidatePostcode(enteredPostcode)) {\r\n            modalContext.showModal(Search, { show: true, title: \"Refine Search\", activePanel: SearchPanels.SearchDetailed })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Modal onHide={onRequestClose} centered={true} {...otherProps}>\r\n                <Modal.Header className=\"d-flex flex-nowrap justify-content-center align-items-center\" closeButton>\r\n                    <Modal.Title className=\"text-center mb-0\">{title}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div className=\"w-100 py-3 px-3 px-md-5\">\r\n                        <p className=\"mb-2\">Please enter a full postcode.</p>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-24 form-group\">\r\n                                <input type=\"text\" ref={postcodeRef} className={`form-control ${isSubmitted && !isValidated ? 'is-invalid' : ''}`} placeholder=\"AB12 3CD\" />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-24 d-flex align-items-center justify-content-end\">\r\n                                <button className=\"btn btn-success btn-lg\" onClick={(evt) => handlePostcodeSubmit(evt)}>Next</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Modal.Body>\r\n            </Modal>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalPostcode);"]},"metadata":{},"sourceType":"module"}