{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"E:/current_project/PPH/tfs/Website/website/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/current_project/PPH/tfs/Website/website/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState } from 'react';\nimport MainLayout from '../components/layout/main-layout';\nimport ContactBlocks from '../components/layout/contact-blocks';\nimport MetaHead from '../components/seo/meta';\nimport TrustHorizontalContainer from '../components/trustpilot/trust-horizontal';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner } from \"@fortawesome/pro-regular-svg-icons\";\nimport { useForm } from \"react-hook-form\";\nimport { EnquiryService } from \"business-logic/enquiryService\";\nimport { useRouter } from 'next/router';\nimport { GetThankYouPageUrl, GetCanonicalUrl } from 'helpers/urlHelper';\nimport { PhoneNumberIsValid } from 'helpers/validation';\nimport { connect } from 'react-redux';\n\nfunction mapStateToProps(state) {\n  return {\n    isInternal: state.isInternal,\n    previousRoute: GetCanonicalUrl(state.referrerRoute)\n  };\n}\n\nfunction RequestCallback(_ref) {\n  var _errors$telephone;\n\n  var isInternal = _ref.isInternal,\n      previousRoute = _ref.previousRoute;\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors;\n\n  var router = useRouter();\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!isLoading) {\n                setIsLoading(true);\n                EnquiryService.SubmitRequestCallback(data.name, data.telephone, previousRoute).then(function (result) {\n                  if (result.data) {\n                    router.push(GetThankYouPageUrl(isInternal, \"callbackrequest\"));\n                  }\n                })[\"catch\"](function (error) {\n                  console.log(error);\n                })[\"finally\"](function () {\n                  setIsLoading(false);\n                });\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(MetaHead, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"Request a Callback - Talk to one of our friendly Team | Leasing Options\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"description\",\n        content: \"Our team of experts are here to help you find your perfect vehicle and answer any questions you may have about Leasing.\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"keywords\",\n        content: \"Personal Car Leasing, Personal Car Lease Deals, Personal Car Leasing Manchester, Contract hire\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"canonical\",\n        href: GetCanonicalUrl(\"/request-callback\")\n      })]\n    }), /*#__PURE__*/_jsxs(\"section\", {\n      className: \"container py-3 py-md-5\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 text-center\",\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"mb-3\",\n            children: \"Request A Callback\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24 text-center\",\n          children: /*#__PURE__*/_jsx(TrustHorizontalContainer, {})\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"section\", {\n      className: \"container-fluid py-3 py-md-5 bg-light-grey\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-24\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"w-100 box bg-white p-0 mb-3 mb-md-4\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"box__header\",\n                  children: [\"Your Contact Details \", /*#__PURE__*/_jsx(\"small\", {\n                    children: \"Fields marked * are required\"\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"box__content p-md-5\",\n                  children: /*#__PURE__*/_jsxs(\"form\", {\n                    className: \"px-md-5 text-center\",\n                    onSubmit: handleSubmit(onSubmit),\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"form-group text-left\",\n                      children: [/*#__PURE__*/_jsx(\"label\", {\n                        htmlFor: \"name\",\n                        children: \"Name *\"\n                      }), /*#__PURE__*/_jsx(\"input\", {\n                        type: \"text\",\n                        className: \"form-control \".concat(errors.name ? \"is-invalid\" : \"\"),\n                        id: \"name\",\n                        name: \"name\",\n                        \"aria-describedby\": \"name\",\n                        placeholder: \"First & Last Name\",\n                        ref: register({\n                          required: true\n                        })\n                      }), errors.name && /*#__PURE__*/_jsx(\"span\", {\n                        className: \"invalid-feedback d-block\",\n                        children: \"This field is required\"\n                      })]\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"form-group text-left\",\n                      children: [/*#__PURE__*/_jsx(\"label\", {\n                        htmlFor: \"telephone\",\n                        children: \"Telephone *\"\n                      }), /*#__PURE__*/_jsx(\"input\", {\n                        type: \"text\",\n                        className: \"form-control \".concat(errors.telephone ? \"is-invalid\" : \"\"),\n                        id: \"telephone\",\n                        name: \"telephone\",\n                        placeholder: \"Mobile or Home\",\n                        ref: register({\n                          required: 'This field is required',\n                          validate: function validate(value) {\n                            return PhoneNumberIsValid(value) === true || 'Invalid phone number';\n                          }\n                        })\n                      }), errors.telephone && /*#__PURE__*/_jsx(\"span\", {\n                        className: \"invalid-feedback d-block\",\n                        children: (_errors$telephone = errors.telephone) === null || _errors$telephone === void 0 ? void 0 : _errors$telephone.message\n                      })]\n                    }), /*#__PURE__*/_jsx(\"button\", {\n                      type: \"submit\",\n                      className: \"btn btn-primary btn-lg mt-3\",\n                      children: isLoading ? /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                        width: \"16\",\n                        height: \"16\",\n                        icon: faSpinner,\n                        className: \"fa-spin\"\n                      }) : \"Submit\"\n                    })]\n                  })\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(ContactBlocks, {})]\n        })\n      })\n    })]\n  });\n}\n\nRequestCallback.layout = MainLayout;\nexport default connect(mapStateToProps)(RequestCallback);","map":null,"metadata":{},"sourceType":"module"}